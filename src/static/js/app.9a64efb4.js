(function(e){function t(t){for(var n,s,u=t[0],o=t[1],c=t[2],p=0,v=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,u=1;u<r.length;u++){var o=r[u];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=o;i.push(["cd49","chunk-vendors"]),r()})({0:function(e,t){},"034f":function(e,t,r){"use strict";r("85ec")},1:function(e,t){},1176:function(e,t,r){},2:function(e,t){},"37af":function(e,t,r){"use strict";r("1176")},"4d14":function(e,t,r){},"507d":function(e,t,r){"use strict";r("5a45")},"5a45":function(e,t,r){},"85ec":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),a=r("7591"),i=r.n(a),s=(r("e792"),r("d5e8"),r("5363"),r("a6f4"));n["default"].use(s["b"]);var u=r("8a60"),o=r.n(u),c=o.a.prototype.stopCallback;function l(){o.a.paused=!1,o.a.pause=function(){o.a.paused=!0},o.a.unpause=function(){o.a.paused=!1},o.a.prototype.stopCallback=function(e,t,r){return!!o.a.paused||c(e,t,r)}}l();var p=r("4eb5"),v=r.n(p);n["default"].use(v.a);var d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view"),r("global-snackbar"),r("prompt"),r("upload-progress-display")],1)},f=[],h=r("2f62"),g=r("1898"),m=r("1da1"),b=r("5530"),_=(r("96cf"),r("4de4"),r("d3b7"),r("159b"),r("d81d"),r("3ca3"),r("ddb0"),r("ac1f"),r("1276"),r("99af"),r("bc3a")),x=r.n(_),y=r("2ef0"),w=r.n(y),k=function(e){return M(e,O)},j=function(e){return I(e,O)},O=Object(g["b"])({namespaced:!0,state:{inProgress:!1,dialogOpen:!1,uploads:[]},getters:{totalProgress:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=j(t),a=n.state,i=a.uploads.filter((function(e){return!e.cancelled}));return Math.round(i.reduce((function(e,t){return e+t.progress}),0)/i.length)},allSuccessful:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=j(t),a=n.state;return a.uploads.filter((function(e){return!e.error&&!e.cancelled})).length===a.uploads.length}},mutations:{setInProgress:function(e,t){e.inProgress=t},setDialogOpen:function(e,t){e.dialogOpen=t},setUploads:function(e,t){e.uploads=t},setUploadAtIndex:function(e,t){var r=t.upload,a=t.index;n["default"].set(e.uploads,a,r)}},actions:{cancelUpload:function(e,t){var r=k(e),n=r.state,a=r.commit,i=n.uploads[t];i.cancelToken.cancel();var s=Object(b["a"])(Object(b["a"])({},i),{},{cancelled:!0});a.setUploadAtIndex({index:t,upload:s})},cancelAllUploads:function(e){var t=k(e),r=t.state,n=t.dispatch;r.uploads.forEach((function(e,t){n.cancelUpload(t)}))},uploadDatasetFiles:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,u,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(u=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],s=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:s,index:t})},n=k(e),a=n.state,i=n.commit,s=n.rootState.client,null!==s){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){u(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.uploadDatasetFile(t);case 2:n=e.sent,u=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},u),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:i.setInProgress(!1);case 11:case"end":return r.stop()}}),r)})))()},uploadMetadataFile:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,u,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(u=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],s=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:s,index:t})},n=k(e),a=n.state,i=n.commit,s=n.rootState.client,null!==s){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){u(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.uploadMetadataFile(t);case 2:n=e.sent,u=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},u),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:i.setInProgress(!1);case 11:case"end":return r.stop()}}),r)})))()},uploadQcDatasetFiles:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,u,o,c,l,p,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(u=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],s=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:s,index:t})},n=k(e),a=n.state,i=n.commit,s=n.rootState.client,null!==s){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){u(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.uploadDatasetFile(t);case 2:n=e.sent,u=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},u),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:return l=t[0].output_filename.split("/")[0],p=y["uniq"](t.map((function(e){return e.output_filename.split("/")[1]}))),v=p.map((function(e){var t="".concat(l,"/").concat(e),r={params:{qc_dir:t}},n=s.generateQcEntry(r);return n})),r.next=15,Promise.all(v).then((function(e){y["each"](e,(function(e){}))}));case 15:i.setInProgress(!1);case 16:case"end":return r.stop()}}),r)})))()},resetUploadState:function(e){var t=k(e),r=t.commit;r.setInProgress(!1),r.setUploads([])}}}),R=O;n["default"].use(h["a"]);var C=Object(g["a"])({state:{client:null,currentComponent:{component:null},serverStatus:null,subMenu:null,xploreData:null},getters:{},mutations:{setClient:function(e,t){e.client=t},setComponent:function(e,t){e.currentComponent=t},setServerStatus:function(e,t){e.serverStatus=t},setSubmenu:function(e,t){e.subMenu=t},setXploreData:function(e,t){e.xploreData=t}},actions:{},modules:{upload:R}}),S=C.store,M=(C.rootActionContext,C.moduleActionContext),I=(C.rootGetterContext,C.moduleGetterContext),P=S,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",e._b({attrs:{timeout:e.timeout},scopedSlots:e._u([e.buttonExists?{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{text:"",icon:!!e.buttonIcon},on:{click:e.buttonClicked}},"v-btn",n,!1),[e.buttonIcon?r("v-icon",[e._v(" "+e._s(e.buttonIcon)+" ")]):r("span",[e._v(" "+e._s(e.button)+" ")])],1)]}}:null],null,!0),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},"v-snackbar",e.options,!1),[e._v(" "+e._s(e.text)+" "),e.buttonExists?r("v-spacer"):e._e()],1)},D=[],T=Object(s["f"])(!1),A=Object(s["f"])(""),U="",B=Object(s["f"])(U),L="",z=Object(s["f"])(L),E=null,N=Object(s["f"])(E),q=2e3,J=Object(s["f"])(q),W={color:"secondary"},G=Object(s["f"])(W);function $(e){A.value=e.text,B.value=e.button||U,z.value=e.buttonIcon||L,N.value=e.callback||E,J.value=e.timeout||q,G.value=Object(b["a"])(Object(b["a"])({},W),e.options),T.value=!0}Object(s["g"])(T,(function(e){!1===e&&setTimeout((function(){G.value=W}),150)}));var H=Object(s["c"])({name:"Snackbar",setup:function(){var e=Object(s["a"])((function(){return B.value||z.value}));function t(){null!==N.value&&N.value(),T.value=!1}return{show:T,text:A,button:B,buttonIcon:z,buttonExists:e,callback:N,timeout:J,options:G,buttonClicked:t}}}),V=H,Q=r("2877"),X=Object(Q["a"])(V,F,D,!1,null,null,null),K=X.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"400"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clickNegative.apply(null,arguments)},input:function(t){return t||e.clickNegative()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-card",[e.title?r("v-toolbar-title",{staticClass:"title pa-4"},[e._v(" "+e._s(e.title)+" ")]):e._e(),r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pl-4"},[e._v(" "+e._s(e.message)+" ")]),r("v-card-actions",[r("v-spacer"),e.negativeText?r("v-btn",{attrs:{text:""},on:{click:e.clickNegative}},[e._v(" "+e._s(e.negativeText)+" ")]):e._e(),e.positiveText?r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.clickPositive}},[e._v(" "+e._s(e.positiveText)+" ")]):e._e()],1)],1)],1)},Z=[],ee="",te="",re=null,ne="",ae="",ie=Object(s["f"])(!1),se=Object(s["f"])(ee),ue=Object(s["f"])(te),oe=Object(s["f"])(re),ce=Object(s["f"])(ne),le=Object(s["f"])(ae);var pe=Object(s["c"])({name:"Prompt",setup:function(){function e(){oe.value&&oe.value(!0),ie.value=!1}function t(){oe.value&&oe.value(!1),ie.value=!1}return{show:ie,title:se,message:ue,positiveText:ce,negativeText:le,clickPositive:e,clickNegative:t}}}),ve=pe,de=Object(Q["a"])(ve,Y,Z,!1,null,null,null),fe=de.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dialogOpen?r("v-card",{staticClass:"progress-card mr-5 mb-5",attrs:{"min-width":"20vw"}},[r("v-card-title",[e.inProgress?e._e():[e.allSuccessful?r("v-icon",{attrs:{left:"",color:"success"}},[e._v(" mdi-check ")]):r("v-icon",{attrs:{left:"",color:"warning"}},[e._v(" mdi-alert-circle ")])],e.inProgress?r("span",[e._v(" Uploading "+e._s(e.uploads.length)+" Files ")]):r("span",[e._v(" Uploads Finished ")]),r("v-spacer"),e.minimized?r("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!1}}},[r("v-icon",[e._v("mdi-chevron-up")])],1):r("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!0}}},[r("v-icon",[e._v("mdi-chevron-down")])],1),r("v-btn",{attrs:{icon:""},on:{click:e.handleClickClose}},[r("v-icon",[e._v("mdi-close")])],1),r("v-dialog",{attrs:{width:"30vw"},model:{value:e.closeDialogDialog,callback:function(t){e.closeDialogDialog=t},expression:"closeDialogDialog"}},[r("v-card",[r("v-card-title",[e._v("Cancel Uploads?")]),r("v-card-subtitle",[e._v(" Are you sure you want to cancel all uploads? ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:e.cancelAllUploads}},[e._v(" Cancel Uploads ")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.closeDialogDialog=!1}}},[e._v(" Continue ")])],1)],1)],1)],2),e.inProgress?r("v-progress-linear",{attrs:{value:e.totalProgress}}):e._e(),e.minimized?e._e():r("v-card-text",{staticClass:"pa-0"},[r("v-list",{attrs:{dense:""}},e._l(e.uploads,(function(t,n){return r("v-list-item",{key:n},[r("v-list-item-avatar",[r("v-icon",[e._v("mdi-folder-upload")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(" "+e._s(t.file.name)+" ")]),t.error?r("v-list-item-subtitle",{staticClass:"red--text"},[e._v(" "+e._s(t.error)+" ")]):e._e()],1),r("v-list-item-action",[t.cancelled?r("v-icon",{attrs:{color:"error"}},[e._v(" mdi-cancel ")]):t.error?r("v-icon",{attrs:{color:"error"}},[e._v(" mdi-close ")]):r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(a){var i=a.hover;return[i&&!t.finished?r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.cancelUpload(n)}}},[r("v-icon",[e._v("mdi-close")])],1):t.finished?r("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check ")]):r("v-progress-circular",{attrs:{color:"primary",width:"2",size:"24",value:50}})]}}],null,!0)})],1)],1)})),1)],1)],1):e._e()},ge=[],me={dispatch:$},be=Object(s["c"])({name:"UploadProgressDisplay",setup:function(){var e=Object(s["a"])((function(){return P.state.upload.uploads})),t=Object(s["a"])((function(){return P.getters.upload.allSuccessful})),r=Object(s["a"])((function(){return P.state.upload.inProgress})),n=Object(s["a"])((function(){return P.state.upload.dialogOpen})),a=Object(s["a"])((function(){return P.getters.upload.totalProgress})),i=Object(s["f"])(!0),u=Object(s["f"])(!1);function o(){P.commit.upload.setDialogOpen(!1),u.value=!1}function c(e){P.dispatch.upload.cancelUpload(e)}function l(){return p.apply(this,arguments)}function p(){return p=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.dispatch.upload.cancelAllUploads();case 2:me.dispatch({text:"Uploads Cancelled."}),o();case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(){r.value?u.value=!0:o()}return{uploads:e,allSuccessful:t,inProgress:r,totalProgress:a,dialogOpen:n,closeDialog:o,closeDialogDialog:u,handleClickClose:v,cancelUpload:c,cancelAllUploads:l,minimized:i}}}),_e=be,xe=(r("507d"),Object(Q["a"])(_e,he,ge,!1,null,"6e5fe924",null)),ye=xe.exports,we=Object(s["c"])({name:"App",components:{GlobalSnackbar:K,Prompt:fe,UploadProgressDisplay:ye},setup:function(e,t){Object(s["a"])((function(){return P.state.client}))}}),ke=we,je=(r("034f"),Object(Q["a"])(ke,d,f,!1,null,null,null)),Oe=je.exports,Re=r("8c4f"),Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-main",[r("appbar",{staticClass:"appbar",attrs:{submenu:e.submenu}}),r("v-container",{attrs:{fluid:""}},[r("v-row",[e.run_id_search_active?r("v-dialog",{attrs:{value:e.run_id_search_active,"hide-overlay":""},on:{"click:outside":function(t){e.run_id_search_active=!e.run_id_search_active}}},[r("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[r("v-card-title",[r("v-text-field",{attrs:{dense:"","prepend-inner-icon":"mdi-magnify",value:e.searchInput},on:{input:function(t){e.searchInput=t,e.searchRuns(e.searchInput)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{attrs:{height:"20vh",width:"20%",dense:"","single-select":"",loading:e.loading,items:e.run_id_folder_namesHolder,headers:e.headers},on:{"click:row":e.run_folder_selected}})],1)],1):e._e(),e.image_processing_begun?r("v-dialog",{attrs:{width:"600",height:"800",value:e.show_metadata,persistent:!e.metadata_confirmed_bool}},[r("metadata-dropdown",{attrs:{metadata:e.metadata,drop_down_manager:e.drop_down_manager,run_id:e.run_id,updating_existing:e.updating_existing,barcode_filename_list:e.barcode_filename_options,metadata_confirmed_bool:e.metadata_confirmed_bool},on:{confirmed:e.metadata_confirmed,refresh:e.pageRefresh}})],1):e._e(),e.checkSpatial?e._e():r("v-col",{staticClass:"pl-6 pt-3",attrs:{cols:"12",sm:"2"}},[e.run_id&&e.image_processing_begun?[r("v-card",[r("v-slider",{staticClass:"pl-2",attrs:{dense:"",height:"20",label:"Scale",type:"number",min:"0.1",max:"0.8",step:"0.005",disabled:!e.current_image},on:{change:e.onChangeScale},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}}),r("v-list",{staticClass:"mt-n3 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Rotation")]),r("v-btn",{attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(0)}}},[r("img",{attrs:{src:"/static/img/rotate_left.png",width:"24",height:"24"}})]),r("v-btn",{staticClass:"spaced_btn",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||"45"==e.degreeRotation||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(1)}}},[r("img",{attrs:{src:"/static/img/rotate_right.png",width:"24",height:"24"}})]),r("div",{staticStyle:{display:"grid","margin-top":"10px"}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"90",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"90")},on:{change:function(t){e.degreeRotation="90"}}}),e._v("90")]),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"45",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"45")},on:{change:function(t){e.degreeRotation="45"}}}),e._v("45")])])],1),r("v-list",{staticClass:"mt-n4 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Cropping")]),r("v-btn",{attrs:{outlined:"",color:"primary",dense:"","x-small":"",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},on:{click:e.activateCrop}},[e._v(" Activate ")]),r("v-btn",{staticClass:"mt-0 pt-0",attrs:{outlined:"",loading:e.cropLoading,disabled:!e.current_image||!e.isCropMode||e.cropFlag,"x-small":"",dense:"",color:"primary"},on:{click:e.onCropButton}},[e._v(" Confirm ")])],1),r("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("ROI")]),r("v-btn",{staticClass:"mr-8",attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.active_roi_available},on:{click:e.finding_roi}},[e._v(" Activate ")]),r("v-btn",{attrs:{dense:"",outlined:"",color:"primary","x-small":"",disabled:e.grid_visible||!e.grid},on:{click:e.show_grid}},[e._v(" Display Grid ")]),r("v-btn",{attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.grid_visible},on:{click:function(t){return e.hide_grid()}}},[e._v(" Hide Grid ")])],1),r("v-list",{attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Thresholding")]),e._v(" C value: "+e._s(e.c_val)+" "),r("v-slider",{staticClass:"slider",attrs:{step:"1",min:"0",max:"25",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial},model:{value:e.c_val,callback:function(t){e.c_val=t},expression:"c_val"}}),e._v(" Neighborhood: "+e._s(e.neighbor_size)+" "),r("v-slider",{staticClass:"slider",attrs:{disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial,step:"1",min:"0",max:"25"},model:{value:e.neighbor_size,callback:function(t){e.neighbor_size=t},expression:"neighbor_size"}}),r("v-btn",{attrs:{loading:e.threshLoading,outlined:"",dense:"",color:"primary",small:"",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial||e.thresh_same},on:{click:e.thresh_clicked}},[e._v(" Threshold ")])],1),r("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Background Image")]),r("v-btn",{attrs:{id:"postB_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.postB_image_displayed||e.spatial},on:{click:function(t){return e.change_image("postB")}}},[e._v(" PostB ")]),r("v-btn",{attrs:{id:"bsa_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.bsa_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BSA")}}},[e._v(" BSA ")]),r("v-btn",{attrs:{id:"bw_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created||e.bw_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BW")}}},[e._v(" BW ")])],1),e._e(),e.position_counts_present?r("v-list",[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v(" Counts Visualization ")]),r("v-checkbox",{attrs:{label:e.show_counts_tixels?"Hide Counts":"Show Counts"},on:{click:e.toggle_tixel_counts_disp},model:{value:e.show_counts_tixels,callback:function(t){e.show_counts_tixels=t},expression:"show_counts_tixels"}}),e.show_counts_tixels?r("div",{style:{"background-image":""+e.linear_gradient_description_string,display:"flex",height:"50px","max-width":"250px","margin-left":"10px","margin-right":"10px"}},[r("div",{staticStyle:{position:"relative","padding-top":"50px",left:"5%"}},[e._v(" "+e._s(e.lower_bound_count)+" ")]),r("div",{staticStyle:{position:"relative","padding-top":"50px",left:"65%"}},[e._v(" "+e._s(e.upper_bound_count)+" ")])]):e._e()],1):e._e(),r("v-list",{staticClass:"pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("On/Off")]),r("v-btn",{attrs:{outlined:"",disabled:!e.thresh_image_created||e.spatial,"x-small":"",dense:"",color:"primary"},on:{click:e.autoFill}},[e._v(" Autofill ")]),r("v-checkbox",{attrs:{dense:"",value:e.isBrushMode,disabled:!e.tixels_filled,label:"Fill"},model:{value:e.isBrushMode,callback:function(t){e.isBrushMode=t},expression:"isBrushMode"}}),r("v-checkbox",{attrs:{dense:"",value:e.isEraseMode,disabled:!e.tixels_filled,label:"Erase"},model:{value:e.isEraseMode,callback:function(t){e.isEraseMode=t},expression:"isEraseMode"}}),r("v-text-field",{staticStyle:{width:"100px"},attrs:{dense:"",label:"Br.Size",type:"number",min:"5.0",max:"100.0",step:"3.0",disabled:!e.tixels_filled},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}),[r("v-btn",{attrs:{disabled:!e.tixels_filled,outlined:"","x-small":"",dense:"",color:"primary"},on:{click:function(t){return e.handle_spatial_call()}}},[e._v(" Generate Spatial Folder ")]),r("v-btn",{staticClass:"vert-spaced-btn",attrs:{outlined:"","x-small":"",dense:"",color:"red"},on:{click:e.showSpatialFolder}},[e._v(" Check Spatial Folder ")])]],2)],1)]:e._e(),r("v-dialog",{attrs:{persistent:"",value:e.prompt_to_use_existing_spatial,"max-width":"800px"}},[r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.run_id)+" Spatial Folder Found. ")]),r("v-card-title",{staticClass:"justify-center"},[e._v(" Would you like to update the existing spatial folder or reprocess the image? ")]),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:function(t){return e.reprocess_image(e.run_id)}}},[e._v(" Reprocess ")]),r("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:e.update_run_function}},[e._v(" Update ")])],1)],1)],1),r("v-dialog",{attrs:{value:e.prompt_to_select_counts_positions,"max-width":"800px"}},[r("v-card",[r("v-card-title",{staticClass:"justify-center"},[e._v(" Select tissue positions file with counts if available. ")]),r("v-card-actions",[r("v-select",{attrs:{items:e.count_file_options},model:{value:e.tissue_positions_counts_filename,callback:function(t){e.tissue_positions_counts_filename=t},expression:"tissue_positions_counts_filename"}}),r("v-btn",{on:{click:function(t){e.prompt_to_select_counts_positions=!1,e.load_counts_positions()}}},[e._v(" Confirm ")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"",value:!e.image_processing_begun&&e.file_options.length>1&&!e.prompt_to_use_existing_spatial,"max-width":"800px","max-height":"400px"}},[r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" Multiple Images Found. ")]),r("v-card-title",{staticClass:"justify-center"},[e._v(" Please select the BSA "),r("span",{staticStyle:{color:"red"}},[e._v("_AND OR_")]),e._v("postB image to be used for processing. ")]),r("v-spacer"),r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-select",{attrs:{items:e.file_options,label:"Select BSA Image",outlined:"",dense:"",color:"primary",small:""},model:{value:e.full_bsa_filename,callback:function(t){e.full_bsa_filename=t},expression:"full_bsa_filename"}})],1)],1),r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-select",{attrs:{disabled:""===e.full_bsa_filename,items:e.file_options,label:"Select postB Image",outlined:"",dense:"",color:"primary",small:""},model:{value:e.full_postb_filename,callback:function(t){e.full_postb_filename=t},expression:"full_postb_filename"}})],1)],1),r("v-btn",{staticStyle:{position:"relative",left:"50%",transform:"translateX(-50%)"},attrs:{disabled:""===e.full_bsa_filename,outlined:""},on:{click:function(t){e.show_metadata=!0,e.load_and_begin_image_processing()}}},[e._v(" Submit ")])],1)],1)],2),e.checkSpatial?e._e():r("v-col",{attrs:{cols:"12",sm:"9"}},[r("v-container",[e.loadingMessage?[r("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[r("v-card-text"),r("v-dialog",{attrs:{value:"true","hide-overlay":"",persistent:"",width:"600"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-title",[e._v(" Creating and Saving Spatial Folder")]),r("v-card-text",[r("v-progress-linear",{staticClass:"mb-0",attrs:{"buffer-value":"0",height:"10",stream:"",color:"white"},model:{value:e.one,callback:function(t){e.one=t},expression:"one"}})],1)],1)],1)],1)]:e._e(),r("v-row",[r("v-card",[e.loading&&!e.loadingMessage?[r("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[r("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)]:e._e(),e.checkSpatial||e.welcome_screen?e._e():r("v-stage",{ref:"konvaStage",staticClass:"mainStage",attrs:{config:e.konvaConfig},on:{mousemove:e.handleMouseMoveStage}},[e.current_image?r("v-layer",{ref:"imageLayer",attrs:{id:"imageLayer"},on:{click:e.imageClick}},[r("v-image",{ref:"image",attrs:{config:e.current_image}})],1):e._e(),e.grid?r("v-layer",{ref:"roiLayer",attrs:{id:"roiLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[e.updating_existing||e.isBrushMode||e.isEraseMode?e._e():[r("v-line",{attrs:{config:e.roi.generateBoundary()}})],r("v-transformer",{ref:"transformer"}),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():e._l(e.roi.getAnchors(),(function(t){return r("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart,dragmove:e.handleDragMove}})})),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():r("v-circle",{key:e.roi.getCenterAnchor().id,attrs:{config:e.roi.getCenterAnchor()},on:{dragstart:e.handleDragCenterStart,dragmove:e.handleDragCenterMove}})]:e._e()],2):e._e(),r("v-layer",e._l(100,(function(t){return r("v-group",{key:t},e._l(e.roi.get_polygon_subset(t-1,100),(function(t){return r("v-shape",{key:t.id,attrs:{config:t},on:{transformend:function(t){return e.roi.setScaleFactor()},mousedown:e.handleMouseDown}})})),1)})),1),r("v-layer",[e.isBrushMode||e.isEraseMode?r("v-circle",{attrs:{config:e.brushConfig},on:{mousedown:e.handleMouseDownBrush,mouseup:e.handleMouseUpBrush}}):e._e()],1),!e.isCropMode||e.grid||e.cropFlag?e._e():r("v-layer",{ref:"cropLayer",attrs:{id:"cropLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[r("v-rect",{attrs:{config:e.crop.generateRect()}}),e.isBrushMode?e._e():e._l(e.crop.getAnchors(),(function(t){return r("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart_Crop,dragend:e.handleDragEnd_Crop,dragmove:e.handleDragMove_Crop}})})),e.isBrushMode?e._e():r("v-circle",{key:e.crop.getCenterAnchor().id,attrs:{config:e.crop.getCenterAnchor()},on:{dragmove:e.handleDragCenterMove_Crop}})]:e._e()],2)],1)],2)],1)],2)],1),r("v-col",{attrs:{cols:"12",sm:"12"}},[e.checkSpatial?r("SpatialFolderViewer",{attrs:{root:e.root_spatial,bucket_name:e.bucket_name_spatial,selectedRunID:e.run_id,getFiles:e.checkSpatial}}):e._e()],1),e.welcome_screen?r("v-col",{attrs:{cols:"12",sm:"12",justify:"center"}},[r("v-img",{staticClass:"center",attrs:{src:"/static/img/atlasbg.png",width:"width",height:"height"}})],1):e._e()],1)],1)],1)},Se=[],Me=r("3835"),Ie=(r("4ec9"),r("2b3d"),r("9861"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("00b4"),r("4e82"),r("25eb"),r("a9e3"),r("c740"),r("e9c4"),r("466d"),Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SERVER_URL,"atxLogin"),Pe=window.location.href,Fe=Pe.match(/https:.+\.custom\.pods\.latch\.bio/i),De="".concat(Fe),Te=r("d4ec"),Ae=r("bee2"),Ue=(r("b0c0"),r("d9e2"),6e5);function Be(e){var t=e.split(".");if(3===t.length){var r=JSON.parse(atob(t[1]));if(r.exp)return 1e3*r.exp-Ue-Date.now()}}function Le(e,t){var r=e.toString();while(r.length<t)r="0".concat(r);return r}var ze=function(){function e(t,r){Object(Te["a"])(this,e),this.axios=x.a.create({baseURL:t,headers:{common:{Authorization:r}}}),this.serverURL=t,this.urlPostfix=this.getUrlPostfix(),this.authorizationToken=r,this.user=null,this.workers=null}return Object(Ae["a"])(e,[{key:"initAsync",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchUser();case 3:this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),Be(this.authorizationToken)),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUrlPostfix",value:function(){var e=this.serverURL.split("/"),t=e[e.length-1];return t}},{key:"updateWorkers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getWorkerSummary();case 2:this.workers=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApplicationInfo",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/app");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/refreshtoken");case 2:t=e.sent,r=t.data.access_token,this.authorizationToken="JWT ".concat(r),this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),Be(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/whoami");case 2:t=e.sent,r=t.data,n={username:r.Username,user_level:0,name:"None",email:"",groups:r.groups},this.user=n;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadByLink",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link",a={filename:t,expiry:r},e.next=4,this.axios.get(n,{params:a});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"downloadByLinkPublic",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link_public",a={bucket_name:t,filename:r},e.next=4,this.axios.get(n,{params:a});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"uploadDatasetFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t.file,t.file.name),r.append("meta",JSON.stringify(t.meta)),r.append("output_filename",t.output_filename),n="api/v1/storage/upload",e.prev=5,e.next=8,this.axios.post(n,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!x.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadMetadataFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t.file,t.file.name),r.append("meta",JSON.stringify(t.meta)),r.append("output_filename",t.output_filename),n="api/v1/dataset/".concat(t.meta_type,"/upload"),e.prev=5,e.next=8,this.axios.post(n,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!x.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/auth/changepassword",/Success : (.+)/,e.prev=2,e.next=5,this.axios.put(r,t);case 5:n=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",!1);case 11:if(!n.data){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Unknown Response Received from ".concat(r,"."));case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("/api/v1/auth/user",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"user_request_account",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/user_account_request",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notify_user_group_assignment",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/inform_user_assignment",t);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{user:t}},n=this.axios.put("/api/v1/auth/confirm",r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.delete("/api/v1/auth/user/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetUserPassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/resetpassword",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNames",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/gmnames",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNamesByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:r},e.next=3,this.axios.post("api/v1/genes/gmnames/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSpatialData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpatialDataByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:r},e.next=3,this.axios.post("api/v1/genes/get_spatial_data/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSummation",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,rows:r},e.next=3,this.axios.post("api/v1/genes/get_summation",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressions",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/expressions",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressionsByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},e.next=3,this.axios.post("api/v1/genes/expressions/".concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneSpatial",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,genes:r},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",n,{timeout:3e5});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"encodeLink",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("api/v1/genes/generate_link",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWorkerSummary",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers/summary",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWorkers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTaskSync",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task_sync",s={queue:a,task:t,args:r,kwargs:n},e.next=4,this.axios.post(i,s);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task",s={queue:a,task:t,args:r,kwargs:n},e.next=4,this.axios.post(i,s);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"postPublicTask",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a,i){var s,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/api/v1/public_task",u={queue:a,task:t,args:r,kwargs:n,key:i},console.log(u),e.next=5,this.axios.post(s,u);case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a,i){return e.apply(this,arguments)}return t}()},{key:"decodeMetadata",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/storage/decode_meta/".concat(t),e.next=3,this.axios.get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTaskStatus",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/task/".concat(t),e.next=3,this.axios.get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJsonFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/json",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCsvFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/csv",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFileList",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/list",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubFolders",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/sub_folders",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBuckets",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/storage/fetch_buckets");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getImage",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:r}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomePageImages",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage/png",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:r}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getImageAsJPG",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/image_as_jpg",{params:t.params,responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",new File([r.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGrayImageAsCroppedJPG",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/grayscale_image_jpg_cropping",{params:t.params,responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",new File([r.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateFrontPage",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:t,runId:r},e.next=3,this.axios.post("/api/v1/storage/generate_frontpage",n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"generateQcEntry",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/qc_entry",null,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMetadataFromRunId",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/dataset/slimstest_runid",n="D".concat(Le(Number(t.split("D")[1]),5)),a={params:{run_id:n}},e.next=5,this.axios.get(r,a);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunIdList",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/dataset/slimstest_list_runids",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkWafer",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getWafers(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWafers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafers",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putWafers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/wafers",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteWafer",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/wafers",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkChip",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getChips(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getChips",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/chips",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putChips",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/chips",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteChip",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/chips",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkDbit",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getDbits(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDbits",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/dbits",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putDbits",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/dbits",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDbit",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/dbits",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getQc(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/qc",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/qc",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWaferTrace",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafertrace",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunsCollaborator",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="dbit_metadata",a={params:{collaborator:t,table_name:n,web_objs:r}},e.next=4,this.axios.get("/api/v1/run_db/get_runs_collaborator",a);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"get_user_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/list_accounts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_group_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/group");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create_group",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={data:{group_name:t,description:r}},e.next=3,this.axios.post("/api/v1/auth/group",n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"modify_group_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/modify_group_list",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete_group",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{group_name:t}},e.next=3,this.axios.delete("/api/v1/auth/group",r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disable_user",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{username:t}},e.next=3,this.axios.put("/api/v1/auth/disable_user",r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logIntoPublic",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/auth/log_into_public");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUpdateDate",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_last_update");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSlimsData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_slims_data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicRuns",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/populate_homepage");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupPublicRuns",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="all_public_run_data",n={params:{table:r,group:t}},e.next=4,this.axios.get("/api/v1/run_db/get_group_runs",n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"re_initialize_db",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="public_data",r={params:{database:t}},console.log(r),e.next=5,this.axios.get("/api/v1/run_db/reinitialize_db",r);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePublicData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,this.axios.post("/api/v1/run_db/update_public",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchPMID",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_pmid",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchAuthors",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_authors",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"grabPaths",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/retrieve_paths");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm_user_status_via_email",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={params:{username:t,confirmation_code:r}},e.next=3,this.axios.get("/api/v1/auth/confirm_user_via_email",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"resend_registration_code",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/resend_confirmation_via_email",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"forgotPasswordRequest",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/forgot_password_request",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetPassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={username:t,password:r,code:n},e.next=3,this.axios.post("/api/v1/auth/forgot_password_confirmation",a);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"confirm_user_email_admin",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={username:t},e.next=3,this.axios.post("/api/v1/auth/confirm_user_email_admin",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_available_fields",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_field_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"upload_metadata_from_page",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/upload_metadata_page",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_info_from_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_run_id",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_run_ids",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_run_ids");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_info_from_results_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={results_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_results_id",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkSpatialFolderExists",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket_name:t,run_id:r},e.next=3,this.axios.post("/api/v1/run_db/check_spatial_folder_exists",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getJobs",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_jobs",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ensure_run_id_created",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/ensure_run_id_created",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_ids",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_studies");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_study_runs",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={study_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_study_runs",r);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update_study_table",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/update_study_table",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_types",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_study_types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_downloadable_files_for_run",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={tissue_id:t},e.next=3,this.axios.post("/api/v1/run_db/load_run_files_info",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_type_options",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_file_type_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submit_file_changes",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/set_run_files",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_info_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_file_info_run_id",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_all_downloadable_files_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_all_downloadable_files_run_id");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_urls",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_urls",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_url",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_url",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"Create",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(r,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new e(r,n),t.next=3,a.initAsync();case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"CreatePublic",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(r,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new e(r,n),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)})));function r(e,r){return t.apply(this,arguments)}return r}()}]),e}();function Ee(e){return void 0!==e.isAxiosError}function Ne(e){return void 0!==e.serverURL}function qe(e,t,r){return Je.apply(this,arguments)}function Je(){return Je=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(t,"/api/v1/auth/login"),{username:r,password:n});case 3:return a=e.sent,i=a.data.access_token,s="JWT ".concat(i),e.abrupt("return",ze.Create(t,s));case 9:if(e.prev=9,e.t0=e["catch"](0),!Ee(e.t0)){e.next=13;break}return e.abrupt("return","Invalid username or password");case 13:return e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),Je.apply(this,arguments)}var We=r("35a6"),Ge=r.n(We),$e=r("a77c"),He=r.n($e),Ve=r("31fa"),Qe=r.n(Ve),Xe=r("0818"),Ke=r.n(Xe),Ye=r("db49"),Ze=r.n(Ye),et=r("595c"),tt=r.n(et),rt=(r("53ca"),r("fb6a"),r("b64b"),r("498a"),r("9129"),r("ec26e"));function nt(){return Object(rt["a"])()}function at(e){var t=[];return w.a.forIn(e,(function(e,r){var n={key:r,value:e};t.push(n)})),t}function it(e,t){var r=e,n={name:r.name||void 0,path:r.path,params:r.params,query:t};return n}function st(e,t){for(var r=[],n=0;n<e.length;n+=t)r[r.length]=e.slice(n,n+t);return r}r("caad"),r("2532");var ut=r("a78e"),ot=r.n(ut),ct=Object(s["a"])((function(){return P.state.client})),lt=Object(s["a"])((function(){return null!==ct.value})),pt=Object(s["a"])((function(){var e;return(null===(e=ct.value)||void 0===e?void 0:e.user)||null}));Object(s["a"])((function(){return null!==pt.value}));function vt(e){var t=1/24;ot.a.set(Ie,JSON.stringify(e),{expires:t})}function dt(){var e=ot.a.get(Ie);return void 0===e?e:JSON.parse(e)}function ft(){var e;ot.a.remove(Ie),window.clearTimeout(null===(e=P.state.client)||void 0===e?void 0:e.refreshTimeoutId),P.commit.setClient(null)}function ht(e){if(!ct.value)return!1;if(!ct.value.user)return!1;if("any"===e[0]&&ct.value.user.groups.length>0)return!0;var t=!1;return w.a.each(ct.value.user.groups,(function(r){e.includes(r)&&(t=!0)})),t}var gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{attrs:{app:"",dense:""}},[e._l(e.subMenu,(function(t){return r("v-tooltip",{key:t.text,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on,i=n.attrs;return[t.type?e._e():[r("v-btn",e._g(e._b({class:t.enabled?"visible":"hidden",attrs:{id:t.ref?t.ref:"",text:"",icon:!!t.icon},on:{click:t.click}},"v-btn",i,!1),a),[t.icon?[r("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])]:e._e(),t.icon?e._e():[e._v(" "+e._s(t.text)+" ")]],2)],"component"==t.type?[r("div",{attrs:{id:t.id}})]:e._e()]}}],null,!0)},[r("span",{key:t.text+"-span"},[e._v(e._s(t.tooltip))])])})),r("v-spacer"),[r("v-menu",{attrs:{"offset-y":""},model:{value:e.userMenu,callback:function(t){e.userMenu=t},expression:"userMenu"}})]],2)},mt=[],bt=r("2340"),_t=r("fcf4"),xt={"--bar-button-hover-bkg":_t["a"].grey.lighten2,"--bar-button-open-color":_t["a"].grey.darken3,"--bar-button-open-bkg":_t["a"].grey.lighten2,"--bar-menu-item-hover-bkg":_t["a"].grey.lighten2},yt=Object(s["c"])({name:"Appbar",props:["submenu"],components:{VueFileToolbarMenu:bt["a"]},setup:function(e,t){t.root.$router;var r=Object(s["a"])((function(){return xt})),n=Object(s["a"])((function(){return P.state.currentComponent})),a=Object(s["f"])(!1),i=Object(s["f"])(!1),u=Object(s["a"])((function(){return e.submenu}));return{filemenuStyle:r,loggedIn:lt,logout:ft,userMenu:a,changePasswordMenu:i,subMenu:u,component:n,resolveAuthGroup:ht}}}),wt=yt,kt=(r("f5dd"),Object(Q["a"])(wt,gt,mt,!1,null,null,null)),jt=kt.exports,Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-select",{attrs:{disabled:e.disabled,items:e.display_options,label:e.display_label},on:{input:e.value_changed},scopedSlots:e._u([{key:"append-outer",fn:function(){return[r("v-icon",{attrs:{color:e.add_option?"red":"green"},on:{click:function(t){e.add_option=!e.add_option}}},[e._v(" "+e._s(e.add_option?"mdi-close":"mdi-table-plus")+" ")])]},proxy:!0}]),model:{value:e.local_variable,callback:function(t){e.local_variable=t},expression:"local_variable"}}),e.add_option?r("v-row",[r("v-text-field",{attrs:{label:"Add Option"},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-icon",{attrs:{disabled:0==e.custom_option.length,color:"green"},on:{click:e.new_option}},[e._v(" mdi-check ")])]},proxy:!0}],null,!1,3234581051),model:{value:e.custom_option,callback:function(t){e.custom_option=t},expression:"custom_option"}})],1):e._e()],1)},Rt=[],Ct=Object(s["c"])({name:"custom-selector",props:{display_options:{type:Array,required:!0},display_label:{type:String,required:!0},variable:{required:!0},disabled:{type:Boolean}},model:{prop:"variable",event:"changed"},watch:{variable:function(e){this.local_variable=e}},setup:function(e,t){var r=Object(s["f"])(""),n=Object(s["f"])(""),a=Object(s["f"])(!1);function i(){t.emit("changed",r.value)}function u(){t.emit("option-added",n.value),r.value=n.value,n.value="",a.value=!1,i()}return Object(s["d"])((function(){e.variable&&(e.display_options.includes(e.variable)||t.emit("option-added",e.variable),r.value=String(e.variable))})),{local_variable:r,custom_option:n,add_option:a,value_changed:i,new_option:u}}}),St=Ct,Mt=Object(Q["a"])(St,Ot,Rt,!1,null,null,null),It=Mt.exports,Pt=Object(Ae["a"])((function e(){Object(Te["a"])(this,e),this.species_list=["mus_musculus","homo_sapiens","rattus_norvegicus","danio_rerio_(zebrafish)","gallus_domesticus_(chicken)","pdx","Mouse"],this.organ_list=["embryo","brain","kidney","polyp","liver","ovary","fallopian_tube_epithelium","cerebellum","retina","breast","bone_marrow","tonsil","scalp","pancreas","skin","tumor_allograft","melanoma_tumor","brain_tumor","colon_tumor","matched_liver_metastasis","tibialis_anterior_muscle_","hippocampus","lung","heart","embryonic_heart","spleen","colon","skull","thigh_skin","forearm_skin","shoulder_skin"],this.epitope_list=["H3K27me3","H3K27ac","H3K4me3"],this.group_list=[],this.tissue_source_list=[],this.pmid_list=[],this.tissue_type_list=["fresh_frozen","ffpe"],this.assay_list=["ATAC-seq","Transcriptome","CUT&Tag"],this.chip_resolution_list=["25um"]})),Ft=(r("cb29"),function(){function e(t,r,n){Object(Te["a"])(this,e),this.get_distance_wscale=function(e,t,r,n,a){var i=Math.sqrt(Math.pow(r/a-e/a,2)+Math.pow(n/a-t/a,2)),s=Math.round(1e3*i);return s/1e3},this.scalefactor=r,this.coordinates={},this.initializeROI(t[0],t[1]),this.channels=n,this.polygons=[]}return Object(Ae["a"])(e,[{key:"get_polygon_subset",value:function(e,t){var r=Math.floor(this.polygons.length*(e/t)),n=Math.floor(this.polygons.length*((e+1)/t)),a=this.polygons.slice(r,n);return a}},{key:"initializeROI",value:function(e,t){var r=this,n=[[.15*e,.15*t],[e-.15*e,.15*t],[e-.15*e,t-.15*t],[.15*e,t-.15*t]];n.forEach((function(e,t){var n=Object(Me["a"])(e,2),a=n[0],i=n[1],s=nt(),u={draggable:!0,id:s,x:a,y:i,stroke:"green",radius:10};r.coordinates&&(r.coordinates[s]=u)}))}},{key:"getCoordinates",value:function(){var e=[];return w.a.forIn(this.coordinates,(function(t,r){var n={x:t.x,y:t.y,id:r};e.push(n)})),e}},{key:"setCoordinates",value:function(e){var t=this,r=0;w.a.forIn(this.coordinates,(function(n,a){t.coordinates[a]={x:e[r].x*t.scalefactor,y:e[r].y*t.scalefactor},r+=1}))}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=e.map((function(e){var t={draggable:!0,id:e.id,x:e.x,y:e.y,stroke:"green",radius:10};return t}));return t}},{key:"moveToNewCenter",value:function(e){var t=this,r=this.getCenterAnchor(),n=e.x-r.x,a=e.y-r.y;w.a.forIn(this.coordinates,(function(e,r){t.coordinates[r].x+=n,t.coordinates[r].y+=a}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/4,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/4,stroke:"green",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];return w.a.forIn(this.coordinates,(function(r,n){var a={x:r.x/e.scalefactor,y:r.y/e.scalefactor};t.push(a)})),t}},{key:"getMask",value:function(e){var t=this;return this.polygons.map((function(e){var r=e.posit,n=e.centery/t.scalefactor,a=e.centerx/t.scalefactor,i=e.on_tissue;return{position:r,value:i,coordinates:{y:n,x:a}}}))}},{key:"getOnTissue",value:function(){var e=0;return this.polygons.forEach((function(t){t.on_tissue&&(e+=1)})),e}},{key:"autoMask",value:function(e,t){var r=this,n=Object(Me["a"])(e.shape,2),a=(n[0],n[1]),i=0;return w.a.each(this.polygons,(function(n,s){0===i&&(i+=1);for(var u=Math.round(n.centery/r.scalefactor),o=Math.round(n.centerx/r.scalefactor),c=Math.round(n.radius/r.scalefactor),l=0,p=o-c;p<o+c;p+=1)for(var v=u-c;v<u+c;v+=1)l+=e.data[p*a+v];l/=Math.pow(2*c,2);var d=l<t;r.polygons[s].fill=d?"red":null,r.polygons[s].on_tissue=d})),this.polygons}},{key:"generateBoundary",value:function(){var e=this.getCoordinates(),t=[];w.a.each(e,(function(e,r){t.push(e.x),t.push(e.y)}));var r={points:t,stroke:"red",strokeWidth:1,closed:!0,visible:!0};return r}},{key:"setPolygonsInCircle",value:function(e,t,r,n){var a=this;w.a.each(this.polygons,(function(i,s){var u=Math.pow(i.centerx-e,2)+Math.pow(i.centery-t,2)<Math.pow(r,2);u&&a.setPolygonState(s,n)}))}},{key:"setPolygonState",value:function(e,t){var r=this;Object.keys(t).forEach((function(n){r.polygons[e][n]=t[n]}))}},{key:"fill_color_counts",value:function(e){if(Object.keys(e).length===this.polygons.length)for(var t=0;t<this.polygons.length;t+=1)this.polygons[t].fill=e[t],this.polygons[t].opacity=this.polygons[t].on_tissue?1:.5}},{key:"remove_color_counts",value:function(){for(var e=0;e<this.polygons.length;e+=1){var t=null;this.polygons[e].on_tissue&&(t="red"),this.polygons[e].fill=t,this.polygons[e].opacity=1}}},{key:"toggle_tixel_visibility",value:function(){for(var e=0;e<this.polygons.length;e+=1)this.polygons[e].visible=!this.polygons[e].visible}},{key:"show_tixels",value:function(){0===this.polygons.length?this.loadTixels():this.toggle_tixel_visibility()}},{key:"setScaleFactor",value:function(e){var t=this,r=this.scalefactor;this.scalefactor=e;var n=this.scalefactor/r,a={};w.a.forIn(this.coordinates,(function(e,t){a[t]={x:e.x*n,y:e.y*n}})),this.coordinates=a;var i=[];w.a.each(this.polygons,(function(e,r){var a=e;a.scaleX=e.scaleX*n,a.scaleY=e.scaleY*n,a.radius=e.radius*n,a.centerx=e.centerx*n,a.centery=e.centery*n,a.strokeWidth=.8*Math.max(1-t.scalefactor,.1),i.push(a)})),this.polygons=i}},{key:"getQCScaleFactors",value:function(t,r){var n=2e3/t.image.width,a=600/t.image.width,i=this.getMask(r);i.length;var s=i[0].coordinates,u=(s.x,s.y,i[1].coordinates),o=(u.x,u.y,this.getCoordinates()),c=Object(Me["a"])(o,4),l=c[0],p=c[1],v=(c[2],c[3]),d=2*this.channels-1,f=e.ratio50l(l.x,l.y,v.x,v.y,d),h=e.ratio50l(l.x,l.y,p.x,p.y,d),g=[f[1]-l.y,f[0]-l.x],m=this.get_distance_wscale(f[0],f[1],h[0],h[1],this.scalefactor),b=this.get_distance_wscale(l.x,l.y,h[0]+g[1],h[1]+g[0],this.scalefactor),_=(m+b)/2,x=1.6153846;return{spot_diameter_fullres:_,fiducial_diameter_fullres:_*x,tissue_hires_scalef:n,tissue_lowres_scalef:a}}},{key:"loadTixels",value:function(){var t,r,n,a,i,s=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this.getCoordinates(),c=Object(Me["a"])(o,4),l=c[0],p=c[1],v=(c[2],c[3]),d=2*this.channels-1,f=e.ratio50l(l.x,l.y,v.x,v.y,d),h=e.ratio50l(l.x,l.y,p.x,p.y,d),g=[f[1]-l.y,f[0]-l.x],m=[h[1]-l.y,h[0]-l.x],b=[2*g[0],2*g[1]],_=[2*m[0],2*m[1]],x=[];x.push(l.x),x.push(l.y);var y=[0,0],w=[0,0],k=!1;this.polygons=[];for(var j=0;j<this.channels;j+=1){y.fill(x[0]+m[1],0),y.fill(x[1]+m[0],1),k=!1;for(var O=function(o){!1===k?(w.fill(x[0],0),w.fill(x[1],1),t=[w[0],w[1]],r=[y[0],y[1]],n=[t[0]+g[1],t[1]+g[0]],a=[r[0]+g[1],r[1]+g[0]],k=!0):(w[0]+=b[1],w[1]+=b[0],t=[w[0],w[1]],r=[y[0],y[1]],n=[t[0]+g[1],t[1]+g[0]],a=[r[0]+g[1],r[1]+g[0]]),i=e.center(t,r,a,n);var c=[t[0],t[1]],l=[r[0],r[1]],p=[n[0],n[1]],v=[a[0],a[1]],d=j*s.channels+o,f="0",h=u[j*s.channels+o];if(h){var m=h[1];f=m}var _={sceneFunc:function(e,t){e.beginPath(),e.moveTo(c[0],c[1]),e.lineTo(l[0],l[1]),e.lineTo(v[0],v[1]),e.lineTo(p[0],p[1]),e.closePath(),e.fillStrokeShape(t)},id:d.toString(),fill:"1"===f?"red":null,on_tissue:"1"===f,visible:!0,centerx:i[0],centery:i[1],radius:g[0],opacity:1,stroke:"black",strokeWidth:.5,listening:!0,posit:[o,j],scaleX:1,scaleY:1,raw_fragments:null,log_fragments:null};s.polygons.push(_),y[0]+=b[1],y[1]+=b[0]},R=0;R<this.channels;R+=1)O(R);x[0]+=_[1],x[1]+=_[0]}}},{key:"generatePolygons",value:function(){return this.loadTixels(),this.polygons}}],[{key:"center",value:function(e,t,r,n){var a=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],s=(a[0]+i[0])/2,u=(a[1]+i[1])/2;return[s,u]}},{key:"ratio50l",value:function(e,t,r,n,a){var i=e+1/a*(r-e),s=t+1/a*(n-t);return[i,s]}}]),e}()),Dt=function(){function e(t,r){Object(Te["a"])(this,e),this.scalefactor=r,this.coordinates={},this.initialize(t[0],t[1])}return Object(Ae["a"])(e,[{key:"initialize",value:function(t,r){var n=this,a=e.distance([.25*t,.15*r],[t-.25*t,.15*r]),i=[[.25*t,.15*r],[t-.25*t,a+.15*r]];i.forEach((function(e,t){var r=Object(Me["a"])(e,2),a=r[0],i=r[1],s=t,u={draggable:!0,id:s,x:a,y:i,stroke:"red",radius:10};n.coordinates&&(n.coordinates[s]=u)}))}},{key:"getCoordinates",value:function(){var e=[];return w.a.forIn(this.coordinates,(function(t,r){var n={x:t.x,y:t.y,id:r};e.push(n)})),e}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=this.realCoords(),r=e.map((function(e,r){var n={draggable:!0,id:e.id,x:t[r].x,y:t[r].y,stroke:"red",radius:10};return n}));return r}},{key:"moveToNewCenter",value:function(e,t,r){var n=this,a=this.getCenterAnchor(),i=e.x-a.x,s=e.y-a.y;w.a.forIn(this.coordinates,(function(e,t){n.coordinates[t].x+=i,n.coordinates[t].y+=s}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/2,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/2,stroke:"red",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];w.a.forIn(this.coordinates,(function(r,n){t.push(Math.round(r.x/e.scalefactor)),t.push(Math.round(r.y/e.scalefactor))}));var r=Math.round(t[1]-t[0]),n=Math.round(t[3]-t[2]),a=0;return r>n&&(a=r-n),r<n&&(a=r-n),t[3]+=a,t}},{key:"setCoordinates",value:function(e){var t=this,r=0;w.a.forIn(this.coordinates,(function(n,a){t.coordinates[a]={x:e[r].x*t.scalefactor,y:e[r].y*t.scalefactor},r+=1}))}},{key:"generateRect",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),r=Math.floor(e[1].y-e[0].y),n=0;t>r&&(n=t-r),t<r&&(n=t-r);var a=Object(Me["a"])(e,2),i=a[0],s=a[1];s.y+=n;var u=Math.min(i.x,s.x),o=Math.min(i.y,s.y),c=Math.abs(i.x-s.x),l=Math.abs(i.y-s.y),p={x:u,y:o,width:c,height:l,stroke:"blue",strokeWidth:2};return p}},{key:"realCoords",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),r=Math.floor(e[1].y-e[0].y),n=0;t>r&&(n=t-r),t<r&&(n=t-r);var a=Object(Me["a"])(e,2),i=a[0],s=a[1];return s.y+=n,this.coordinates[1].y+=n,[i,s]}},{key:"setScaleFactor",value:function(e){var t=this.scalefactor;this.scalefactor=e;var r=this.scalefactor/t,n={};w.a.forIn(this.coordinates,(function(e,t){n[t]={x:e.x*r,y:e.y*r}})),this.coordinates=n}}],[{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}]),e}(),Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("AvailableFileList",{attrs:{fileList:e.availableFiles,runID:e.selectedRunID,flipLoading:e.flipBool},on:{"file-selected":e.handleFileSelection}})],1),r("v-col",{attrs:{cols:"12",sm:"8","align-self":"center"}},[r("FileDisplay",{attrs:{fileName:e.file_selected,imageURL:e.selectedImageURL_array,jsonStringContents:e.jsonString_array,jsonContents:e.jsonPackage,csvStringContents:e.csvPretty_array},on:{"file-displayed":e.stopLoading}})],1)],1)},At=[],Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",[r("h1",[e._v(" "+e._s(e.runID)+" ")]),e._l(e.fileList,(function(t){return r("p",{key:t.id},[r("v-btn",{ref:"key",refInFor:!0,staticClass:"ma-2",attrs:{loading:e.loading&&e.indexClicked===t.id},on:{click:function(r){e.buttonLoading(t.id),e.$emit("file-selected",t.file)}}},[e._v(" "+e._s(t.file)+" ")])],1)}))],2)},Bt=[],Lt=Object(s["c"])({name:"AvailableFileList",props:{fileList:{required:!0,type:Array},runID:{required:!0,type:String},flipLoading:{required:!0,type:Boolean}},setup:function(e,t){var r=Object(s["f"])(!1),n=Object(s["f"])(-1);function a(e){n.value=e,r.value=!0}return{loading:r,buttonLoading:a,indexClicked:n}},watch:{flipLoading:function(e){this.loading=!1}}}),zt=Lt,Et=Object(Q["a"])(zt,Ut,Bt,!1,null,null,null),Nt=Et.exports,qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",[e.isImage?r("v-img",{ref:"image",attrs:{src:e.localImageURL,height:e.displayedHeight,width:e.displayedWidth}}):e._e(),e.isImage?r("v-slider",{attrs:{min:40,max:100},model:{value:e.imageSize,callback:function(t){e.imageSize=t},expression:"imageSize"}}):e._e(),e.jsonDisplay?r("pre",[e._v("    "+e._s(e.dispText)+"\n  ")]):e._e()],1)},Jt=[],Wt=Object(s["c"])({name:"FileDisplay",props:{fileName:{type:String,required:!0},imageURL:{type:Array,required:!0},jsonContents:{type:Object,required:!0},jsonStringContents:{type:Array,required:!0},csvStringContents:{type:Array,required:!0},clearFileBoolean:{type:Boolean,required:!1}},setup:function(e,t){var r=Object(s["f"])(!1),n=Object(s["f"])(),a=Object(s["f"])(!1),i=Object(s["f"])(),u=Object(s["f"])(""),o=Object(s["f"])(""),c=Object(s["f"])(80),l=Object(s["f"])(500),p=Object(s["f"])(500),v=Object(s["f"])(0),d=Object(s["f"])(0),f=Object(s["f"])({width:400,height:1e3,x:0,y:100}),h=Object(s["f"])({text:""});function g(e){this.displayedHeight=e*this.naturalHeight/100,this.displayedWidth=e*this.naturalWidth/100}function m(){this.$emit("file-displayed")}function b(e){return new Promise((function(t,r){var n=new Image;n.onload=function(){return t({width:n.width,height:n.height})},n.onerror=function(e){return r(e)},n.src=e}))}function _(){a.value=!1,r.value=!1}return{isImage:r,getImageDimensions:b,currentDisplayedImage:n,jsonDisplay:a,displayedImage:i,localImageURL:u,konvaConfiguration:f,textConfig:h,dispText:o,imageSize:c,naturalHeight:l,naturalWidth:p,displayedHeight:v,displayedWidth:d,modifyImageSize:g,fileDisplayed:m,clearScreen:_}},watch:{imageURL:function(e){var t=this,r=new Image;r.src=e,r.onload=function(){t.naturalHeight=1e3,t.naturalWidth=1e3;var r=Object(Me["a"])(e,1),n=r[0];t.localImageURL=n,t.modifyImageSize(t.imageSize),t.isImage=!0,t.jsonDisplay=!1,t.fileDisplayed()}},jsonStringContents:function(e){var t=Object(Me["a"])(e,1),r=t[0];this.dispText=r,this.textConfig={text:r,fontSize:24},this.isImage=!1,this.jsonDisplay=!0,this.fileDisplayed()},csvStringContents:function(e){var t=Object(Me["a"])(e,1),r=t[0];this.dispText=r,this.textConfig={fontSize:12,text:r},this.isImage=!1,this.jsonDisplay=!0,this.fileDisplayed()},imageSize:function(e){this.modifyImageSize(e)},clearFileBoolean:function(e){this.clearScreen()}}}),Gt=Wt,$t=(r("cd7d"),Object(Q["a"])(Gt,qt,Jt,!1,null,null,null)),Ht=$t.exports,Vt=(new Promise((function(e){Object(s["a"])((function(){return null!==P.state.client}))})),Object(s["c"])({name:"SpatialFolderViewer",props:{selectedRunID:{required:!0,type:String},getFiles:{required:!0,type:Boolean},bucket_name:{required:!0,type:String},root:{required:!0,type:String}},components:{AvailableFileList:Nt,FileDisplay:Ht},setup:function(e,t){var r=Object(s["a"])((function(){return P.state.client})),n=Object(s["f"])([]),a=Object(s["f"])(""),i=Object(s["f"])([]),u=Object(s["f"])([]),o=Object(s["f"])(!1),c=Object(s["f"])(""),l=Object(s["f"])({}),p=Object(s["f"])(""),v=Object(s["f"])([]),d=Object(s["f"])({}),f=Object(s["f"])(""),h=Object(s["f"])([]),g=Object(s["f"])(!1);function b(){return _.apply(this,arguments)}function _(){return _=Object(m["a"])(regeneratorRuntime.mark((function t(){var a,i,s,u,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.value){t.next=3;break}return console.log("no client"),t.abrupt("return");case 3:return a=e.root.concat("/").concat(e.selectedRunID).concat("/"),i={bucket:e.bucket_name,path:a,filter:[""],only_files:!0},t.next=7,r.value.getFileList(i);case 7:for(s=t.sent,u=0;u<s.length;u+=1)s[u]!==a&&(o={id:u,file:s[u]},n.value.push(o));0===n.value.length&&n.value.push({id:0,file:"Run ".concat(e.selectedRunID).concat(" has no spatial folder.")});case 10:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(m["a"])(regeneratorRuntime.mark((function t(n){var s,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,o.value=!0,u={params:{bucket_name:e.bucket_name,filename:n,use_cache:"false"}},t.next=5,null===(s=r.value)||void 0===s?void 0:s.getImageAsJPG(u);case 5:c=t.sent,c&&(a.value=URL.createObjectURL(c),i.value=[a.value]),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),y.apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return k=Object(m["a"])(regeneratorRuntime.mark((function t(n){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={params:{bucket_name:e.bucket_name,filename:n}},t.next=3,null===(a=r.value)||void 0===a?void 0:a.getCsvFile(i);case 3:s=t.sent,f.value=JSON.stringify(s,null,4),h.value=[f.value];case 6:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return O=Object(m["a"])(regeneratorRuntime.mark((function t(n){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={params:{bucket_name:e.bucket_name,filename:n}},t.next=3,null===(a=r.value)||void 0===a?void 0:a.getJsonFile(i);case 3:s=t.sent,l.value=s,p.value=JSON.stringify(s,null,8),v.value=[p.value];case 7:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}function R(e){var t=e.split("."),r=t[t.length-1];"tif"===r.toLowerCase()||"png"===r.toLowerCase()||"jpg"===r.toLowerCase()||"jpeg"===r.toLowerCase()?x(e):"json"===r?j(e):"csv"===r&&w(e)}function C(e){R(e),c.value=e}function S(){g.value=!g.value}return Object(s["d"])((function(){b()})),{getRunFiles:b,availableFiles:n,loadFile:R,loadDisplayImage:x,selectedImageURL:a,selectedImageURL_array:i,availableRuns:u,image_selected:o,handleFileSelection:C,file_selected:c,jsonPackage:l,jsonString:p,jsonString_array:v,loadCSVFile:w,selectedImage:d,csvPretty:f,csvPretty_array:h,stopLoading:S,flipBool:g}}})),Qt=Vt,Xt=Object(Q["a"])(Qt,Tt,At,!1,null,null,null),Kt=Xt.exports,Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" Run ID: "+e._s(e.run_id)+" ")]),r("v-card-text",[r("v-select",{attrs:{outlined:"",dense:"",label:"Barcode File",items:e.barcode_filename_list,disabled:e.metadata_confirmed_bool},model:{value:e.metadata.barcode_filename,callback:function(t){e.$set(e.metadata,"barcode_filename",t)},expression:"metadata.barcode_filename"}}),r("selector",{attrs:{display_label:"Species",display_options:e.drop_down_manager.species_list},on:{"option-added":function(t){return e.updateList("species_list",t)}},model:{value:e.metadata.species,callback:function(t){e.$set(e.metadata,"species",t)},expression:"metadata.species"}}),r("selector",{attrs:{display_label:"Organ",display_options:e.drop_down_manager.organ_list},on:{"option-added":function(t){return e.updateList("organ_list",t)}},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),r("selector",{attrs:{display_label:"Tissue Type",display_options:e.drop_down_manager.tissue_type_list},on:{"option-added":function(t){return e.updateList("tissue_type_list",t)}},model:{value:e.metadata.tissue_type,callback:function(t){e.$set(e.metadata,"tissue_type",t)},expression:"metadata.tissue_type"}}),r("v-select",{attrs:{items:e.drop_down_manager.assay_list,label:"Assay"},model:{value:e.metadata.assay,callback:function(t){e.$set(e.metadata,"assay",t)},expression:"metadata.assay"}}),r("selector",{directives:[{name:"show",rawName:"v-show",value:"CUT&Tag"===e.metadata.assay,expression:"metadata.assay === 'CUT&Tag'"}],attrs:{display_label:"Epitope Name",display_options:e.drop_down_manager.epitope_list},on:{"option-added":function(t){return e.updateList("epitope_list",t)}},model:{value:e.metadata.antibody,callback:function(t){e.$set(e.metadata,"antibody",t)},expression:"metadata.antibody"}}),r("selector",{attrs:{display_label:"Chip Resolution",display_options:e.drop_down_manager.chip_resolution_list},on:{"option-added":function(t){return e.updateList("chip_resolution_list",t)}},model:{value:e.metadata.chip_resolution,callback:function(t){e.$set(e.metadata,"chip_resolution",t)},expression:"metadata.chip_resolution"}})],1),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{disabled:!e.metadata.barcode_filename,outlined:""},on:{click:e.metadata_confirmed}},[e._v(" Confirm ")])],1)],1)},Zt=[],er=Object(s["c"])({name:"MetadataDropdown",components:{Selector:It},props:{metadata:{type:Object,required:!0},run_id:{type:String,required:!0},drop_down_manager:{type:Object,required:!0},updating_existing:{type:Boolean,required:!0},barcode_filename_list:{type:Array,required:!0},metadata_confirmed_bool:{type:Boolean,required:!0}},setup:function(e,t){var r=Object(s["a"])((function(){return e.drop_down_manager}));function n(){t.emit("confirmed")}function a(){t.emit("refresh")}function i(e,t){var n=r.value[e].map((function(e){return e}));n.push(t),r.value[e]=n}return{metadata_confirmed:n,pageRefresh:a,updateList:i}}}),tr=er,rr=Object(Q["a"])(tr,Yt,Zt,!1,null,null,null),nr=rr.exports,ar=new Promise((function(e){var t=Object(s["a"])((function(){return null!==P.state.client}));Object(s["h"])((function(){t.value&&e(!0)}))})),ir=[{text:"ID",value:"id"}],sr=Object(s["c"])({name:"AtlasBrowser",props:["query"],components:{SpatialFolderViewer:Kt,Selector:It,MetadataDropdown:nr,Appbar:jt},setup:function(e,t){var r,n=Object(s["a"])((function(){return Ze.a.atlasxbrowser.bucket_name})),a=Object(s["a"])((function(){return Ze.a.atlasxbrowser.bucket_name_spatial})),i=Object(s["a"])((function(){return Ze.a.atlasxbrowser.root_dir})),u=Object(s["a"])((function(){return Ze.a.atlasxbrowser.root_dir_spatial})),o=Object(s["a"])((function(){return Ze.a.atlasxbrowser.lims_available})),c=Object(s["f"])(!0),l=new Pt,p=t.root.$router,v=Object(s["a"])((function(){return P.state.client})),d=Object(s["f"])([]),f=Object(s["a"])((function(){return t.root.$route})),h=Object(s["f"])([]),g=Object(s["f"])([]),b=Object(s["f"])([]),_=Object(s["f"])(),x=Object(s["f"])(""),y=Object(s["f"])(""),k=Object(s["f"])(""),j=Object(s["f"])([]),O=Object(s["f"])({width_window:window.innerWidth,height_window:window.innerHeight}),R=Object(s["f"])({x:null,y:null,radius:20,fill:null,stroke:"red"}),C=Object(s["f"])(!1),S=Object(s["f"])(!1),M=Object(s["f"])(!1),I=Object(s["f"])(!1),F=Object(s["f"])(20),D=Object(s["f"])(!1),T=Object(s["f"])(new Dt([0,0],.15)),A=Object(s["f"])(new Ft([0,0],.15,null)),U=Object(s["a"])((function(){return 0!==A.value.polygons.length&&A.value.polygons[0].visible})),B=Object(s["f"])(!1),L=Object(s["f"])(!1),z=Object(s["f"])(!1),E=Object(s["f"])(window.innerWidth),N=Object(s["f"])(window.innerHeight),q=Object(s["f"])(null),J=Object(s["f"])(null),W=Object(s["f"])(null),G=Object(s["f"])(.15),$=Object(s["f"])(0),H=Object(s["f"])(0),V=Object(s["f"])(0),Q=Object(s["f"])(0),X=Object(s["f"])([]),K=Object(s["f"])(210),Y=Object(s["f"])(!1),Z=Object(s["f"])(!1),ee=Object(s["f"])(new Map),te=Object(s["f"])(!1),re=Object(s["f"])(!1),ne=Object(s["f"])(),ae=Object(s["f"])(null),ie=Object(s["f"])(null),se=Object(s["f"])({horizontal_flip:!1,vertical_flip:!1,rotation:0}),ue=Object(s["f"])(null),oe=Object(s["f"])(!1),ce=Object(s["f"])(!1),le=Object(s["f"])(!1),pe=Object(s["f"])(!1),ve=Object(s["f"])(!1),de=Object(s["f"])(),fe=Object(s["f"])(""),he=Object(s["f"])(""),ge=Object(s["f"])([]),be=Object(s["f"])({}),_e=Object(s["f"])(!1),xe=Object(s["f"])(!1),ye=Object(s["f"])(!1),we=Object(s["f"])(!1),ke=Object(s["f"])(!1),je=Object(s["f"])(0),Oe=Object(s["f"])(0),Re=Object(s["f"])(!1),Ce=Object(s["f"])(!1),Se=Object(s["f"])(!1),Ie=(Object(s["f"])(!1),Object(s["f"])(!1)),Pe=Object(s["f"])(),Fe=Object(s["f"])(7),Te=Object(s["f"])(7),Ae=Object(s["f"])(!0),Ue=Object(s["f"])(!1),Be=Object(s["f"])(!1),Le=Object(s["f"])("90"),Ee=Object(s["f"])({fiducial_diameter_fullres:null,spot_diameter_fullres:null,tissue_hires_scalef:null,tissue_lowres_scalef:null}),Je=Object(s["f"])(!1),We=Object(s["f"])(),$e=Object(s["f"])(null),Ve=Object(s["f"])([]),Xe=Object(s["f"])(),Ye=Object(s["f"])(),et=Object(s["f"])([]),rt=Object(s["f"])([]),nt=Object(s["f"])([]),ut=Object(s["a"])((function(){return Ze.a.atlasxbrowser.barcode_mapping})),ot=Object(s["f"])(""),ct=Object(s["f"])(!1),lt=Object(s["f"])(!1),pt=0,gt=Object(s["f"])({points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""});function mt(){window.location.reload()}var bt=Object(s["f"])([{text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,disabled:te.value,click:function(){Se.value=!Se.value}},{text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:te.value,click:function(){Ie.value=!Ie.value,x.value||(console.log("error message"),me.dispatch({text:"Must select a Run ID",options:{right:!0,color:"error"}}))}},{text:"Restart",icon:!1,tooltip:"Restart Whole Process",enabled:!0,disabled:te.value||c.value,click:function(){mt()}}]);function _t(){gt.value={points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:"bc96v2-24.txt",chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""}}function xt(){A.value=new Ft([0,0],G.value,null),T.value=new Dt([0,0],G.value),A.value.setScaleFactor(G.value),T.value.setScaleFactor(G.value),L.value=!1,Je.value=!1,B.value=!1,S.value=!1,I.value=!1,Y.value=!1,Z.value=!1,C.value=!1,M.value=!1,oe.value=!1,ce.value=!1,ve.value=!1,Se.value=!1,te.value=!1,Pe.value=null,Re.value=!1,se.value={horizontal_flip:!1,vertical_flip:!1,rotation:0},y.value="",k.value="",Ce.value=!1,we.value=!1,ke.value=!1,ge.value=[],he.value="",ct.value=!1,ot.value="",pt=0}function yt(e){}function wt(e){var t=it(f,e),r=p.resolve(t).href!==f.value.fullPath;r&&p.push(t)}var kt=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.value.getTaskStatus(t);case 4:ne.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function jt(e){var t=G.value;q.value.scale={x:t,y:t},O.value.width=t*q.value.image.width,O.value.height=t*q.value.image.height,E.value=O.value.width,N.value=O.value.height,A.value.setScaleFactor(t),T.value.setScaleFactor(t)}function Ot(e){var t=ut.value[e];t&&(gt.value.barcode_filename=t)}function Rt(){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}function St(){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,s,o,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return",!1);case 2:return Se.value=!1,te.value=!0,re.value=!1,t="".concat(u.value,"/").concat(x.value,"/spatial/metadata.json"),r="".concat(u.value,"/").concat(x.value,"/spatial/scalefactors_json.json"),n="".concat(u.value,"/").concat(x.value,"/spatial/tissue_positions_list.csv"),i={params:{filename:t,bucket_name:a.value,no_aws_yes_server:!1}},e.next=11,v.value.getJsonFile(i);case 11:return s=e.sent,o={params:{filename:n,bucket_name:a.value,no_aws_yes_server:!1}},e.next=15,v.value.getCsvFile(o);case 15:return c=e.sent,l={params:{filename:r,bucket_name:a.value,no_aws_yes_server:!1}},e.next=19,v.value.getJsonFile(l);case 19:if(p=e.sent,!(s&&c&&p)){e.next=29;break}return Ee.value=p,de.value=c,te.value=!1,gt.value=s,s.barcodes&&Ot(s.barcodes),ot.value=gt.value.barcode_filename,me.dispatch({text:"Metadata loaded from existing spatial directory",options:{color:"success",right:!0}}),e.abrupt("return",!0);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e)}))),Mt.apply(this,arguments)}function It(e){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Ze.a.atlasxbrowser.barcode_files_path.concat("/".concat(t)),i={params:{filename:a,bucket_name:n.value}},e.next=4,null===(r=v.value)||void 0===r?void 0:r.getCsvFile(i);case 4:return s=e.sent,u=[],s.forEach((function(e){u.push(e[0])})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}function At(e){var t=Math.floor(Math.sqrt(e.length));return t*t!==e.length?-1:t}function Ut(e){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return e.next=4,It(t);case 4:return r=e.sent,n=At(r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function Lt(){return zt.apply(this,arguments)}function zt(){return zt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(gt.value.barcode_filename){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,It(gt.value.barcode_filename);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:if(r=At(t),-1!==r){e.next=10;break}return e.abrupt("return",!1);case 10:return ue.value=r,A.value.channels=ue.value,nt.value=t,e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)}))),zt.apply(this,arguments)}function Et(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oe.value=!0,ce.value=!0;var t=st(gt.value.points,2),r=t.map((function(e){return{x:e[0],y:e[1]}}));A.value.setCoordinates(r),se.value=gt.value.orientation,e&&A.value.loadTixels(de.value)}function Nt(){oe.value=!0,A.value.show_tixels()}function qt(){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ie.value=!1,t=!0,te.value||(te.value=!0,t=!1),ct.value){e.next=25;break}return e.next=6,Lt();case 6:if(r=e.sent,r){e.next=13;break}Ie.value=!0,ct.value=!1,me.dispatch({text:"Invalid barcode file.",options:{color:"error"}}),e.next=25;break;case 13:if(n=!0,a=!0,!Re.value){e.next=24;break}if(gt.value.barcode_filename===ot.value){e.next=21;break}return e.next=19,Ut(ot.value);case 19:i=e.sent,i!==ue.value&&(n=!1,a=!1);case 21:Et(a),C.value=n,n||Nt();case 24:ct.value=!0;case 25:t||(te.value=!1);case 26:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Wt(e){if(!v.value)return null;var t=v.value.getImageAsJPG(e);return t}function Gt(e){if(!v.value)return null;try{var t=T.value.getCoordinatesOnImage();Re.value&&(t=gt.value.crop_area);var r=t[0],a=t[1],i=t[2],s=t[3],u={params:{bucket_name:n.value,filename:e,rotation:se.value.rotation,x1:r,x2:i,y1:a,y2:s}},o=v.value.getGrayImageAsCroppedJPG(u);return o}catch(c){return te.value=!1,null}}function $t(e){var t=new window.Image;t.src=URL.createObjectURL(e);var r=.1;return t&&(t.onload=function(e){q.value={x:0,y:0,draggable:!1,scale:{x:r,y:r},image:t,src:null,original_src:null},jt("")}),t}function Ht(){return Vt.apply(this,arguments)}function Vt(){return Vt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,s,o,l,p,f,h,g,m,b,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:return c.value=!1,Ce.value=!0,te.value=!0,re.value=!1,s=!1,o=n.value,k.value.length>0&&(lt.value=!0),Re.value?(t="".concat(u.value,"/").concat(x.value,"/spatial/figure/postB_BSA.tif"),Ae.value=!0,Be.value=!1,Ue.value=!1,s=!0,o=a.value,r="".concat(u.value,"/").concat(x.value,"/spatial/figure/postB.tif"),l={params:{rotation:0,filename:r,use_cache:!0,bucket_name:a.value}},p=Wt(l),p&&(J.value=p)):t=y.value,f={path:"".concat(i.value,"/").concat(x.value,"/"),filter:[""],bucket:n.value,only_files:!0},e.prev=11,h={params:{bucket_name:o,filename:t,rotation:se.value.rotation,use_cache:s}},e.next=15,v.value.getImageAsJPG(h);case 15:return g=e.sent,Pe.value=g,m=$t(g),e.next=20,v.value.getFileList(f);case 20:d.value=e.sent,Xe.value=m.src,lt.value&&(b={params:{rotation:0,filename:k.value,use_cache:!0,bucket_name:a.value}},_=Wt(b),_&&(J.value=_)),te.value=!1,Se.value=!1,e.next=32;break;case 27:e.prev=27,e.t0=e["catch"](11),console.log(e.t0),te.value=!1,me.dispatch({text:"Failed to load the image file",options:{color:"error",right:!0}});case 32:case"end":return e.stop()}}),e,null,[[11,27]])}))),Vt.apply(this,arguments)}function Qt(){ke.value?A.value.fill_color_counts(be.value):A.value.remove_color_counts()}function Xt(e,t){var r=e.width,n=e.height,a=Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),i=Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t));return{width:a,height:i}}function Kt(e,t,r,n,a,i,s,u){var o,c;return r<n?(o=Math.min(a,u),c=0):r<Math.PI/2?(o=Math.max(a,u),c=0):r<Math.PI/2+n?(o=e,c=Math.min(s,i)):r<Math.PI?(o=e,c=Math.max(s,i)):r<Math.PI+n?(o=Math.max(a,u),c=t):r<Math.PI/2*3?(o=Math.min(a,u),c=t):r<Math.PI/2*3+n?(o=0,c=Math.max(s,i)):r<2*Math.PI&&(o=0,c=Math.min(s,i)),[o,c]}function Yt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:te.value=!0,1===t?(n=90,se.value.rotation+=270,pt+=n):(a="90"===Le.value?3*parseInt(Le.value,10):315,pt+=a,se.value.rotation+="90"===Le.value?parseInt(Le.value,10):45),i=new window.Image,i.src=URL.createObjectURL(Pe.value),s=document.createElement("canvas"),u=s.getContext("2d"),i.onload=function(e){URL.revokeObjectURL(i.src);var t=Math.atan(i.width/i.height),n=pt%360*Math.PI/180,a=Xt({width:i.width,height:i.height},n),o=a.width,c=a.height;s.width=o,s.height=c;var l=i.height*Math.abs(Math.sin(n)),p=i.height*Math.abs(Math.cos(n)),v=i.width*Math.abs(Math.cos(n)),d=i.width*Math.abs(Math.sin(n)),f=Kt(o,c,n,t,l,d,p,v);u.translate(f[0],f[1]),u.rotate(n),u.drawImage(i,0,0),s.toBlob((function(e){$t(e);r=e}))},te.value=!1;case 8:case"end":return e.stop()}}),e)}))),Zt.apply(this,arguments)}function er(e){for(var t=e,r=[],n=new RegExp("".concat(t,"[a-zA-z]*[0-9]*")),a=0;a<h.value.length;a+=1)n.test(h.value[a].id)&&r.push(h.value[a]);g.value=r}function tr(){return rr.apply(this,arguments)}function rr(){return rr=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:return t=Ze.a.atlasxbrowser.barcode_files_path.concat("/"),r={path:t,bucket:n.value,filter:".txt",only_files:!0,delimiter:"/"},e.next=6,v.value.getFileList(r);case 6:a=e.sent,a.forEach((function(e){var t=e.lastIndexOf("/");if(t<e.length-1){var r=e.substring(t+1,e.length);rt.value.push(r)}}));case 8:case"end":return e.stop()}}),e)}))),rr.apply(this,arguments)}function nr(e,t){e.sort((function(e,t){var r=e[7],n=t[7];return r>n?1:r<n?-1:0}));for(var r=Math.sqrt(e.length),n=0;n<e.length;n+=1){var a=Math.floor(n/e.length*100),i=Number.parseInt(e[n][2],10),s=Number.parseInt(e[n][3],10),u=i*r+s;be.value[u]=t[a]}var o=e[Math.round(.05*e.length)][7],c=e[Math.round(.95*e.length)][7];je.value=Math.round(100*o)/100,Oe.value=Math.round(100*c)/100}function sr(){return ur.apply(this,arguments)}function ur(){return ur=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,s,u,o,c,l,p,d,f,h,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=g.length>0&&void 0!==g[0]?g[0]:he.value,n=g.length>1&&void 0!==g[1]?g[1]:a.value,i={params:{bucket_name:n,filename:r}},e.next=5,null===(t=v.value)||void 0===t?void 0:t.getCsvFile(i);case 5:if(s=e.sent,"Not-Found"!==s&&8===s[0].length){e.next=10;break}return me.dispatch({text:"Error! Incompatible File!",options:{color:"red"}}),he.value="",e.abrupt("return");case 10:s.sort((function(e,t){var r=Number.parseInt(e[2],10),n=Number.parseInt(e[3],10),a=Number.parseInt(t[2],10),i=Number.parseInt(t[3],10);return r>a?1:r<a?-1:n>i?1:-1})),de.value=s,u=JSON.parse(JSON.stringify(s)),o=tt()({colormap:"jet",nshades:100,format:"hex"}),nr(u,o),c=o[0],l=Math.round(100*u[0][7])/100,p=o[49],d=Math.round(100*u[Math.round(.5*s.length)][7])/100,f=o[99],h=Math.round(100*u[u.length-1][7])/100,fe.value="linear-gradient(to right, ".concat(c,", ").concat(p,", ").concat(f,")"),et.value=[l,d,h],me.dispatch({text:"Successfully Loaded Tissue Position Counts",options:{color:"green",position:"center"}}),we.value=!0;case 25:case"end":return e.stop()}}),e)}))),ur.apply(this,arguments)}function or(e){var t=G.value;null!==q.value?(q.value.scale={x:t,y:t},O.value.width=t*q.value.image.width,O.value.height=t*q.value.image.height,E.value=O.value.width,N.value=O.value.height):(O.value.width=E.value,O.value.height=N.value)}function cr(e){e.target.attrs.id}function lr(e){e.target.attrs.id,e.target._lastPos}function pr(e){var t=e.target.attrs.id,r=e.target._lastPos;r.x>5&&r.y>5&&r.x<q.value.image.width&&r.y<q.value.image.height?(T.value.coordinates[t].x=r.x,T.value.coordinates[t].y=r.y):(T.value.coordinates[t].x=Math.min(Math.max(0,r.x),E.value),T.value.coordinates[t].y=Math.min(Math.max(0,r.y),N.value))}function vr(e){T.value.moveToNewCenter(e.target._lastPos,E.value,N.value)}function dr(e){e.target.attrs.id;A.value.polygons=[]}function fr(e){var t=e.target.attrs.id,r=e.target._lastPos;r.x>5&&r.y>5&&r.x<E.value&&r.y<N.value?(A.value.coordinates[t].x=r.x,A.value.coordinates[t].y=r.y):(A.value.coordinates[t].x=Math.min(Math.max(0,r.x),E.value),A.value.coordinates[t].y=Math.min(Math.max(0,r.y),N.value))}function hr(e){A.value.polygons=[]}function gr(e){A.value.moveToNewCenter(e.target._lastPos)}function mr(){var e={};ke.value?e.opacity=I.value?.5:1:e.fill=I.value?null:"red",e.on_tissue=!I.value,A.value.setPolygonsInCircle(R.value.x,R.value.y,R.value.radius,e)}function br(e){if(0!==A.value.polygons.length){if(S.value)return z.value=!0,void mr();var t=e.target.attrs.id,r=w.a.findIndex(A.value.polygons,{id:t}),n={},a=A.value.polygons[r].on_tissue;n.on_tissue=!a,ke.value?n.opacity=a?.5:1:n.fill=a?null:"red",A.value.setPolygonState(r,n),z.value=!0}}function _r(e){z.value=!1}function xr(e){if(S.value||I.value){var r=t.refs.konvaStage.getNode().getPointerPosition(),n=r.x,a=r.y;R.value.x=n,R.value.y=a,D.value&&mr()}}function yr(e){D.value=!0,mr()}function wr(e){D.value=!1}function kr(e){S.value=e}function jr(){A.value.toggle_tixel_visibility()}function Or(e){return Rr.apply(this,arguments)}function Rr(){return Rr=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ae.value=!1,Be.value=!1,Ue.value=!1,r=null,"postB"!==t){e.next=12;break}if(W.value||!Re.value||null==J.value){e.next=8;break}return e.next=8,J.value.then((function(e){W.value=URL.createObjectURL(e)}));case 8:r=W.value,Be.value=!0,e.next=13;break;case 12:"BSA"===t?(r=Xe.value,Ae.value=!0):"BW"===t&&(r=We.value,Ue.value=!0);case 13:q.value.image.src=r;case 14:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Cr(){M.value=!0,r&&(Pe.value=r)}function Sr(){var e=T.value.getCoordinatesOnImage(),t=q.value.image,r=t.width,n=t.height,a=Object(Me["a"])(e,4),i=a[0],s=a[1],u=a[2],o=a[3];if(i<0||s<0||u>r||o>n)me.dispatch({text:"Keeping Cropping on Image",options:{color:"warning",right:!0}});else{var c=Gt(y.value);c&&(J.value=c),le.value=!0,ce.value=!0,M.value=!0,L.value=!0;var l=new window.Image;new window.Image;l.src=URL.createObjectURL(Pe.value);var p=document.createElement("canvas"),v=p.getContext("2d");l.onload=function(t){URL.revokeObjectURL(l.src),p.width=e[2]-e[0],p.height=e[3]-e[1],v.drawImage(l,e[0],e[1],e[2]-e[0],e[3]-e[1],0,0,e[2]-e[0],e[3]-e[1]),p.toBlob((function(e){var t=$t(e);Xe.value=t.src,le.value=!1}))},A.value=new Ft([(e[2]-e[0])*G.value,(e[3]-e[1])*G.value],G.value,ue.value)}}function Mr(){oe.value=!0,L.value=!1,B.value=!0}function Ir(e){pe.value=!0,Y.value=!0;var t=G.value;Ge()(e,function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r,n){var a,i,s,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=new window.Image,i=Number(Fe.value),s=Number(Te.value),u=Ke()(n,{compensation:i,size:s}),X.value=u,o=Qe()(),He()(u,"jpeg").pipe(o).on("finish",(function(){var e=o.toBlobURL("image/jpeg");a.src=e,We.value=e,a.onload=function(e){q.value={x:0,y:0,draggable:!1,scale:{x:G.value,y:G.value},image:a,src:null,original_src:null,alternative_src:null},jt(t)},Z.value=!0,te.value=!1,pe.value=!1,Or("BW")}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}function Pr(){q.value&&J.value&&(te.value=!0,J.value.then((function(e){var t=URL.createObjectURL(e);W.value=t,Ir(W.value)})))}var Fr=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:$.value=t;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Dr(){return Tr.apply(this,arguments)}function Tr(){return Tr=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Je.value=!0;case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Ar(){return Ur.apply(this,arguments)}function Ur(){return Ur=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,s,o,c,l,p,f,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:if(gt.value.barcode_filename){e.next=5;break}return me.dispatch({text:"Must Select Barcode File Before Generating Spatial Folder",options:{color:"warning",right:!0}}),e.abrupt("return");case 5:return e.prev=5,$.value=0,H.value=0,V.value=0,re.value=!0,ae.value=null,te.value=!0,t="atlasbrowser.generate_spatial",r="atxcloud_atlasbrowser",s=A.value.getCoordinatesOnImage(),o=T.value.getCoordinatesOnImage(),Re.value&&(o=gt.value.crop_area),c=[],s.forEach((function(e,t){c.push(e.x),c.push(e.y)})),gt.value=Object.assign(gt.value,{points:c,run:x.value,blockSize:Te.value,threshold:K.value,cValue:Fe.value,numChannels:ue.value,orientation:se.value,crop_area:o,onTissueTixels:A.value.getOnTissue()}),l={run_id:x.value,files:d.value,crop_area:o,mask:A.value.getMask(o),metadata:gt.value,scalefactors:A.value.getQCScaleFactors(q.value,o),orientation:se.value,barcode_filename:gt.value.barcode_filename,barcode_list:nt.value,bucket_name_bsa:n.value,bucket_name_spatial:a.value,root_dir_spatial:u.value,root_dir_bsa:i.value,bsa_filename:y.value,updating_existing:Re.value},p=[l],f={},e.next=25,v.value.postTask(t,p,f,r);case 25:return h=e.sent,e.next=28,kt(h._id);case 28:if("SUCCESS"===ne.value.status||"FAILURE"===ne.value.status){e.next=40;break}if("PROGRESS"!==ne.value.status){e.next=33;break}return e.next=32,Fr(ne.value.progress);case 32:ae.value="".concat(ne.value.progress,"% - ").concat(ne.value.position);case 33:return e.next=35,new Promise((function(e){ie.value=window.setTimeout(e,1e3)}));case 35:return ie.value=null,e.next=38,kt(h._id);case 38:e.next=28;break;case 40:if("SUCCESS"===ne.value.status){e.next=46;break}return console.log("failed"),me.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}),te.value=!1,re.value=!1,e.abrupt("return");case 46:return me.dispatch({text:"Spatial Folder Successfully Uploaded",options:{right:!0,color:"success"}}),e.next=49,Fr(ne.value.progress);case 49:ae.value=ne.value.status,te.value=!1,re.value=!1,$.value=0,H.value=0,V.value=0,ve.value=!0,e.next=68;break;case 58:e.prev=58,e.t0=e["catch"](5),console.log(e.t0),te.value=!1,re.value=!1,$.value=0,H.value=0,V.value=0,ve.value=!1,me.dispatch({text:"Error generating spatial folder",options:{right:!0,color:"error"}});case 68:case"end":return e.stop()}}),e,null,[[5,58]])}))),Ur.apply(this,arguments)}function Br(){v.value?C.value?Ar():me.dispatch({text:"Must complete image processing before genereating spatial folder",options:{right:!0,color:"error"}}):me.dispatch({text:"Client is not initialized",options:{right:!0,color:"error"}})}function Lr(){return zr.apply(this,arguments)}function zr(){return zr=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _e.value=!1,Re.value=!0,e.next=4,Ht();case 4:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function Er(e){oe.value=!0,0===A.value.polygons.length&&A.value.generatePolygons(),A.value.autoMask(X.value,K.value),C.value=!0}function Nr(){return qr.apply(this,arguments)}function qr(){return qr=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value){e.next=2;break}return e.abrupt("return");case 2:return h.value=[],g.value=[],_.value="",te.value=!0,t={bucket_name:n.value,prefix:"".concat(i.value,"/"),delimiter:"/"},e.next=9,v.value.getSubFolders(t);case 9:r=e.sent,r&&(a=r.map((function(e){return{id:e}})),h.value=a),g.value=h.value,te.value=!1;case 13:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Jr(e){return Wr.apply(this,arguments)}function Wr(){return Wr=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.value=!1,x.value=t.id,wt({component:"AtlasBrowser",run_id:x.value});case 3:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}function Gr(e){return $r.apply(this,arguments)}function $r(){return $r=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket:a.value,path:"".concat(u.value,"/").concat(t,"/"),filter:[".csv"]},e.next=3,null===(r=v.value)||void 0===r?void 0:r.getFileList(n);case 3:i=e.sent,ge.value=i;case 5:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Hr(e){return Vr.apply(this,arguments)}function Vr(){return Vr=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={bucket:n.value,path:"".concat(i.value,"/").concat(t,"/"),delimiter:"/",filter:[".tif",".tiff",".png",".jpg","jpeg"]},e.next=3,null===(r=v.value)||void 0===r?void 0:r.getFileList(a);case 3:j.value=e.sent,1===j.value.length?(s=Object(Me["a"])(j.value,1),y.value=s[0],Ie.value=!0,Ht()):0===j.value.length&&me.dispatch({text:"No images found in folder",options:{right:!0,color:"error"}});case 5:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function Qr(e){return Xr.apply(this,arguments)}function Xr(){return Xr=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _t(),e.next=3,Rt();case 3:Hr(t),_e.value=!1;case 5:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Kr(e){return Yr.apply(this,arguments)}function Yr(){return Yr=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(ar){e.next=2;break}return e.abrupt("return");case 2:return x.value=t.id,xt(),e.next=6,St();case 6:_e.value=e.sent,_e.value?Ie.value=!0:Hr(t.id);case 8:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}return Object(s["g"])(F,(function(e){R.value.radius=e})),Object(s["g"])(I,(function(e){e&&(S.value=!1)})),Object(s["g"])(S,(function(e){e&&(I.value=!1)})),Object(s["g"])(q,(function(e){q.value&&!M.value&&(T.value=new Dt([G.value*q.value.image.width,G.value*q.value.image.height],G.value),jt(G.value))})),Object(s["g"])(Fe,(function(e,t){e!==t&&(Z.value=!1)})),Object(s["g"])(Te,(function(e,t){e!==t&&(Z.value=!1)})),Object(s["d"])(Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=De,e.next=3,qe(t,"admin","Hello123!");case 3:if(r=e.sent,!Ne(r)){e.next=13;break}return n=dt(),n&&ft(),vt({token:r.authorizationToken,url:r.serverURL}),e.t0=P.commit,e.next=11,ze.Create(t,r.authorizationToken);case 11:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1);case 13:return P.commit.setComponent({component:"AtlasXBrowser"}),e.next=16,ar;case 16:return console.log(v),window.addEventListener("resize",or),e.next=20,Nr();case 20:tr();case 21:case"end":return e.stop()}}),e)})))),Object(s["e"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:P.commit.setSubmenu(null),window.removeEventListener("resize",or);case 2:case"end":return e.stop()}}),e)})))),{allFiles:d,run_id:x,full_bsa_filename:y,full_postb_filename:k,metadata:gt,run_id_folder_names:h,run_id_folder_namesHolder:g,searchInput:b,headers:ir,selectAction:Jr,search:_,konvaConfig:O,brushConfig:R,handleDragStart_Crop:cr,handleDragEnd_Crop:lr,handleDragMove_Crop:pr,handleDragCenterMove_Crop:vr,handleDragStart:dr,handleDragMove:fr,handleDragCenterStart:hr,handleDragCenterMove:gr,handleMouseDown:br,handleMouseMoveStage:xr,handleMouseDownBrush:yr,handleMouseUpBrush:wr,handleMouseUp:_r,crop:T,roi:A,objectToArray:at,show_grid:Nt,current_image:q,load_and_begin_image_processing:Ht,searchRuns:er,stageWidth:E,initialize:xt,generateSpatial:Ar,isCropMode:M,isBrushMode:S,setBrushMode:kr,isEraseMode:I,brushSize:F,scaleFactor:G,onChangeScale:jt,atpixels:X,autoFill:Er,threshold:K,loading:te,loadingMessage:re,cropLoading:le,threshLoading:pe,orientation:se,drop_down_manager:l,onCropButton:Sr,one:$,two:H,three:V,four:Q,channels:ue,spatial:ve,scaleFactor_json:Ee,grid:oe,cropFlag:ce,tissue_position_list_obj:de,prompt_to_use_existing_spatial:_e,uploadingTixels:Et,updating_existing:Re,image_processing_begun:Ce,run_id_search_active:Se,show_metadata:Ie,bsa_blob:Pe,getMeta:Rt,resolveAuthGroup:ht,welcome_screen:c,company_image:$e,thresh_clicked:Pr,c_val:Fe,neighbor_size:Te,active_roi_available:L,roi_active:B,finding_roi:Mr,thresh_image_created:Y,bw_image:We,linear_gradient_description_string:fe,thresh_same:Z,tixels_filled:C,bsa_image_displayed:Ae,change_image:Or,handle_spatial_call:Br,rotate_bsa_image:Yt,saved_grid_state:ee,hide_grid:jr,degreeRotation:Le,checkSpatial:Je,showSpatialFolder:Dr,availableFiles:Ve,imageClick:yt,root:i,bucket_name:n,bsa_image:Xe,black_white:Ye,loadGrayCropped:Gt,postB_image_promise:J,postB_image:W,bw_image_displayed:Ue,postB_image_displayed:Be,run_folder_selected:Kr,get_image_options:Hr,file_options:j,lims_available:o,selecting_counts_pos_file:ye,color_gradient_scale_numbers:et,tixel_color_mapping:be,prompt_to_select_counts_positions:xe,get_count_file_options:Gr,count_file_options:ge,tissue_positions_counts_filename:he,load_counts_positions:sr,position_counts_present:we,show_counts_tixels:ke,toggle_tixel_counts_disp:Qt,grid_visible:U,lower_bound_count:je,upper_bound_count:Oe,metadata_confirmed:qt,bucket_name_spatial:a,root_spatial:u,barcode_filename_options:rt,update_run_function:Lr,retrieve_barcode_file:Lt,barcodes_in_list:nt,reprocess_image:Qr,metadata_confirmed_bool:ct,original_barcode_filename:ot,pageRefresh:mt,activateCrop:Cr,submenu:bt}}}),ur=sr,or=(r("37af"),Object(Q["a"])(ur,Ce,Se,!1,null,"97d217f0",null)),cr=or.exports;n["default"].use(Re["a"]);var lr=[{path:"/",name:"AtlasBrowser",component:cr}],pr=new Re["a"]({routes:lr,mode:"history"}),vr=pr,dr=r("ce5b"),fr=r.n(dr);r("bf40");n["default"].use(fr.a);var hr=new fr.a;n["default"].use(i.a),n["default"].config.productionTip=!1,new n["default"]({router:vr,store:P.original,vuetify:hr,provide:{vuetify:hr},render:function(e){return e(Oe)}}).$mount("#app")},cd7d:function(e,t,r){"use strict";r("4d14")},db49:function(e,t){var r={atlasxbrowser:{root_dir:"Images",root_dir_spatial:"Images_spatial",barcode_files_path:"BarcodeFiles",bucket_name:"atx-illumina",bucket_name_spatial:"atx-illumina",lims_available:!0,barcode_mapping:{1:"bc50v1-24.txt",2:"bc50v2-24.txt",3:"bc50v3-24.txt",4:"bc50v4-24.txt",5:"bc96v2-24.txt","1 (normal)":"bc50v1-24.txt","2 (reverseB)":"bc50v2-24.txt","3 (reverseA)":"bc50v3-24.txt","4 (reverseAB)":"bc50v4-24.txt","5 (96)":"bc96v2-24.txt"}}};e.exports=r},db89:function(e,t,r){},f5dd:function(e,t,r){"use strict";r("db89")}});
//# sourceMappingURL=app.9a64efb4.js.map