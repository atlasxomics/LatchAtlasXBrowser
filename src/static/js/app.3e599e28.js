(function(e){function t(t){for(var n,u,o=t[0],l=t[1],s=t[2],p=0,v=[];p<o.length;p++)u=o[p],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&v.push(r[u][0]),r[u]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(v.length)v.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},r={app:0},i=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=l;i.push(["cd49","chunk-vendors"]),a()})({0:function(e,t){},"034f":function(e,t,a){"use strict";a("85ec")},"0b8b":function(e,t,a){},1:function(e,t){},2:function(e,t){},2357:function(e,t,a){"use strict";a("0b8b")},"2abc":function(e,t,a){},"2d0c":function(e,t,a){},"4a16":function(e,t,a){"use strict";a("2abc")},"4be2":function(e,t,a){},"507d":function(e,t,a){"use strict";a("5a45")},"5a45":function(e,t,a){},"5d33":function(e,t,a){"use strict";a("c765")},"6bca":function(e,t,a){"use strict";a("4be2")},8535:function(e,t,a){},"85ec":function(e,t,a){},"8e81":function(e,t,a){},"8fce":function(e,t,a){"use strict";a("2d0c")},a173:function(e,t,a){"use strict";a("8e81")},b98a:function(e,t,a){},c765:function(e,t,a){},c9d8:function(e,t){},cd49:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadDatasetMenu",(function(){return Tt})),a.d(n,"waferInformationMenu",(function(){return Et})),a.d(n,"chipInformationMenu",(function(){return Pt})),a.d(n,"dbitInformationMenu",(function(){return Bt})),a.d(n,"uploadDatasetFileMenu",(function(){return Ut})),a.d(n,"files",(function(){return Nt})),a.d(n,"uploadDialogWidth",(function(){return zt})),a.d(n,"uploadQcDirectoryMenu",(function(){return Gt})),a.d(n,"filesInDirectory",(function(){return Lt})),a.d(n,"uploadDirectoryDialogWidth",(function(){return Vt})),a.d(n,"manageDatasetFilesMenu",(function(){return $t}));var r={};a.r(r),a.d(r,"findDbitRuns",(function(){return Ga}));var i={};a.r(i),a.d(i,"helpDialog",(function(){return Qa})),a.d(i,"aboutDialog",(function(){return Ya}));var u={};a.r(u),a.d(u,"registerNewUserMenu",(function(){return yn})),a.d(u,"resetUserPasswordMenu",(function(){return wn})),a.d(u,"changeUserLevelMenu",(function(){return kn}));var o={};a.r(o),a.d(o,"isAdmin",(function(){return $n})),a.d(o,"user",(function(){return u}));var l={};a.r(l),a.d(l,"loadDatasetMenu",(function(){return Hn})),a.d(l,"waferInformationMenu",(function(){return Jn})),a.d(l,"chipInformationMenu",(function(){return Xn})),a.d(l,"dbitInformationMenu",(function(){return Qn}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),c=a("7591"),p=a.n(c),v=(a("e792"),a("d5e8"),a("5363"),a("a6f4"));s["default"].use(v["b"]);var d=a("8a60"),f=a.n(d),g=f.a.prototype.stopCallback;function h(){f.a.paused=!1,f.a.pause=function(){f.a.paused=!0},f.a.unpause=function(){f.a.paused=!1},f.a.prototype.stopCallback=function(e,t,a){return!!f.a.paused||g(e,t,a)}}h();var m=a("4eb5"),b=a.n(m);s["default"].use(b.a);var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view"),a("global-snackbar"),a("prompt"),a("upload-progress-display")],1)},_=[],y=a("2f62"),w=a("1898"),k=a("1da1"),O=a("5530"),j=(a("96cf"),a("4de4"),a("d3b7"),a("159b"),a("d81d"),a("3ca3"),a("ddb0"),a("ac1f"),a("1276"),a("99af"),a("bc3a")),R=a.n(j),C=a("2ef0"),M=a.n(C),S=function(e){return E(e,F)},A=function(e){return P(e,F)},F=Object(w["b"])({namespaced:!0,state:{inProgress:!1,dialogOpen:!1,uploads:[]},getters:{totalProgress:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=A(t),r=n.state,i=r.uploads.filter((function(e){return!e.cancelled}));return Math.round(i.reduce((function(e,t){return e+t.progress}),0)/i.length)},allSuccessful:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=A(t),r=n.state;return r.uploads.filter((function(e){return!e.error&&!e.cancelled})).length===r.uploads.length}},mutations:{setInProgress:function(e,t){e.inProgress=t},setDialogOpen:function(e,t){e.dialogOpen=t},setUploads:function(e,t){e.uploads=t},setUploadAtIndex:function(e,t){var a=t.upload,n=t.index;s["default"].set(e.uploads,n,a)}},actions:{cancelUpload:function(e,t){var a=S(e),n=a.state,r=a.commit,i=n.uploads[t];i.cancelToken.cancel();var u=Object(O["a"])(Object(O["a"])({},i),{},{cancelled:!0});r.setUploadAtIndex({index:t,upload:u})},cancelAllUploads:function(e){var t=S(e),a=t.state,n=t.dispatch;a.uploads.forEach((function(e,t){n.cancelUpload(t)}))},uploadDatasetFiles:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,o,l,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=S(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),l=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){o(e,t)}})})),i.setUploads(l),s=l.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,o=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},o),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(s);case 10:i.setInProgress(!1);case 11:case"end":return a.stop()}}),a)})))()},uploadMetadataFile:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,o,l,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=S(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),l=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){o(e,t)}})})),i.setUploads(l),s=l.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadMetadataFile(t);case 2:n=e.sent,o=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},o),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(s);case 10:i.setInProgress(!1);case 11:case"end":return a.stop()}}),a)})))()},uploadQcDatasetFiles:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,o,l,s,c,p,v;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=S(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),l=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){o(e,t)}})})),i.setUploads(l),s=l.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,o=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},o),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(s);case 10:return c=t[0].output_filename.split("/")[0],p=C["uniq"](t.map((function(e){return e.output_filename.split("/")[1]}))),v=p.map((function(e){var t="".concat(c,"/").concat(e),a={params:{qc_dir:t}},n=u.generateQcEntry(a);return n})),a.next=15,Promise.all(v).then((function(e){C["each"](e,(function(e){}))}));case 15:i.setInProgress(!1);case 16:case"end":return a.stop()}}),a)})))()},resetUploadState:function(e){var t=S(e),a=t.commit;a.setInProgress(!1),a.setUploads([])}}}),I=F;s["default"].use(y["a"]);var D=Object(w["a"])({state:{client:null,currentComponent:{component:null},serverStatus:null,subMenu:null,xploreData:null},getters:{},mutations:{setClient:function(e,t){e.client=t},setComponent:function(e,t){e.currentComponent=t},setServerStatus:function(e,t){e.serverStatus=t},setSubmenu:function(e,t){e.subMenu=t},setXploreData:function(e,t){e.xploreData=t}},actions:{},modules:{upload:I}}),T=D.store,E=(D.rootActionContext,D.moduleActionContext),P=(D.rootGetterContext,D.moduleGetterContext),B=T,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",e._b({attrs:{timeout:e.timeout},scopedSlots:e._u([e.buttonExists?{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{text:"",icon:!!e.buttonIcon},on:{click:e.buttonClicked}},"v-btn",n,!1),[e.buttonIcon?a("v-icon",[e._v(" "+e._s(e.buttonIcon)+" ")]):a("span",[e._v(" "+e._s(e.button)+" ")])],1)]}}:null],null,!0),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},"v-snackbar",e.options,!1),[e._v(" "+e._s(e.text)+" "),e.buttonExists?a("v-spacer"):e._e()],1)},N=[],z=Object(v["g"])(!1),G=Object(v["g"])(""),L="",V=Object(v["g"])(L),$="",q=Object(v["g"])($),W=null,H=Object(v["g"])(W),J=2e3,X=Object(v["g"])(J),Q={color:"secondary"},Y=Object(v["g"])(Q);function K(e){G.value=e.text,V.value=e.button||L,q.value=e.buttonIcon||$,H.value=e.callback||W,X.value=e.timeout||J,Y.value=Object(O["a"])(Object(O["a"])({},Q),e.options),z.value=!0}Object(v["h"])(z,(function(e){!1===e&&setTimeout((function(){Y.value=Q}),150)}));var Z=Object(v["c"])({name:"Snackbar",setup:function(){var e=Object(v["a"])((function(){return V.value||q.value}));function t(){null!==H.value&&H.value(),z.value=!1}return{show:z,text:G,button:V,buttonIcon:q,buttonExists:e,callback:H,timeout:X,options:Y,buttonClicked:t}}}),ee=Z,te=a("2877"),ae=Object(te["a"])(ee,U,N,!1,null,null,null),ne=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clickNegative.apply(null,arguments)},input:function(t){return t||e.clickNegative()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[e.title?a("v-toolbar-title",{staticClass:"title pa-4"},[e._v(" "+e._s(e.title)+" ")]):e._e(),a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pl-4"},[e._v(" "+e._s(e.message)+" ")]),a("v-card-actions",[a("v-spacer"),e.negativeText?a("v-btn",{attrs:{text:""},on:{click:e.clickNegative}},[e._v(" "+e._s(e.negativeText)+" ")]):e._e(),e.positiveText?a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.clickPositive}},[e._v(" "+e._s(e.positiveText)+" ")]):e._e()],1)],1)],1)},ie=[],ue="",oe="",le=null,se="",ce="",pe=Object(v["g"])(!1),ve=Object(v["g"])(ue),de=Object(v["g"])(oe),fe=Object(v["g"])(le),ge=Object(v["g"])(se),he=Object(v["g"])(ce);var me=Object(v["c"])({name:"Prompt",setup:function(){function e(){fe.value&&fe.value(!0),pe.value=!1}function t(){fe.value&&fe.value(!1),pe.value=!1}return{show:pe,title:ve,message:de,positiveText:ge,negativeText:he,clickPositive:e,clickNegative:t}}}),be=me,xe=Object(te["a"])(be,re,ie,!1,null,null,null),_e=xe.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogOpen?a("v-card",{staticClass:"progress-card mr-5 mb-5",attrs:{"min-width":"20vw"}},[a("v-card-title",[e.inProgress?e._e():[e.allSuccessful?a("v-icon",{attrs:{left:"",color:"success"}},[e._v(" mdi-check ")]):a("v-icon",{attrs:{left:"",color:"warning"}},[e._v(" mdi-alert-circle ")])],e.inProgress?a("span",[e._v(" Uploading "+e._s(e.uploads.length)+" Files ")]):a("span",[e._v(" Uploads Finished ")]),a("v-spacer"),e.minimized?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!1}}},[a("v-icon",[e._v("mdi-chevron-up")])],1):a("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!0}}},[a("v-icon",[e._v("mdi-chevron-down")])],1),a("v-btn",{attrs:{icon:""},on:{click:e.handleClickClose}},[a("v-icon",[e._v("mdi-close")])],1),a("v-dialog",{attrs:{width:"30vw"},model:{value:e.closeDialogDialog,callback:function(t){e.closeDialogDialog=t},expression:"closeDialogDialog"}},[a("v-card",[a("v-card-title",[e._v("Cancel Uploads?")]),a("v-card-subtitle",[e._v(" Are you sure you want to cancel all uploads? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.cancelAllUploads}},[e._v(" Cancel Uploads ")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.closeDialogDialog=!1}}},[e._v(" Continue ")])],1)],1)],1)],2),e.inProgress?a("v-progress-linear",{attrs:{value:e.totalProgress}}):e._e(),e.minimized?e._e():a("v-card-text",{staticClass:"pa-0"},[a("v-list",{attrs:{dense:""}},e._l(e.uploads,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-avatar",[a("v-icon",[e._v("mdi-folder-upload")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.file.name)+" ")]),t.error?a("v-list-item-subtitle",{staticClass:"red--text"},[e._v(" "+e._s(t.error)+" ")]):e._e()],1),a("v-list-item-action",[t.cancelled?a("v-icon",{attrs:{color:"error"}},[e._v(" mdi-cancel ")]):t.error?a("v-icon",{attrs:{color:"error"}},[e._v(" mdi-close ")]):a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(r){var i=r.hover;return[i&&!t.finished?a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.cancelUpload(n)}}},[a("v-icon",[e._v("mdi-close")])],1):t.finished?a("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check ")]):a("v-progress-circular",{attrs:{color:"primary",width:"2",size:"24",value:50}})]}}],null,!0)})],1)],1)})),1)],1)],1):e._e()},we=[],ke={dispatch:K},Oe=Object(v["c"])({name:"UploadProgressDisplay",setup:function(){var e=Object(v["a"])((function(){return B.state.upload.uploads})),t=Object(v["a"])((function(){return B.getters.upload.allSuccessful})),a=Object(v["a"])((function(){return B.state.upload.inProgress})),n=Object(v["a"])((function(){return B.state.upload.dialogOpen})),r=Object(v["a"])((function(){return B.getters.upload.totalProgress})),i=Object(v["g"])(!0),u=Object(v["g"])(!1);function o(){B.commit.upload.setDialogOpen(!1),u.value=!1}function l(e){B.dispatch.upload.cancelUpload(e)}function s(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.dispatch.upload.cancelAllUploads();case 2:ke.dispatch({text:"Uploads Cancelled."}),o();case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function p(){a.value?u.value=!0:o()}return{uploads:e,allSuccessful:t,inProgress:a,totalProgress:r,dialogOpen:n,closeDialog:o,closeDialogDialog:u,handleClickClose:p,cancelUpload:l,cancelAllUploads:s,minimized:i}}}),je=Oe,Re=(a("507d"),Object(te["a"])(je,ye,we,!1,null,"6e5fe924",null)),Ce=Re.exports,Me=Object(v["c"])({name:"App",components:{GlobalSnackbar:ne,Prompt:_e,UploadProgressDisplay:Ce},setup:function(e,t){Object(v["a"])((function(){return B.state.client}))}}),Se=Me,Ae=(a("034f"),Object(te["a"])(Se,x,_,!1,null,null,null)),Fe=Ae.exports,Ie=a("8c4f"),De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("appbar",{staticClass:"appbar",attrs:{submenu:e.submenu},on:{openDrawer:e.openDrawer}}),a("main-menu",{ref:"mainmenu",staticStyle:{"z-index":"99999"},on:{menuClicked:e.menuClicked}}),e.atlasXplore_displayed?a("v-container",{style:{"background-color":e.backgroundColor,height:"100%",margin:"0",width:"100%",padding:"0"},attrs:{fluid:"",id:"container"}},[a("v-row",[a("v-dialog",{attrs:{value:e.backgroundFlag,"hide-overlay":""},on:{"click:outside":function(t){e.backgroundFlag=!e.backgroundFlag}}},[a("v-card",{staticStyle:{width:"max-content",position:"absolute","z-index":"999",top:"47px",left:"210px"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",disabled:!e.spatialData,items:e.backgroundOptions,headers:e.backgroundHeader},scopedSlots:e._u([{key:"item",fn:function(t){return["custom"!=t.item["background"]?[a("tr",{on:{click:function(a){return e.chooseBackground(t.item)}}},[a("td",[e._v(e._s(t.item["background"]))])])]:[a("tr",{style:{"pointer-events":e.isClusterView?"auto":"none"},on:{click:function(t){e.clusterColorFlag=!0,e.backgroundFlag=!1}}},[a("td",[e._v("Heatmap")])])]]}}],null,!1,2445085356),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),e.runIdFlag?a("v-dialog",{attrs:{value:e.runIdFlag,"hide-overlay":""},on:{"click:outside":function(t){e.runIdFlag=!e.runIdFlag}}},[a("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[a("v-text-field",{staticStyle:{width:"190px"},attrs:{loading:e.loading,"prepend-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{staticClass:"thickBorder",attrs:{height:"20vh",width:"20%",dense:"","single-select":"",search:e.search,loading:e.loading,items:e.items,headers:e.headers,"sort-by":"id"},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),e.metaFlag?a("v-dialog",{attrs:{value:e.metaFlag,"hide-overlay":""},on:{"click:outside":function(t){e.metaFlag=!e.metaFlag}}},[a("v-card",{staticStyle:{width:"200px",position:"absolute","z-index":"999",top:"47px",left:"130px"},attrs:{disabled:e.loading}},[a("v-card-title",[e._v(" "+e._s(e.runId)+" ")]),a("v-card-text",[a("v-text-field",{staticClass:"bold-disabled",attrs:{value:e.metadata.species.replace("_"," "),dense:"",disabled:"",outlined:"",label:"Species"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Organ"},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Type"},model:{value:e.metadata.type,callback:function(t){e.$set(e.metadata,"type",t)},expression:"metadata.type"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Run ID"},model:{value:e.metadata.runid,callback:function(t){e.$set(e.metadata,"runid",t)},expression:"metadata.runid"}})],1)],1)],1):e._e(),e.clusters_ann_flag?a("v-dialog",{attrs:{value:e.clusters_ann_flag,"hide-overlay":""},on:{"click:outside":function(t){e.clusters_ann_flag=!e.clusters_ann_flag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"47px",left:"150px"},attrs:{disabled:e.loading}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:e.clusters_ann_list},scopedSlots:e._u([{key:"item",fn:function(t){return["gene"==t.item||"motif"==t.item?[a("tr",{on:{click:function(a){return e.changeClustersAnn(t.item)}}},[a("td",[e._v(e._s(t.item))])])]:"eRegulon"==t.item?[a("tr",{on:{click:function(t){return e.changeClustersAnn("eRegulon")}}},[a("td",[e._v(e._s(t.item))])])]:e._e()]}}],null,!1,2820310983),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),a("v-col",{attrs:{cols:"2",sm:"1"}},[a("v-card",{style:{"margin-left":"5px",width:"65px","min-width":"65px",height:"342px","padding-top":"15px","margin-top":"5px","background-color":"silver"},attrs:{flat:""}},[a("v-tooltip",{attrs:{right:"",disabled:e.isDrawing},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{icon:"",disabled:!e.spatialData||e.isDrawingRect||!e.isClusterView,color:e.colorOnOff,small:""},on:{click:function(t){e.isDrawing=!e.isDrawing}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-lasso")])],1)]}}],null,!1,4117228559)},[a("span",[e._v("Lasso Select")])]),a("v-tooltip",{attrs:{right:"",disabled:e.isDrawingRect},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",disabled:!e.spatialData||e.isDrawing||!e.isClusterView,color:e.colorOnOffRect,small:""},on:{click:function(t){e.isDrawingRect=!e.isDrawingRect}},model:{value:e.isDrawingRect,callback:function(t){e.isDrawingRect=t},expression:"isDrawingRect"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-select")])],1)]}}],null,!1,1556311684)},[a("span",[e._v("Quad Select")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.isDrawing&&!e.isDrawingRect,small:""},on:{click:function(t){e.listId=!0}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-eye")])],1)]}}],null,!1,2645962557)},[a("span",[e._v("View Id's/Genes")])]),a("v-dialog",{attrs:{width:"600px",height:"300px"},model:{value:e.listId,callback:function(t){e.listId=t},expression:"listId"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("Tixel Id's Selected")])]),a("v-card-text",[e._v(" "+e._s(e.highlightIds)+" ")]),a("v-card-title",["gene"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Genes")])]:e._e(),"motif"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Motifs")])]:e._e(),"eRegulon"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Regulons")])]:e._e()],2),a("v-card-text",[e._v(" "+e._s(e.topSelected)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveTxt}},[e._v(" Save ")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.listId=!1}}},[e._v(" Close ")])],1)],1)],1),e.clusterColorFlag?a("v-dialog",{attrs:{value:e.clusterColorFlag,scrollable:!0},on:{"click:outside":e.clearClusterColor}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","z-index":"999",height:"90vh"}},[a("v-card-title",[e._v("Color Configuration")]),a("v-card-text",[a("v-divider"),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",attrs:{cols:"12",sm:"12"}},[a("table",{staticStyle:{"margin-bottom":"0"}},[a("tbody",e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n},[a("b",[e._v(e._s(n))]),a("td",{staticStyle:{"padding-left":"50px","vertical-align":"top"}},[a("v-tooltip",{attrs:{color:"black",right:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[a("v-btn",e._g(e._b({staticClass:"round_chip",attrs:{color:t},on:{click:function(a){return e.copyToClip(t)}}},"v-btn",i,!1),r))]}}],null,!0)},[a("span",[e._v(e._s(t))])])],1),a("td",{staticStyle:{"padding-left":"80px"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{value:t,clearable:"",label:"Color Choice"},on:{input:function(t){return e.checkFieldColor(n+t)}}})],1)])})),0)])])],1)],1),a("div",{staticStyle:{width:"100%",height:"8px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"12"}},[a("v-color-picker",{attrs:{value:"hex",mode:"hexa","hide-mode-switch":""}})],1)],1)],1),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-6",attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{color:"red",outlined:""},on:{click:e.clearClusterColor}},[e._v(" Cancel ")]),a("v-btn",{staticClass:"pl-5",attrs:{color:"blue",outlined:""},on:{click:e.changeClusterColor}},[e._v(" Apply ")])],1)],1)],1)],1)],1):e._e(),e.cellTypeFlag?a("v-dialog",{attrs:{value:e.cellTypeFlag,scrollable:!0},on:{"click:outside":function(t){e.cellTypeFlag=!e.cellTypeFlag}}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","z-index":"999"},attrs:{loading:e.loading}},[a("v-card-title",[e._v("Cell Type Mapping")]),a("v-card-text",[a("v-divider"),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",attrs:{cols:"12",sm:"12"}},[a("table",{staticStyle:{"margin-bottom":"0"}},[a("tbody",e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n},[a("b",[e._v(e._s(n))]),a("td",{staticStyle:{"padding-left":"50px","vertical-align":"top"}},[a("v-btn",{staticClass:"round_chip",attrs:{color:t}})],1),a("td",{staticStyle:{"padding-left":"80px"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{value:e.cellTypeMapCopy[n],clearable:"",label:"Cell Typing"},on:{blur:function(t){return e.checkFieldCell(n,t)}}})],1)])})),0)])])],1)],1),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-6",attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{color:"red",outlined:""},on:{click:e.clearCellType}},[e._v(" Cancel ")]),a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.uploadCellType()},click:e.resetFile}}),a("v-btn",{staticClass:"pl-5",attrs:{color:"green",outlined:""},on:{click:function(t){return e.$refs.file.click()}}},[e._v(" Upload ")]),a("v-btn",{staticClass:"pl-5",attrs:{color:"blue",outlined:""},on:{click:e.changeCellType}},[e._v(" Apply ")])],1)],1)],1)],1)],1):e._e(),e.displayFlag?a("v-dialog",{attrs:{value:e.displayFlag,"hide-overlay":""},on:{"click:outside":function(t){e.displayFlag=!e.displayFlag}}},[a("v-card",{staticStyle:{width:"max-content",position:"absolute",left:"65px",top:"240px","z-index":"999"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:e.saveImageTable},scopedSlots:e._u([{key:"item",fn:function(t){return["Transparent"==t.item?[a("tr",{on:{click:function(t){return e.captureScreen("null")}}},[a("td",[e._v(e._s(t.item))])])]:"Opaque"==t.item?[a("tr",{on:{click:function(t){return e.captureScreen(e.backgroundColor)}}},[a("td",[e._v(e._s(t.item))])])]:[a("tr",{on:{click:e.generateFrontPage}},[a("td",[e._v(e._s(t.item))])])]]}}],null,!1,714686825),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),e.scaleFlag?a("v-dialog",{attrs:{scrollable:!0,value:e.scaleFlag,"hide-overlay":""},on:{"click:outside":function(t){e.scaleFlag=!e.scaleFlag}}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"30%",transform:"translate(-50%, -50%)","z-index":"999"}},[a("v-card-title",[e._v("Min/Max Range")]),a("v-row",{staticStyle:{padding:"8px"}},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{type:"text",rules:e.onlyNumRule,label:"Min"},model:{value:e.userMinValue,callback:function(t){e.userMinValue=t},expression:"userMinValue"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{type:"text",rules:e.onlyNumRule,label:"Max"},model:{value:e.userMaxValue,callback:function(t){e.userMaxValue=t},expression:"userMaxValue"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{outlined:"",color:"red"},on:{click:e.resetBoundary}},[e._v("Reset")]),a("v-btn",{attrs:{outlined:"",color:"green"},on:{click:e.applyBoundary}},[e._v("Apply")])],1)],1)],1)],1):e._e(),a("v-tooltip",{attrs:{right:"",disabled:e.cellTypeFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.spatialData,small:""},on:{click:function(t){e.cellTypeFlag=!e.cellTypeFlag}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-eyedropper-variant")])],1)]}}],null,!1,2035222387)},[a("span",[e._v("Cell Typing")])]),a("v-tooltip",{attrs:{right:"",disabled:e.scaleFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:0===e.childGenes.length,small:""},on:{click:function(t){e.scaleFlag=!e.scaleFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-scale")])],1)]}}],null,!1,64403955)},[a("span",[e._v("Min/Max Range")])]),a("v-tooltip",{attrs:{right:"",disabled:e.displayFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.spatialData,small:""},on:{click:function(t){e.displayFlag=!e.displayFlag}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-download")])],1)]}}],null,!1,53105994)},[a("span",[e._v("Save Display")])])],1),a("v-card",{style:{position:"sticky","margin-left":"5px",width:"65px","min-width":"65px",height:"149px","padding-top":"15px","background-color":"silver",top:"62vh"},attrs:{flat:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{color:"black",icon:"",disabled:!e.spatialData,small:""},on:{click:function(t){e.featureTableFlag=!0,e.peakViewerFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-table-large")])],1)]}}],null,!1,2784972826)},[a("span",[e._v("Feature Table")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{loading:e.peakViewLoad,color:"black",icon:"",disabled:!e.spatialData||e.assayFlag||e.peakViewLoad,small:""},on:{click:function(t){e.peakViewerFlag=!0,e.featureTableFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-chart-line")])],1)]}}],null,!1,645798270)},[a("span",[e._v(e._s(e.regulons_flag?"Peak/Motif/Network Viewer":"Peak/Motif Viewer"))])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{color:"black",icon:"",disabled:!e.spatialData,small:""},on:{click:function(t){e.histoFlag=!0,e.peakViewerFlag=!1,e.featureTableFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-chart-bar")])],1)]}}],null,!1,865424421)},[a("span",[e._v("Histogram")])])],1)],1),a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"11"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"10"}},[a("atx-atac-viewer",{ref:"mainAtxViewer",attrs:{filename:e.filename,standalone:!1,selected_tixels:e.topSelected,selected_genes:e.childGenes,background:e.backgroundColor,heatmap:e.heatMap,manualColor:e.manualClusterFlag,task:"gene.compute_qc",queue:"atxcloud_gene",lasso:e.isDrawing,rect:e.isDrawingRect,clickedCluster:e.clickedClusterFromChild,checkBoxCluster:e.selectedClusters,indFlag:e.averageInd,antiKey:e.tableKey,geneOmotif:e.geneMotif,idOfRun:e.runId,userBoundary:e.userMaxMinValue,assay_flag:e.assayFlag,regulonsFlag:e.regulons_flag,channel:e.metadata.channel},on:{loading_value:e.updateLoading,highlightedId:e.updateSelectors,totalClust:e.updateClustTotal,spatialCircleData:e.updateHistogram,singleCircleData:e.dataToSingle,sendColorBar:e.colorBarToSingle,totalGM:e.loadExpressions,maxMinCount:e.updateMaxMin}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("table",{staticStyle:{"margin-bottom":"0",height:"50vh","overflow-y":"scroll",display:"block"}},e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n,style:{"vertical-align":"middle"}},[a("td",[a("v-checkbox",{attrs:{color:t,dense:"",dark:"white"!=e.backgroundColor,"input-value":"1"},on:{click:function(t){return e.unClickCluster(n)}}})],1),a("td",{staticStyle:{"padding-bottom":"12px"}},[a("span",{style:{color:"white"==e.backgroundColor?"black":"white","font-weight":"bold"}},[e._v(e._s(n)+" "),a("span",{staticStyle:{"font-size":"10px"}},[e._v(" ("+e._s(e.totalInClust[n])+")")])])])])})),0)])],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[e.averageInd&&e.childGenes.length>0?a("singleview",{attrs:{gene:e.childGenes,circleData:e.singleData,userBoundary:e.userMaxMinValue,heatmap:e.heatMap,loadingProp:e.loading,colorBar:e.colorBarFromSibling,background:e.backgroundColor,channel:e.metadata.channel}}):e._e()],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.featureTableFlag,expression:"featureTableFlag"}],staticClass:"mt-3",attrs:{flat:""}},[a("table-component",{attrs:{loading:e.geneMotifLoad,lengthClust:e.lengthClust,gene:e.geneNames,clusters:e.topHeaders,colormap:e.colorMap},on:{sentGene:e.sendGene,sentCluster:e.sendCluster}})],1),a("div",{attrs:{id:"captureHisto"}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.spatialCircleData.length>0&&e.histoFlag,expression:"spatialCircleData.length > 0 && histoFlag"}],staticClass:"mt-3",attrs:{flat:""}},[a("histogram-graph",{directives:[{name:"show",rawName:"v-show",value:e.histoFlag,expression:"histoFlag"}],attrs:{colorCode:e.colorMap,idName:e.childGenes,chartData:e.spatialCircleData,assay:e.assayFlag}})],1)],1),a("div",{style:{visibility:e.visible},attrs:{id:"capturePeak"}},[e.assayFlag?e._e():a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],ref:"peakContainer",staticClass:"mt-3",attrs:{flat:""}},["motif"==e.geneMotif?[a("v-card-title",[e._v(e._s(e.trackBrowserGenes[0]?e.trackBrowserGenes[0]:"Please enter motif in search bar to see seqlogo"))]),a("bar-chart",{ref:"chart",attrs:{seqlogo:e.seqLogoData,width:e.widthFromCard,motif:e.trackBrowserGenes[0]}})]:e._e(),a("track-browser",{directives:[{name:"show",rawName:"v-show",value:"gene"==e.geneMotif,expression:"geneMotif == 'gene'"}],ref:"trackbrowser",attrs:{run_id:e.runId,metadata:e.metadata.species,search_key:e.trackBrowserGenes[0]},on:{loading_value:e.updateLoading}})],2)],1)],1)],1)],1)],1):e._e()],1)},Te=[],Ee=a("ade3"),Pe=a("3835"),Be=(a("466d"),a("caad"),a("2532"),a("5319"),a("a434"),a("a15b"),a("2b3d"),a("9861"),a("b64b"),a("fb6a"),a("07ac"),a("b0c0"),a("ce5b")),Ue=a.n(Be);a("bf40");s["default"].use(Ue.a);var Ne=new Ue.a,ze=a("d4ec"),Ge=a("bee2"),Le=(a("25f0"),a("e9c4"),a("d9e2"),a("a9e3"),6e5);function Ve(e){var t=e.split(".");if(3===t.length){var a=JSON.parse(atob(t[1]));if(a.exp)return 1e3*a.exp-Le-Date.now()}}function $e(e,t){var a=e.toString();while(a.length<t)a="0".concat(a);return a}var qe=function(){function e(t,a){Object(ze["a"])(this,e),this.axios=R.a.create({baseURL:t,headers:{common:{Authorization:a}}}),this.serverURL=t,this.urlPostfix=this.getUrlPostfix(),this.authorizationToken=a,this.user=null,this.workers=null}return Object(Ge["a"])(e,[{key:"initAsync",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchUser();case 3:this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),Ve(this.authorizationToken)),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUrlPostfix",value:function(){var e=this.serverURL.split("/"),t=e[e.length-1];return t}},{key:"updateWorkers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getWorkerSummary();case 2:this.workers=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApplicationInfo",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/app");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/refreshtoken");case 2:t=e.sent,a=t.data.access_token,this.authorizationToken="JWT ".concat(a),this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),Ve(a));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/whoami");case 2:t=e.sent,a=t.data,n={username:a.Username,user_level:0,name:"None",email:"",groups:a.groups},this.user=n;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadByLink",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link",r={filename:t,expiry:a},e.next=4,this.axios.get(n,{params:r});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"downloadByLinkPublic",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link_public",r={bucket_name:t,filename:a},e.next=4,this.axios.get(n,{params:r});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"uploadDatasetFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.file,t.file.name),a.append("meta",JSON.stringify(t.meta)),a.append("output_filename",t.output_filename),n="api/v1/storage/upload",e.prev=5,e.next=8,this.axios.post(n,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!R.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadMetadataFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.file,t.file.name),a.append("meta",JSON.stringify(t.meta)),a.append("output_filename",t.output_filename),n="api/v1/dataset/".concat(t.meta_type,"/upload"),e.prev=5,e.next=8,this.axios.post(n,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!R.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/auth/changepassword",/Success : (.+)/,e.prev=2,e.next=5,this.axios.put(a,t);case 5:n=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",!1);case 11:if(!n.data){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Unknown Response Received from ".concat(a,"."));case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("/api/v1/auth/user",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"user_request_account",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/user_account_request",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notify_user_group_assignment",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/inform_user_assignment",t);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{user:t}},n=this.axios.put("/api/v1/auth/confirm",a),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.delete("/api/v1/auth/user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetUserPassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/resetpassword",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNames",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/gmnames",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNamesByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:a},e.next=3,this.axios.post("api/v1/genes/gmnames/".concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getSpatialData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpatialDataByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:a},e.next=3,this.axios.post("api/v1/genes/get_spatial_data/".concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getSummation",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,rows:a},e.next=3,this.axios.post("api/v1/genes/get_summation",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressions",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/expressions",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressionsByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},e.next=3,this.axios.post("api/v1/genes/expressions/".concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneSpatial",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,genes:a},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",n,{timeout:3e5});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"encodeLink",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("api/v1/genes/generate_link",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWorkerSummary",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers/summary",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWorkers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTaskSync",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var i,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task_sync",u={queue:r,task:t,args:a,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var i,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task",u={queue:r,task:t,args:a,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"postPublicTask",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r,i){var u,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u="/api/v1/public_task",o={queue:r,task:t,args:a,kwargs:n,key:i},console.log(o),e.next=5,this.axios.post(u,o);case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r,i){return e.apply(this,arguments)}return t}()},{key:"decodeMetadata",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/storage/decode_meta/".concat(t),e.next=3,this.axios.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTaskStatus",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/task/".concat(t),e.next=3,this.axios.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJsonFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/json",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCsvFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/csv",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFileList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/list",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubFolders",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/sub_folders",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBuckets",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/storage/fetch_buckets");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getImage",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:a}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomePageImages",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage/png",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:a}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getImageAsJPG",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/image_as_jpg",{params:t.params,responseType:"blob"});case 3:return a=e.sent,e.abrupt("return",new File([a.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGrayImageAsCroppedJPG",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/grayscale_image_jpg_cropping",{params:t.params,responseType:"blob"});case 3:return a=e.sent,e.abrupt("return",new File([a.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateFrontPage",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:t,runId:a},e.next=3,this.axios.post("/api/v1/storage/generate_frontpage",n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"generateQcEntry",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/qc_entry",null,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMetadataFromRunId",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/dataset/slimstest_runid",n="D".concat($e(Number(t.split("D")[1]),5)),r={params:{run_id:n}},e.next=5,this.axios.get(a,r);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunIdList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/dataset/slimstest_list_runids",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkWafer",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getWafers(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWafers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafers",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putWafers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/wafers",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteWafer",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/wafers",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkChip",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getChips(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getChips",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/chips",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putChips",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/chips",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteChip",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/chips",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkDbit",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getDbits(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDbits",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/dbits",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putDbits",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/dbits",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDbit",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/dbits",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getQc(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/qc",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/qc",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWaferTrace",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafertrace",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunsCollaborator",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="dbit_metadata",r={params:{collaborator:t,table_name:n,web_objs:a}},e.next=4,this.axios.get("/api/v1/run_db/get_runs_collaborator",r);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"get_user_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/list_accounts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_group_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/group");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create_group",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={data:{group_name:t,description:a}},e.next=3,this.axios.post("/api/v1/auth/group",n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"modify_group_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/modify_group_list",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete_group",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{group_name:t}},e.next=3,this.axios.delete("/api/v1/auth/group",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disable_user",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{username:t}},e.next=3,this.axios.put("/api/v1/auth/disable_user",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logIntoPublic",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/auth/log_into_public");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUpdateDate",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_last_update");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSlimsData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_slims_data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicRuns",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/populate_homepage");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupPublicRuns",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="all_public_run_data",n={params:{table:a,group:t}},e.next=4,this.axios.get("/api/v1/run_db/get_group_runs",n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"re_initialize_db",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="public_data",a={params:{database:t}},console.log(a),e.next=5,this.axios.get("/api/v1/run_db/reinitialize_db",a);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePublicData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,this.axios.post("/api/v1/run_db/update_public",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchPMID",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_pmid",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchAuthors",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_authors",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"grabPaths",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/retrieve_paths");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm_user_status_via_email",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={params:{username:t,confirmation_code:a}},e.next=3,this.axios.get("/api/v1/auth/confirm_user_via_email",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"resend_registration_code",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/resend_confirmation_via_email",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"forgotPasswordRequest",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/forgot_password_request",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetPassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={username:t,password:a,code:n},e.next=3,this.axios.post("/api/v1/auth/forgot_password_confirmation",r);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"confirm_user_email_admin",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={username:t},e.next=3,this.axios.post("/api/v1/auth/confirm_user_email_admin",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_available_fields",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_field_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"upload_metadata_from_page",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/upload_metadata_page",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_info_from_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_run_id",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_run_ids",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_run_ids");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_info_from_results_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={results_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_results_id",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkSpatialFolderExists",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket_name:t,run_id:a},e.next=3,this.axios.post("/api/v1/run_db/check_spatial_folder_exists",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getJobs",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_jobs",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ensure_run_id_created",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/ensure_run_id_created",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_ids",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_studies");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_study_runs",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={study_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_study_runs",a);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update_study_table",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/update_study_table",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_types",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_study_types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_downloadable_files_for_run",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={tissue_id:t},e.next=3,this.axios.post("/api/v1/run_db/load_run_files_info",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_type_options",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_file_type_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submit_file_changes",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/set_run_files",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_info_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_file_info_run_id",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_all_downloadable_files_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_all_downloadable_files_run_id");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_urls",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_urls",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_url",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_url",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"Create",value:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new e(a,n),t.next=3,r.initAsync();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));function a(e,a){return t.apply(this,arguments)}return a}()},{key:"CreatePublic",value:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new e(a,n),t.abrupt("return",r);case 2:case"end":return t.stop()}}),t)})));function a(e,a){return t.apply(this,arguments)}return a}()}]),e}();function We(e){return void 0!==e.isAxiosError}function He(e){return void 0!==e.serverURL}function Je(e,t,a){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.post("".concat(t,"/api/v1/auth/login"),{username:a,password:n});case 3:return r=e.sent,i=r.data.access_token,u="JWT ".concat(i),e.abrupt("return",qe.Create(t,u));case 9:if(e.prev=9,e.t0=e["catch"](0),!We(e.t0)){e.next=13;break}return e.abrupt("return","Invalid username or password");case 13:return e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),Xe.apply(this,arguments)}Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SERVER_URL;var Qe="atxLogin",Ye="https://api.atlasxomics.com/production",Ke=(a("53ca"),a("498a"),a("4d63"),a("c607"),a("2c3e"),a("00b4"),a("9129"),a("ec26e"));function Ze(){return Object(Ke["a"])()}function et(e){var t=[];return M.a.forIn(e,(function(e,a){var n={key:a,value:e};t.push(n)})),t}function tt(e,t){var a=e,n={name:a.name||void 0,path:a.path,params:a.params,query:t};return n}function at(e,t){for(var a=[],n=0;n<e.length;n+=t)a[a.length]=e.slice(n,n+t);return a}var nt=a("a78e"),rt=a.n(nt),it=Object(v["a"])((function(){return B.state.client})),ut=Object(v["a"])((function(){return null!==it.value})),ot=Object(v["a"])((function(){var e;return(null===(e=it.value)||void 0===e?void 0:e.user)||null}));Object(v["a"])((function(){return null!==ot.value}));function lt(e){var t=1/24;rt.a.set(Qe,JSON.stringify(e),{expires:t})}function st(){var e=rt.a.get(Qe);return void 0===e?e:JSON.parse(e)}function ct(){var e;rt.a.remove(Qe),window.clearTimeout(null===(e=B.state.client)||void 0===e?void 0:e.refreshTimeoutId),B.commit.setClient(null)}function pt(e){if(!it.value)return!1;if(!it.value.user)return!1;if("any"===e[0]&&it.value.user.groups.length>0)return!0;var t=!1;return M.a.each(it.value.user.groups,(function(a){e.includes(a)&&(t=!0)})),t}var vt=a("c0e9"),dt=a.n(vt),ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{width:"300",fixed:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"}},[e._l(e.menu,(function(t){return[a("v-subheader",{key:t.groupname},[e._v(e._s(t.groupname))]),e._l(t.items,(function(t){return[a("v-list-item",{key:t.component,on:{click:function(a){return e.$emit("menuClicked",t.query)}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),a("v-list-item-title",[e._v(e._s(t.name))])],1)]}))]}))],2)],1)],1)},gt=[],ht=[{groupname:"Tools",items:[{name:"AtlasXBrowser",icon:"mdi-grid",access_control:["admin","user"],color:"cyan",query:{component:"AtlasXBrowser"}},{name:"AtlasXplore",icon:"mdi-magnify",access_control:["admin","user"],color:"cyan",query:{component:"AtlasXplore"}}]}],mt=Object(v["c"])({name:"MainMenu",setup:function(e,t){var a=Object(v["g"])(!1);function n(){a.value=!0}return B.commit.setSubmenu(null),{menu:ht,drawer:a,openDrawer:n,resolveAuthGroup:pt}}}),bt=mt,xt=Object(te["a"])(bt,ft,gt,!1,null,null,null),_t=xt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",dense:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){return e.$emit("openDrawer")}}}),e._l(e.subMenu,(function(t){return a("v-tooltip",{key:t.text,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[t.type?e._e():[a("v-btn",e._g(e._b({class:t.enabled?"visible":"hidden",attrs:{id:t.ref?t.ref:"",text:"",icon:!!t.icon},on:{click:t.click}},"v-btn",i,!1),r),[t.icon?[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])]:e._e(),t.icon?e._e():[e._v(" "+e._s(t.text)+" ")]],2)],"component"==t.type?[a("div",{attrs:{id:t.id}})]:e._e()]}}],null,!0)},[a("span",{key:t.text+"-span"},[e._v(e._s(t.tooltip))])])})),a("v-spacer"),e.loggedIn?[a("v-menu",{attrs:{"offset-y":""},model:{value:e.userMenu,callback:function(t){e.userMenu=t},expression:"userMenu"}})]:e._e()],2)},wt=[],kt=a("2340"),Ot=a("fcf4"),jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:e.uploadDialogWidth},model:{value:e.uploadDatasetFileMenu,callback:function(t){e.uploadDatasetFileMenu=t},expression:"uploadDatasetFileMenu"}},[a("upload-dataset-file-menu")],1),a("fresh-dialog",{model:{value:e.uploadQcDirectoryMenu,callback:function(t){e.uploadQcDirectoryMenu=t},expression:"uploadQcDirectoryMenu"}},[a("upload-qc-directory-menu")],1),a("div",[a("metadata-upload")],1)],1)},Rt=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",e._b({key:e.key,model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"v-dialog",e.dialogProps,!1),[e._t("default")],2)},Mt=[],St=function(){return Math.random().toString(36).substring(7)},At=Object(v["c"])({props:{value:{type:Boolean,required:!1,default:!1}},setup:function(e,t){var a=Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}}),n=Object(v["g"])(St());Object(v["h"])(a,(function(e){e&&(n.value=St())}));var r=Object(v["a"])((function(){return t.attrs}));return{key:n,model:a,dialogProps:r}}}),Ft=At,It=Object(te["a"])(Ft,Ct,Mt,!1,null,null,null),Dt=It.exports,Tt=Object(v["g"])(!1),Et=Object(v["g"])(!1),Pt=Object(v["g"])(!1),Bt=Object(v["g"])(!1),Ut=Object(v["g"])(!1),Nt=Object(v["g"])([]),zt=Object(v["a"])((function(){return Nt.value.length>=3?"unset":"35vw"})),Gt=Object(v["g"])(!1),Lt=Object(v["g"])([]),Vt=null;Object(v["h"])(Ut,(function(){Nt.value=[]}));var $t=Object(v["g"])(!1),qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Dataset File ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:"",outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},Wt=[],Ht=a("4f96"),Jt=Object(v["c"])({name:"UploadDatasetFileMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])([]),a=Object(v["a"])((function(){return t.value.every((function(e){return e}))})),n=Object(v["g"])(0),r=Object(v["g"])([]);function i(e){var t=15,a=e.split("."),n=Object(Ht["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(Nt,(function(e){r.value=e.map((function(){return Object(v["f"])({subject_type:"",data_source:"",remarks:""})}))}));var u="Field cannot be empty.",o=function(e){return!!e||u},l=function(e){return e.length>0||u},s="*",c=function(e){return e.every((function(e){return!0}))||"Only zip files are supported."};function p(){Ut.value=!1,Nt.value=[]}function d(){var t=r.value;if(e.value&&Nt.value&&t){var a=Nt.value.map((function(e,a){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:t[a]}}));B.dispatch.upload.uploadDatasetFiles(a),B.commit.upload.setDialogOpen(!0),p()}}return{formsValidation:t,allFormsValid:a,step:n,files:Nt,meta:r,truncateFileName:i,closeDialog:p,uploadDatasets:d,nonEmptyRule:o,nonEmptyArrayRule:l,acceptedFileTypes:s,datasetTypesRule:c}}}),Xt=Jt,Qt=Object(te["a"])(Xt,qt,Wt,!1,null,null,null),Yt=Qt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload QCed Directory ")]),a("v-card-text",[a("v-text-field",{attrs:{"prepens-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,search:e.search,loading:e.loading},on:{"click:row":e.selectTest},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"6"}},[a("file-upload",{ref:"upload",attrs:{multiple:e.multiple,directory:e.directory,"drop-directory":e.dropDirectory,"add-index":!0},model:{value:e.filesInDirectory,callback:function(t){e.filesInDirectory=t},expression:"filesInDirectory"}},[a("v-btn",{attrs:{color:"primary",disabled:!1},on:{click:e.selectTest}},[e._v(" Add Directory ")])],1)],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-text-field",{attrs:{disabled:""},model:{value:e.targetDirectory,callback:function(t){e.targetDirectory=t},expression:"targetDirectory"}},[e._v(" data ")])],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.clearItems}},[e._v(" Clear ")])],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Cancel ")])],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"success",disabled:e.upload_disabled},on:{click:e.uploadDirectory}},[e._v(" Upload ")])],1)],1)],1)],1)],1)},Zt=[],ea=a("8019"),ta=a.n(ea),aa=[{text:"Filename",value:"name"},{text:"Size",value:"size"}],na=Object(v["c"])({name:"UploadQcDirectoryMenu",components:{FileUpload:ta.a},setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=(Object(v["g"])(0),Object(v["g"])([])),a=Object(v["g"])(null),n=Object(v["g"])(!1),r=Object(v["g"])(),i=Object(v["g"])(!0),u=Object(v["g"])(!0),o=Object(v["g"])(!0),l=Object(v["g"])(!1),s=Object(v["g"])("data"),c=Object(v["g"])([]),p=Object(v["g"])([]),d=Object(v["g"])([]),f=Object(v["g"])(!0);function g(e){return h.apply(this,arguments)}function h(){return h=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.name);case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(){Gt.value=!1,c.value=[]}function b(){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.value=[],f.value=!0;case 2:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function _(){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function a(){var r,i,u,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.value,e.value){a.next=3;break}return a.abrupt("return");case 3:if(p.value){a.next=5;break}return a.abrupt("return");case 5:if(!f.value){a.next=7;break}return a.abrupt("return");case 7:if(!(d.value.length<1)&&d.value){a.next=9;break}return a.abrupt("return");case 9:return i=c.value.map((function(e,t){return{user:!1,file:e.file,output_filename:"".concat(s.value,"/").concat(e.file.webkitRelativePath),bucket:null,meta:r[t]}})),n.value=!0,u=[],M.a.each(d.value,(function(t){if(e.value){var a=e.value.getQc({params:{filter:JSON.stringify({id:t.split(".")[0]})}});u.push(a)}})),o=!0,a.next=16,Promise.all(u).then((function(e){M.a.each(e,(function(e){e.length>0&&(o=!1)}))}));case 16:n.value=!1,o?(B.dispatch.upload.uploadQcDatasetFiles(i),B.commit.upload.setDialogOpen(!0),m()):(ke.dispatch({text:"Some entries already exist in the database",options:{right:!0}}),f.value=!0);case 18:case"end":return a.stop()}}),a)}))),y.apply(this,arguments)}function w(e){var t=M.a.uniq(e.map((function(e){return e.name.split("/")[0]})));return t}function O(){f.value=!1,M.a.each(d.value,(function(e){var t=p.value.filter((function(t){return t.name.includes(e)})).map((function(e){return e.name})),a=t.filter((function(e){return e.includes("metadata.json")})).length>0;a||(f.value=!0)})),p.value.length<1&&(f.value=!0)}return Object(v["h"])(c,(function(e){p.value=[],c.value.forEach((function(e,t){return p.value.push({name:e.name,size:e.size})}))})),Object(v["h"])(p,(function(e){var t=w(p.value);d.value=t,O()})),{closeDialog:m,uploadDirectory:_,clearItems:b,directory:o,dropDirectory:l,filesInDirectory:c,multiple:i,addIndex:u,headers:aa,items:p,selectTest:g,selected:r,search:a,loading:n,targetDirectory:s,upload_disabled:f}}}),ra=na,ia=Object(te["a"])(ra,Kt,Zt,!1,null,null,null),ua=ia.exports,oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadWaferInformationMenu,callback:function(t){e.uploadWaferInformationMenu=t},expression:"uploadWaferInformationMenu"}},[a("wafer-information-upload")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadChipInformationMenu,callback:function(t){e.uploadChipInformationMenu=t},expression:"uploadChipInformationMenu"}},[a("chip-information-upload")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadDbitInformationMenu,callback:function(t){e.uploadDbitInformationMenu=t},expression:"uploadDbitInformationMenu"}},[a("dbit-information-upload")],1)],1)},la=[],sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Chip Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},ca=[],pa=Object(v["g"])(!1),va=Object(v["g"])(!1),da=Object(v["g"])(!1),fa=Object(v["c"])({name:"ChipInformationUpload",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])("chips"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ht["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(Nt,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var o="Field cannot be empty.",l=function(e){return!!e||o},s=function(e){return e.length>0||o},c=Object(v["g"])(".csv"),p=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function d(){pa.value=!1,Nt.value=[]}function f(){var a=i.value;if(e.value&&Nt.value&&a){var n=Nt.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));B.dispatch.upload.uploadMetadataFile(n),B.commit.upload.setDialogOpen(!0),d()}}return{formsValidation:a,allFormsValid:n,step:r,files:Nt,meta:i,truncateFileName:u,closeDialog:d,uploadDatasets:f,nonEmptyRule:l,nonEmptyArrayRule:s,acceptedFileTypes:c,datasetTypesRule:p}}}),ga=fa,ha=Object(te["a"])(ga,sa,ca,!1,null,null,null),ma=ha.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Wafer Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},xa=[],_a=Object(v["c"])({name:"WaferInformationUpload",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])("wafers"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ht["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(Nt,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var o="Field cannot be empty.",l=function(e){return!!e||o},s=function(e){return e.length>0||o},c=Object(v["g"])(".csv"),p=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function d(){va.value=!1,Nt.value=[]}function f(){var a=i.value;if(e.value&&Nt.value&&a){var n=Nt.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));B.dispatch.upload.uploadMetadataFile(n),B.commit.upload.setDialogOpen(!0),d()}}return{formsValidation:a,allFormsValid:n,step:r,files:Nt,meta:i,truncateFileName:u,closeDialog:d,uploadDatasets:f,nonEmptyRule:l,nonEmptyArrayRule:s,acceptedFileTypes:c,datasetTypesRule:p}}}),ya=_a,wa=Object(te["a"])(ya,ba,xa,!1,null,null,null),ka=wa.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload DBiT Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},ja=[],Ra=Object(v["c"])({name:"DbitInformationUpload",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])("dbits"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ht["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(Nt,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var o="Field cannot be empty.",l=function(e){return!!e||o},s=function(e){return e.length>0||o},c=Object(v["g"])(".csv"),p=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function d(){da.value=!1,Nt.value=[]}function f(){var a=i.value;if(e.value&&Nt.value&&a){var n=Nt.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));B.dispatch.upload.uploadMetadataFile(n),B.commit.upload.setDialogOpen(!0),d()}}return{formsValidation:a,allFormsValid:n,step:r,files:Nt,meta:i,truncateFileName:u,closeDialog:d,uploadDatasets:f,nonEmptyRule:l,nonEmptyArrayRule:s,acceptedFileTypes:c,datasetTypesRule:p}}}),Ca=Ra,Ma=Object(te["a"])(Ca,Oa,ja,!1,null,null,null),Sa=Ma.exports,Aa=Object(v["c"])({name:"MetadataUpload",components:{FreshDialog:Dt,ChipInformationUpload:ma,WaferInformationUpload:ka,DbitInformationUpload:Sa},setup:function(){return{uploadChipInformationMenu:pa,uploadWaferInformationMenu:va,uploadDbitInformationMenu:da}}}),Fa=Aa,Ia=Object(te["a"])(Fa,oa,la,!1,null,null,null),Da=Ia.exports,Ta={text:"Upload Metadata",menu_width:200,menu:[{text:"Wafer Table (.csv)",click:function(){va.value=!0},disabled:!1},{text:"Chip Table (.csv)",click:function(){pa.value=!0,console.log("Chip meta upload clicked")},disabled:!1},{text:"DBiT Run Table (.csv)",click:function(){da.value=!0},disabled:!1}]},Ea=Object(v["c"])({name:"File",components:{FreshDialog:Dt,UploadDatasetFileMenu:Yt,UploadQcDirectoryMenu:ua,MetadataUpload:Da},setup:function(){return{uploadDatasetFileMenu:Ut,uploadDialogWidth:zt,uploadQcDirectoryMenu:Gt,uploadDirectoryDialogWidth:Vt}}}),Pa=Ea,Ba=Object(te["a"])(Pa,jt,Rt,!1,null,null,null),Ua=Ba.exports,Na=Object(v["f"])({text:"File",menu_width:200,menu:[{text:"Upload Dataset",click:function(){Ut.value=!0},disabled:!0,color:"white"},{text:"Upload Directory",click:function(){Gt.value=!0},disabled:!0,color:"white"},Ta,{text:"Upload QCed",click:function(){Gt.value=!0},disabled:!1,color:"white"},{text:"Manage Dataset Files",click:function(){console.log("Manage dataset files clicked")},disabled:!0}]}),za=Object(v["f"])({text:"Edit",menu_width:200,menu:[{text:"Wafer Information",click:function(){B.commit.setComponent({component:"WaferInformationViewer"})},disabled:!1},{text:"Chip Information",click:function(){B.commit.setComponent({component:"ChipInformationViewer"})}},{text:"DBiT Information",click:function(){B.commit.setComponent({component:"DbitInformationViewer"})},disabled:!1}]}),Ga=Object(v["g"])(!1),La={text:"Tools",menu:[{text:"Annotator",click:function(){console.log("Analysis click")},disabled:!0}]},Va=(a("c9d8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("help-menu"),a("about-menu")],1)}),$a=[],qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"80vw"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",{staticClass:"pa-2"},[a("VueShowdown",{attrs:{markdown:e.helpguidetext}})],1)],1)},Wa=[],Ha=a("866c"),Ja=a.n(Ha),Xa="### Help\n\nATX Cloud is a software where users can upload the experiments related data and analyze the results with visualization tools.\n\n",Qa=Object(v["g"])(!1),Ya=Object(v["g"])(!1);s["default"].use(Ja.a,{options:{disableForced4SpacesIndentedSublists:!0}});var Ka=Object(v["c"])({name:"HelpMenu",setup:function(){return{active:Qa,helpguidetext:Xa}}}),Za=Ka,en=(a("5d33"),Object(te["a"])(Za,qa,Wa,!1,null,null,null)),tn=en.exports,an=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"80vw"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",{staticClass:"pa-2"},[a("VueShowdown",{attrs:{markdown:e.about}})],1)],1)},nn=[],rn="### About\n\nThis software is under development\n";s["default"].use(Ja.a,{options:{disableForced4SpacesIndentedSublists:!0}});var un=Object(v["c"])({name:"AboutMenu",setup:function(){return{active:Ya,about:rn}}}),on=un,ln=(a("2357"),Object(te["a"])(on,an,nn,!1,null,null,null)),sn=ln.exports,cn=Object(v["c"])({name:"About",components:{HelpMenu:tn,AboutMenu:sn},setup:function(){return{}}}),pn=cn,vn=Object(te["a"])(pn,Va,$a,!1,null,null,null),dn=vn.exports,fn={text:"About",menu:[{text:"Help",click:function(){Qa.value=!0},hotkey:"F1"},{text:"About",click:function(){Ya.value=!0}}]},gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("user")],1)},hn=[],mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.registerNewUserMenu,callback:function(t){e.registerNewUserMenu=t},expression:"registerNewUserMenu"}},[a("register-new-user-menu")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.resetUserPasswordMenu,callback:function(t){e.resetUserPasswordMenu=t},expression:"resetUserPasswordMenu"}},[a("reset-user-password-menu")],1)],1)},bn=[],xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Register User")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Username",rules:e.commonRules,"error-messages":e.usernameErrorMessage},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Full Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",type:"password",rules:e.commonRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.registerUser}},[e._v(" Register ")])],1)],1)},_n=[],yn=Object(v["g"])(!1),wn=Object(v["g"])(!1),kn=Object(v["g"])(!1),On=Object(v["c"])({name:"RegisterNewUserMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])(!1),a=[function(e){return""!==e&&null!==e}],n=Object(v["g"])(null),r=Object(v["g"])(null),i=Object(v["g"])(null),u=Object(v["g"])(null),o=Object(v["g"])([]);Object(v["h"])(n,(function(){i.value=null}));var l=Object(v["g"])(null);function s(){yn.value=!1}function c(){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&n.value&&u.value&&l.value&&r.value){t.next=2;break}return t.abrupt("return");case 2:return a={username:n.value,password:l.value,name:u.value,email:r.value,groups:o.value},t.next=5,e.value.registerUser(a);case 5:if(c=t.sent,c){t.next=9;break}return i.value="User already exists",t.abrupt("return");case 9:s(),ke.dispatch({text:"User Successfully Registered"});case 11:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}return{formValid:t,commonRules:a,username:n,name:u,email:r,usernameErrorMessage:i,password:l,closeMenu:s,registerUser:c}}}),jn=On,Rn=Object(te["a"])(jn,xn,_n,!1,null,null,null),Cn=Rn.exports,Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Reset User Password")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Username",rules:e.commonRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password",type:"password",rules:e.commonRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.resetUserPassword}},[e._v(" Reset ")])],1)],1)},Sn=[],An=Object(v["c"])({name:"ResetUserPasswordMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])(!1),a=[function(e){return!!e}],n=Object(v["g"])(null),r=Object(v["g"])(null);function i(){wn.value=!1}function u(){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&n.value&&r.value){t.next=2;break}return t.abrupt("return");case 2:return a={username:n.value,password:r.value},t.next=5,e.value.resetUserPassword(a);case 5:i(),ke.dispatch({text:"Password Successfully Reset"});case 7:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}return{formValid:t,commonRules:a,username:n,password:r,closeMenu:i,resetUserPassword:u}}}),Fn=An,In=Object(te["a"])(Fn,Mn,Sn,!1,null,null,null),Dn=In.exports,Tn=Object(v["c"])({name:"User",components:{FreshDialog:Dt,RegisterNewUserMenu:Cn,ResetUserPasswordMenu:Dn},setup:function(){return{registerNewUserMenu:yn,resetUserPasswordMenu:wn}}}),En=Tn,Pn=Object(te["a"])(En,mn,bn,!1,null,null,null),Bn=Pn.exports,Un={text:"User",menu_width:200,menu:[{text:"Register New User",click:function(){yn.value=!0}},{text:"Reset User Password",click:function(){wn.value=!0}}]},Nn=Object(v["c"])({name:"Admin",components:{User:Bn}}),zn=Nn,Gn=Object(te["a"])(zn,gn,hn,!1,null,null,null),Ln=Gn.exports,Vn={text:"Admin",menu_width:200,menu:[Un]},$n=Object(v["a"])((function(){var e,t;return null===(e=B.state.client)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.groups.includes("admin")})),qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{model:{value:e.waferInformationMenu,callback:function(t){e.waferInformationMenu=t},expression:"waferInformationMenu"}},[a("wafer-information-menu")],1),a("fresh-dialog",{model:{value:e.chipInformationMenu,callback:function(t){e.chipInformationMenu=t},expression:"chipInformationMenu"}},[a("chip-information-menu")],1),a("fresh-dialog",{model:{value:e.dbitInformationMenu,callback:function(t){e.dbitInformationMenu=t},expression:"dbitInformationMenu"}},[a("dbit-information-menu")],1)],1)},Wn=[],Hn=Object(v["g"])(!1),Jn=Object(v["g"])(!1),Xn=Object(v["g"])(!1),Qn=Object(v["g"])(!1),Yn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.waferInformationMenu,callback:function(t){e.waferInformationMenu=t},expression:"waferInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},Kn=[],Zn=[{text:"Wafer ID",value:"wafer_id"},{text:"Generation",value:"generation"},{text:"Diameter",value:"diameter"},{text:"Acquired Date",value:"date_acquired"},{text:"Actions",value:"actions"}],er=Object(v["c"])({name:"WaferInformationMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getWafers(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Jn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(Jn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:Zn,search:a,selected:n,loading:t,items:r,selectTest:o,waferInformationMenu:Jn,closeDialog:s}}}),tr=er,ar=Object(te["a"])(tr,Yn,Kn,!1,null,null,null),nr=ar.exports,rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.chipInformationMenu,callback:function(t){e.chipInformationMenu=t},expression:"chipInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},ir=[],ur=[{text:"Chip ID",value:"chip_id"},{text:"Wafer ID",value:"waferid"},{text:"Diameter",value:"diameter"},{text:"Acquired Date",value:"date_acquired"},{text:"Actions",value:"actions"}],or=Object(v["c"])({name:"ChipInformationMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getChips(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Xn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(Xn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:ur,search:a,selected:n,loading:t,items:r,selectTest:o,chipInformationMenu:Xn,closeDialog:s}}}),lr=or,sr=Object(te["a"])(lr,rr,ir,!1,null,null,null),cr=sr.exports,pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.dbitInformationMenu,callback:function(t){e.dbitInformationMenu=t},expression:"dbitInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},vr=[],dr=[{text:"Run ID",value:"run_id"},{text:"Study ID",value:"study_id"},{text:"Chip A ID",value:"chip_a_id"},{text:"Chip B ID",value:"chip_b_id"},{text:"Actions",value:"actions"}],fr=Object(v["c"])({name:"DbitInformationMenu",setup:function(){var e=Object(v["a"])((function(){return B.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getDbits(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Qn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(Qn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:dr,search:a,selected:n,loading:t,items:r,selectTest:o,dbitInformationMenu:Qn,closeDialog:s}}}),gr=fr,hr=Object(te["a"])(gr,pr,vr,!1,null,null,null),mr=hr.exports,br=Object(v["c"])({name:"Views",components:{FreshDialog:Dt,WaferInformationMenu:nr,ChipInformationMenu:cr,DbitInformationMenu:mr},setup:function(){return{waferInformationMenu:Jn,dbitInformationMenu:Qn,chipInformationMenu:Xn}}}),xr=br,_r=Object(te["a"])(xr,qn,Wn,!1,null,null,null),yr=_r.exports,wr=Object(v["f"])({text:"View",menu_width:200,menu:[{text:"DBiT Runs",click:function(){console.log("DBiT Runs click")},disabled:!0},{text:"Wafer Trace",click:function(){B.commit.setComponent({component:"WaferTrace"})}},{text:"Image Viewer",click:function(){B.commit.setComponent({component:"ImageViewer"})}},{text:"QC Viewer",click:function(){B.commit.setComponent({component:"QcViewer"})},disabled:!1}]}),kr=Object(v["a"])((function(){var e=[Na,za,wr,La,fn];return o.isAdmin.value&&e.push(Vn),e})),Or={File:Ua,Views:yr,About:dn,Admin:Ln},jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Change Password")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Old Password",rules:e.commonRules,"error-messages":e.oldPasswordError,type:"password"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{label:"New Password",rules:e.commonRules,type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("v-text-field",{attrs:{label:"Confirm New Password",rules:e.commonRules,"error-messages":e.confirmNewPasswordError,type:"password"},model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.changePassword}},[e._v(" Set ")])],1)],1)},Rr=[],Cr=Object(v["c"])({name:"ChangePasswordMenu",setup:function(e,t){var a=Object(v["a"])((function(){return B.state.client})),n=Object(v["g"])(!1),r=[function(e){return!!e||"Field cannot be empty"}],i=Object(v["g"])(null),u=Object(v["g"])(null);Object(v["h"])(i,(function(){u.value=null}));var o=Object(v["g"])(null),l=Object(v["g"])(null),s=Object(v["a"])((function(){return null!==o.value&&null!==l.value&&o.value!==l.value?"Passwords don't match":null}));function c(){t.emit("close")}function p(){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value&&i.value&&o.value){e.next=2;break}return e.abrupt("return");case 2:return t={old_password:i.value,new_password:o.value},e.next=5,a.value.changePassword(t);case 5:if(n=e.sent,!1!==n){e.next=9;break}return u.value="Incorrect password",e.abrupt("return");case 9:c(),ke.dispatch({text:"Password Successfully Changed"});case 11:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return{formValid:n,commonRules:r,oldPassword:i,oldPasswordError:u,newPassword:o,confirmNewPassword:l,confirmNewPasswordError:s,closeMenu:c,changePassword:p}}}),Mr=Cr,Sr=Object(te["a"])(Mr,jr,Rr,!1,null,null,null),Ar=Sr.exports,Fr={"--bar-button-hover-bkg":Ot["a"].grey.lighten2,"--bar-button-open-color":Ot["a"].grey.darken3,"--bar-button-open-bkg":Ot["a"].grey.lighten2,"--bar-menu-item-hover-bkg":Ot["a"].grey.lighten2},Ir=Object(v["c"])({name:"Appbar",components:Object(O["a"])(Object(O["a"])({VueFileToolbarMenu:kt["a"]},Or),{},{ChangePasswordMenu:Ar}),setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){var e,t;return null===(e=B.state.client)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username})),r=Object(v["a"])((function(){var e;return null===(e=B.state.client)||void 0===e?void 0:e.urlPostfix})),i=Object(v["a"])((function(){return Fr})),u=Object(v["a"])((function(){return t.root.$route})),o=Object(v["a"])((function(){return B.state.currentComponent})),l=Object(v["g"])(!1),s=Object(v["g"])(!1),c=Object(v["a"])((function(){return B.state.subMenu}));function p(){var e={component:"AdminPanel",params:{action:"new_run",results_id:null}},t=tt(u.value,e);a.push(t)}function d(){"/"!==u.value.fullPath&&a.push("/")}return{filemenu:kr,filemenuStyle:i,components:Or,redirectToRunAdding:p,loggedIn:ut,logout:ct,user:n,currentRoute:u,userMenu:l,changePasswordMenu:s,subMenu:c,urlPostfix:r,redirectToVisual:d,component:o,resolveAuthGroup:pt}}}),Dr=Ir,Tr=(a("f5dd"),Object(te["a"])(Dr,yt,wt,!1,null,null,null)),Er=Tr.exports,Pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{staticClass:"noScroll",attrs:{loading:0==e.genes.length,disabled:0==e.genes.length,id:"noScrollId",items:e.filteredGenes,outlined:!1,multiple:"",dense:"",clearable:"",placeholder:"",label:e.labelValue,"allow-overflow":!1,chips:"","cache-items":!1,color:"blue-grey lighten-2","item-text":"name","item-value":"name","search-input":e.searchInput,"menu-props":{closeOnContentClick:!0},width:"100%","small-chips":""},on:{paste:e.handlePaste,"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},change:e.onGenelistChanged,focus:e.cleanAuto,blur:e.cleanInput},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.name)+" ")]}},{key:"selection",fn:function(t){return[a("v-chip",{ref:t.item.name,attrs:{id:t.item.name,close:"",small:"",color:e.autoGenes.includes(t.item.name)?"warning":"rgb(0, 0, 0, .05)"},on:{click:function(a){return a.stopPropagation(),e.updateTrack(t.item.name)},"click:close":function(a){return e.remove(t.item)}}},[e._v(e._s(t.item.name)+" ")])]}},{key:"prepend",fn:function(){return[a("input",{ref:"filegac",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.readFile()},click:e.resetFile}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n2",staticStyle:{"min-width":"0"},attrs:{id:"no-background-hover",elevation:"0",color:"transparent",medium:""},on:{click:function(t){return e.$refs.filegac.click()}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-upload")])],1)]}}])},[a("span",[e._v("Upload gene IDs")])])]},proxy:!0},e.selectedGenes.length>0?{key:"append-outer",fn:function(){return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n1",staticStyle:{padding:"0","min-width":"0"},attrs:{id:"no-background-hover",elevation:"0",color:"transparent",medium:""},on:{click:e.collapseGene}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-menu")])],1)]}}],null,!1,3850458577)},[a("span",[e._v("Open/Collapse")])]),a("v-btn",{staticClass:"mt-n1",attrs:{id:"no-background-hover",color:"primary",medium:"",text:""},on:{click:e.showGene}},[e._v("Show")]),a("div",{staticClass:"customCheck"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-simple-checkbox",e._g(e._b({attrs:{label:"",color:"secondary","hide-details":"",dense:""},model:{value:e.de_select,callback:function(t){e.de_select=t},expression:"de_select"}},"v-simple-checkbox",r,!1),n))]}}],null,!1,3370899872)},[a("span",[e._v("(De)Select All")])])],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n1",attrs:{medium:"",text:"",id:"averageIndButton"},on:{click:function(t){e.avgInd=!e.avgInd}}},"v-btn",r,!1),n),[e._v(e._s(e.avgInd?"Ind":"Avg")+" ")])]}}],null,!1,4256409343)},[a("span",[e._v("Average<->Individual")])])]},proxy:!0}:null],null,!0),model:{value:e.selectedGenes,callback:function(t){e.selectedGenes=t},expression:"selectedGenes"}})},Br=[],Ur=(a("2ca0"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),Nr=Object(v["c"])({name:"GeneAutoComplete",props:["gene_list","gene_button","search_bar_enabled"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return B.state.client})),Object(v["a"])((function(){return t.root.$route}));var a=Object(v["g"])([]),n=Object(v["g"])([]),r=Object(v["g"])(null),i=Object(v["a"])((function(){return e.gene_list})),u=Object(v["a"])((function(){return e.gene_button})),o=Object(v["g"])([]),l=Object(v["g"])(!1),s=Object(v["g"])(!1),c=Object(v["g"])("Enter ID"),p=Object(v["g"])(!1),d=Object(v["g"])(!1),f=Object(v["g"])(!1),g=Object(v["g"])(32),h=Object(v["g"])(0),m=Object(v["g"])([]),b=Object(v["g"])(!1),x=Object(v["g"])([]);function _(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.value.length>0&&(n.value=o.value.filter((function(e){return a.value.includes(e.name)})));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){return O.apply(this,arguments)}function O(){return O=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.value=null;case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e){return R.apply(this,arguments)}function R(){return R=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:s.value=!0,setTimeout((function(){n.value=o.value.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())||a.value.includes(e.name)})),s.value=!1}),500);case 4:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function C(e){return M.apply(this,arguments)}function M(){return M=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.emit("changed",a);case 1:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return A=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:n=e.sent,i=n.split(/[,\s]+/),u=i.map((function(e){return e.replace(/[,\\/#!$%^&*;:{}=_`~()@'"\r\n\s]/g,"")})),u.forEach((function(e,t){var n,i=e,u=e.toLowerCase(),l=u.charAt(0).toUpperCase()+u.slice(1);n=1===o.value.filter((function(e){return e.name===i})).length?i:1===o.value.filter((function(e){return e.name===l})).length?l:null,a.value.includes(n)||null===n||(r.value=n,a.value.push(n))})),C(a.value),r.value=null;case 8:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return I=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value=!0,t.emit("sentgenes",m.value);case 2:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function D(e){return T.apply(this,arguments)}function T(){return T=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m.value.includes(t)?(a=m.value.indexOf(t),a>-1&&m.value.splice(a,1)):m.value.push(t);case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function E(e){if(m.value.includes(e.name)){var t=m.value.indexOf(e.name);t>-1&&m.value.splice(t,1)}var n=a.value.filter((function(t){return t!==e.name}));a.value=n,r.value="",C(a.value)}function P(){b.value=!b.value;var e=document.querySelector(".noScroll"),t=e.querySelector(".v-select__selections");b.value?(t.style.height="32px",t.style.overflow="auto"):(t.style.height="auto",t.style.overflow="none")}function U(){var e=t.refs.filegac.files[0],a=new FileReader;e.type.includes("csv")?(a.onload=function(e){x.value=[e.target.result]},a.onerror=function(e){return console.log(e)},a.readAsText(e)):ke.dispatch({text:"Wrong file type must be csv",options:{right:!0,color:"error"}})}function N(e){var t=e.target;t.value=""}return Object(v["h"])(r,(function(e){e&&j(e)})),Object(v["h"])(p,(function(e){e?a.value.forEach((function(e,a){m.value.includes(e)||(t.refs[e].toggle(),m.value.push(e))})):(a.value.forEach((function(e,a){m.value.includes(e)&&t.refs[e].toggle()})),m.value=[])})),Object(v["h"])(d,(function(e){t.emit("avgind",d.value)})),Object(v["h"])(i.value,(function(e){o.value=e})),Object(v["h"])(u.value,(function(e){var n=e[0];if(!a.value.includes(n)&&"string"===typeof n){r.value=n,a.value.push(n),C(a.value);var i=new MutationObserver((function(e){document.getElementById("".concat(n))&&(t.refs[n].toggle(),i.disconnect())}));i.observe(document.body,{childList:!0,subtree:!0,characterDataOldValue:!0})}0===e.length&&(r.value="",a.value=[])})),Object(v["h"])(a,(function(e){0===a.value.length?(n.value=o.value,m.value=[],l.value=!1,c.value="Enter ID"):c.value=""})),Object(v["h"])(x,(function(e){var t=e[0].split(","),n=t.map((function(e){return e.replace(/[.,\\/#!$%^&*;:{}=_`~()@'"\s]/g,"")}));n.forEach((function(e,t){var n,i=e,u=e.toLowerCase(),l=u.charAt(0).toUpperCase()+u.slice(1);n=1===o.value.filter((function(e){return e.name===i})).length?i:1===o.value.filter((function(e){return e.name===l})).length?l:null,a.value.includes(n)||null===n||(r.value=n,a.value.push(n))})),C(a.value)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ur;case 2:case"end":return e.stop()}}),e)})))),{selectedGenes:a,filteredGenes:n,searchInput:r,autocompleteLoading:s,showFlag:l,labelValue:c,de_select:p,clicked:f,paddingValue:g,newRowCounter:h,autoGenes:m,valueCollapse:b,fileContent:x,avgInd:d,genes:o,querySelections:j,onGenelistChanged:C,remove:E,showGene:F,updateTrack:D,collapseGene:P,readFile:U,resetFile:N,handlePaste:S,cleanAuto:_,cleanInput:w}}}),zr=Nr,Gr=(a("a173"),Object(te["a"])(zr,Pr,Br,!1,null,"0ee6a4b8",null)),Lr=Gr.exports,Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"dataTable",attrs:{dense:"","items-per-page":999,"hide-default-footer":"","hide-default-header":"",items:e.gene,headers:e.cluster,loading:e.loading},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.props;return e._l(n.headers,(function(t){return a("th",{key:t.text},["Anti"==t.text?[1==t.key?[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v("UP")])]:[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v("DOWN")])]]:[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v(e._s(t.text))])]],2)}))}},{key:"item",fn:function(t){return[a("tr",e._l(t.item,(function(t,n){return a("td",{key:n},["number"==typeof t?[e._v(" "+e._s(t)+" ")]:[a("v-btn",{attrs:{text:"","x-small":"",dense:""},on:{click:function(a){return e.sendGene(t)}}},[e._v(e._s(t))])]],2)})),0)]}}])})},$r=[],qr=new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Wr=Object(v["c"])({name:"GeneDataTable",props:["gene","clusters","lengthClust","loading","colormap"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return B.state.client})),Object(v["a"])((function(){return t.root.$route})),Object(v["a"])((function(){return e.gene}));var a=Object(v["a"])((function(){return e.clusters}));Object(v["a"])((function(){return e.lengthClust})),Object(v["a"])((function(){return e.loading})),Object(v["a"])((function(){return e.colormap}));function n(e){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.emit("sentGene",a);case 1:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function i(e){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"Anti"===n&&(a.value[0].key*=-1),t.emit("sentCluster",n);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qr;case 2:case"end":return e.stop()}}),e)})))),{cluster:a,sendGene:n,sendCluster:i}}}),Hr=Wr,Jr=(a("6bca"),Object(te["a"])(Hr,Vr,$r,!1,null,"07ba6f24",null)),Xr=Jr.exports,Qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:"",loading:e.loading}},[a("v-card-text",[a("div",{attrs:{id:e.pageId}})])],1)},Yr=[],Kr=a("2909"),Zr=(a("8a79"),a("841c"),a("4e82"),a("820e"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),ei=Object(v["c"])({name:"TrackBrowser",props:{value:{type:String,required:!1,default:null},search_key:{type:String,required:!1,default:null},params:{type:Object,required:!1,default:null},metadata:{type:String,required:!0,default:null}},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return B.state.client})),n=Object(v["a"])((function(){return t.root.$route})),r=Object(v["g"])(),i=Object(v["g"])(e.search_key),u=Object(v["a"])((function(){return e.search_key})),o=Object(v["a"])((function(){return e.metadata})),l=Object(v["g"])([]),s=(Object(v["g"])([]),Object(v["g"])(null),Object(v["g"])({})),c="svgHolder-".concat(Ze()),p=Object(v["g"])(),d=Object(v["g"])(),f={homo_sapiens:"grch38",rattus_norvegicus:"rn6",mus_musculus:"mm10"},g=[],h=Object(v["g"])(!1);function m(e){var t=[];M.a.each(e,(function(e){if(e.key.includes(".2bit")){var a=e.key.split("/").reverse()[0].split(".")[0],n={id:a,name:a,desc:e.key,twoBitURI:e.href,tier_type:"sequence"};t.push(n)}})),M.a.each(e,(function(e){if(e.key.includes(".bed")){var a=e.key.split("/").reverse()[0].split(".")[0],n={id:a,name:a,desc:e.key,uri:e.href,tier_type:"memstore",payload:"bed"};t.push(n)}})),M.a.each(e,(function(a){if(a.key.includes(".bb")){var n=e.filter((function(e){return e.key.endsWith(".ix")})),r=Object(Pe["a"])(n,1),i=r[0].href,u=a.key.split("/").reverse()[0].split(".")[0],o={id:u,name:u,desc:a.key,bwgURI:a.href,stylesheet_uri:"//www.biodalliance.org/stylesheets/gencode.xml",tier_type:"bb",collapseSuperGroups:!0,trixURI:i};t.push(o)}})),M.a.each(e,(function(e,a){if(e.key.includes(".bw")){var n=e.key.split("/").reverse()[0].split(".")[0],r={id:n,name:n,desc:e.key,bwgURI:e.href,style:[{type:"default",style:{glyph:"HISTOGRAM",FGCOLOR:s.value[n],BGCOLOR:s.value[n],HEIGHT:30,id:"style1"}}],noDownsample:!0,tier_type:"bw"};t.push(r)}})),d.value.sources=t}function b(e){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,s,v,g,h,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return p.value=o.value,n="mm10",d.value={chr:"1",viewStart:0,viewEnd:1e6,maxViewWidth:1e7,pageName:c,coordSystem:{speciesName:n,auth:"",ucscName:f[p.value]},onFirstRender:function(){console.log("Rendered")}},r="atx-cloud-dev",i={path:"data",filter:["".concat(t,"/tracks")]},u={bucket:"atx-track-host",path:"ref",filter:["".concat(f[p.value])]},e.next=10,a.value.getFileList(i);case 10:return s=e.sent,s.sort((function(e,t){if(null===e.match(/C\d+/)||null===t.match(/C\d+/))return 0;var a=e.match(/C\d+/)[0],n=t.match(/C\d+/)[0],r=parseFloat(a.split("C")[1]),i=parseFloat(n.split("C")[1]);return r<i?-1:r>i?1:0})),e.next=14,a.value.getFileList(u);case 14:return v=e.sent,g=s.concat.apply(s,Object(Kr["a"])(v)),h=g.filter((function(e){return e.includes(".bw")||e.includes(".bb")||e.includes(".2bit")||e.includes(".bed")||e.endsWith(".ix")||e.endsWith(".ixx")})),b=h.map((function(e){var t=null;a.value&&(t=e.endsWith(".ixx")||e.endsWith(".2bit")||e.endsWith(".ix")||e.endsWith(".bb")?a.value.downloadByLinkPublic(r,e):a.value.downloadByLink(e,3600));var n={key:e,href:t};return n})),e.next=20,Promise.allSettled(b.map((function(e){return e.href}))).then((function(e){M.a.each(e,(function(e,t){b[t].href=e.value.msg}))})).finally((function(){}));case 20:l.value=b,m(l.value);case 22:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function _(e){d.value.sources.forEach((function(t,a){"bw"===t.tier_type&&(d.value.sources[a].style=[{type:"default",style:{glyph:"HISTOGRAM",FGCOLOR:e[t.id],BGCOLOR:e[t.id],HEIGHT:30,id:"style1"}}])}))}function y(e){r.value.search(i.value,(function(e){e||ke.dispatch({text:"Expression ".concat(i.value," found"),options:{right:!0,color:"success"}})}),{})}function w(e,t){return O.apply(this,arguments)}function O(){return O=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return h.value=!0,e.next=3,b(t);case 3:return _(a),e.next=6,new window.Browser(d.value);case 6:r.value=e.sent,h.value=!1;case 8:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return M.a.forIn(f,(function(e,t){g.push(t)})),Object(v["h"])(u,(function(e){i.value=e,y(null)})),Object(v["h"])(h,(function(e){t.emit("loading_value",e)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Zr;case 2:case"end":return e.stop()}}),e)})))),{currentRoute:n,species:g,selectedSpecies:p,pageId:c,search:i,loading:h,metadataFromParents:o,onClickSearch:y,reload:w}}}),ti=ei,ai=Object(te["a"])(ti,Qr,Yr,!1,null,null,null),ni=ai.exports,ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!=e.runId?a("v-row",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],attrs:{"no-gutters":""}},[a("v-col",{staticClass:"shrinkCol",attrs:{cols:"12",sm:"1"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{flat:"",height:"50vh",width:"100%"}},[a("v-card-text",[a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:e.resetScaleAndPos}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-expand")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScale("plus")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-plus")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScale("neg")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-minus")])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"5",id:"stageParentDualAtac"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{loading:e.loading,flat:"",height:"50vh",align:"center"},on:{mousedown:e.mouseDownOnStageLeft,mousemove:e.mouseMoveOnStageLeft,mouseup:e.mouseUpOnStageLeft,mouseleave:e.hideToolTipS}},[a("div",{style:{width:"max-content",position:"absolute","z-index":"999","background-color":"white",opacity:"0.7",visibility:e.visibility,top:e.TTposition[1],left:e.TTposition[0],"border-radius":"3px","font-size":"12px","text-align":"left"},attrs:{id:"toolTipSpatial"}}),a("svg",{attrs:{id:"svgSpatial",width:e.konvaConfigLeft.width,height:e.konvaConfigLeft.height,viewBox:"0 0 "+e.svg_spatial_wh[0]+" "+e.svg_spatial_wh[1]}},[a("svg",{staticStyle:{"pointer-events":"bounding-box"},attrs:{id:"spatialGroup",x:"30",y:"30"}})])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"10"}},[e.isClusterView||e.spatialRun?e._e():[a("div",{style:{"background-image":e.colorBarmap,display:"flex"}},e._l(e.stepArray,(function(t){return a("div",{key:""+t,style:{color:e.colorbarText,"font-size":"18px","font-weight":"bold",width:"20%","text-align":"center"}},[e._v(" "+e._s(t)+" ")])})),0)]],2)],1)],1),a("v-col",{staticClass:"shrinkCol",attrs:{cols:"12",sm:"1"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{flat:"",height:"50vh",width:"100%"}},[a("v-card-text",[a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:e.resetScaleAndPosUMAP}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-expand")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScaleUMAP("plus")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-plus")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScaleUMAP("neg")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-minus")])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{loading:e.loading,flat:"",height:"50vh"},on:{mousedown:e.mouseDownOnStageRight,mousemove:e.mouseMoveOnStageRight,mouseup:e.mouseUpOnStageRight,mouseleave:e.hideToolTipU}},[a("div",{style:{width:"max-content",position:"absolute","z-index":"999","background-color":"white",opacity:"0.7",visibility:e.visibilityUmap,top:e.TTpositionUmap[1],left:e.TTpositionUmap[0],"border-radius":"3px","font-size":"12px","text-align":"left"},attrs:{id:"toolTipUmap"}},[e._v(e._s(e.toolTipTextUmap))]),a("svg",{attrs:{id:"svgUmap",width:e.konvaConfigRight.width,height:e.konvaConfigRight.height,viewBox:"0 0 "+e.svg_umap_wh[0]+" "+e.svg_umap_wh[1]}},[a("svg",{staticStyle:{"pointer-events":"bounding-box"},attrs:{id:"umapGroup",x:"30",y:"30"}})])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"10"}},[e.isClusterView||e.spatialRun?e._e():[a("div",{style:{"background-image":e.colorBarmap,display:"flex"}},e._l(e.stepArray,(function(t){return a("div",{key:""+t,style:{color:e.colorbarText,"font-size":"18px","font-weight":"bold",width:"20%","text-align":"center"}},[e._v(" "+e._s(t)+" ")])})),0)]],2)],1)],1)],1):e._e()},ii=[],ui=(a("b65f"),a("b680"),a("595c")),oi=a.n(ui),li=new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),si=[{text:"ID",value:"id"}],ci=[{text:"Cluster",value:"name"}];function pi(e,t,a){var n=Math.min.apply(Math,Object(Kr["a"])(t))+12*a,r=Math.max.apply(Math,Object(Kr["a"])(t))+12*a,i=e.length,u=[];return M.a.each(t,(function(t){var o=t+12*a,l=(o-n)/(r-n)*(i-1),s=Math.trunc(l);u.push(e[s])})),u}var vi=Object(v["c"])({name:"AtxAtacViewer",props:["filename","selected_genes","heatmap","background","task","queue","standalone","lasso","rect","manualColor","clickedCluster","checkBoxCluster","indFlag","geneOmotif","idOfRun","antiKey","userBoundary","assay_flag","regulonsFlag","channel"],setup:function(e,t){var a,n,r=Object(v["a"])((function(){return B.state.client})),i=Object(v["g"])(),u=Object(v["a"])((function(){return e.idOfRun})),o=Object(v["a"])((function(){return e.channel})),l=Object(v["g"])(""),s=Object(v["a"])((function(){return e.filename})),c=Object(v["a"])((function(){return e.manualColor})),p=Object(v["g"])(),d=Object(v["g"])(null),f=Object(v["a"])((function(){return e.task})),g=Object(v["a"])((function(){return e.queue})),h=Object(v["g"])(),m=Object(v["g"])(!1),b=Object(v["g"])([]),x=Object(v["a"])((function(){return e.selected_genes})),_=Object(v["g"])(null),y=Object(v["g"])(null),w=window.innerWidth,O=window.innerHeight,j=Object(v["g"])({x:0,y:0,width:w,height:O,draggable:!0}),R=Object(v["g"])({x:0,y:0,width:w,height:O,draggable:!0}),C=Object(v["g"])(.75),S=Object(v["g"])(.75),A=Object(v["g"])(!0),F=Object(v["g"])(!1),I=Object(v["g"])(1e4),D=Object(v["g"])(0),T=Object(v["g"])(),E=Object(v["g"])([]),P=Object(v["g"])([]),U=Object(v["g"])([]),N=Object(v["g"])("darkgray"),z=Object(v["a"])((function(){return e.background?e.background:"black"})),G=Object(v["a"])((function(){return e.heatmap?e.heatmap:"jet"})),L=Object(v["g"])([]),V=Object(v["g"])(""),$=Object(v["g"])(null),q=Object(v["g"])([]),W=Object(v["a"])((function(){return e.lasso})),H=Object(v["a"])((function(){return e.rect})),J=Object(v["g"])(!1),X=Object(v["g"])(!1),Q=Object(v["g"])([]),Y=Object(v["g"])([]),K=Object(v["g"])(),Z=Object(v["g"])(),ee=Object(v["g"])(),te=Object(v["g"])("white"),ae=Object(v["g"])([]),ne=Object(v["g"])([]),re=Object(v["g"])(0),ie=Object(v["g"])(!1),ue=Object(v["g"])({}),oe=Object(v["g"])({}),le=Object(v["a"])((function(){return e.clickedCluster})),se=Object(v["a"])((function(){return e.checkBoxCluster})),ce=Object(v["a"])((function(){return e.antiKey})),pe=Object(v["a"])((function(){return e.indFlag})),ve=Object(v["g"])({}),de=Object(v["g"])({}),fe=Object(v["g"])({}),ge=Object(v["g"])(0),he=Object(v["g"])(0),me=Object(v["g"])(0),be=Object(v["g"])(0),xe=Object(v["g"])(0),_e=Object(v["g"])(0),ye=Object(v["g"])(0),we=Object(v["g"])(0),Oe=Object(v["g"])([]),je=Object(v["a"])((function(){return e.geneOmotif})),Re=Object(v["a"])((function(){return e.userBoundary})),Ce=Object(v["g"])([]),Me=Object(v["g"])(""),Se=Object(v["g"])([]),Ae=Object(v["g"])([]),Fe=Object(v["g"])(),Ie=Object(v["g"])(),De=Object(v["g"])(),Te=Object(v["g"])(),Ee=Object(v["g"])([]),Be=Object(v["g"])([]),Ue=Object(v["g"])([0,0]),Ne=Object(v["g"])([0,0]),ze=Object(v["g"])([0,0]),Ge=Object(v["g"])([0,0]),Le=1,Ve=[],$e="",qe="",We=document.createElementNS("http://www.w3.org/2000/svg","path"),He=document.createElementNS("http://www.w3.org/2000/svg","path"),Je=document.createElementNS("http://www.w3.org/2000/svg","rect"),Xe=document.createElementNS("http://www.w3.org/2000/svg","rect"),Qe=Object(v["g"])(!1),Ye=(document.getElementById("toolTipSpatial"),document.getElementById("toolTipUmap"),Object(v["g"])("hidden")),Ke=Object(v["g"])("hidden"),et=Object(v["g"])(""),tt=Object(v["g"])(["0","0"]),nt=Object(v["g"])(["0","0"]),rt=Object(v["a"])((function(){return e.assay_flag})),it=Object(v["a"])((function(){return e.regulonsFlag})),ut=Object(v["g"])([]),ot=Object(v["g"])(!1),lt=Object(v["g"])(!1),st=0;function ct(){return pt.apply(this,arguments)}function pt(){return pt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.querySelector("#stageParentDualAtac"),t){e.next=3;break}return e.abrupt("return");case 3:a=t.offsetWidth,n=t.offsetHeight,j.value.width=a,j.value.height=n,R.value.width=a,R.value.height=n,Ue.value=[j.value.width,j.value.height],Ne.value=[R.value.width,R.value.height],r=document.getElementById("spatialGroup"),i=document.getElementById("umapGroup"),ze.value=[r.getBoundingClientRect().width,r.getBoundingClientRect().height],Ge.value=[i.getBoundingClientRect().width,i.getBoundingClientRect().height];case 15:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}function vt(e){var t=b.value.filter((function(t){return t!==e.name}));b.value=t}function dt(){var e=[],t={};if(lt.value){var a=Object.keys(oe.value),n=G.value;a.forEach((function(e,a){t[e]=n[a]}))}else M.a.each(G.value,(function(t,a){e.push(t)}));for(var r=0;r<_.value.spatial.length;r+=1){var i=document.getElementById("tixel".concat(r)),u=document.getElementById("tixelUmap".concat(r)),o=/\d+/g,l=void 0;if(l=lt.value?i?i.getAttribute("celltype"):"":i?i.getAttribute("cluster"):"",A.value||pe.value)if(lt.value){var s=i?i.getAttribute("celltype"):"";null===i||void 0===i||i.setAttribute("fill","".concat(t[s])),null===u||void 0===u||u.setAttribute("fill","".concat(t[s]))}else{var c=Number(l.match(o)[0])-1,p=e[c];null===i||void 0===i||i.setAttribute("fill","".concat(p)),null===u||void 0===u||u.setAttribute("fill","".concat(p))}else null===i||void 0===i||i.setAttribute("fill","".concat(ut.value[r])),null===u||void 0===u||u.setAttribute("fill","".concat(ut.value[r]));null===i||void 0===i||i.setAttribute("opacity","1.0"),null===u||void 0===u||u.setAttribute("opacity","1.0")}T.value=""}function ft(e,t){var a=!1;if(W.value)for(var n=Object(Pe["a"])(e,2),r=n[0],i=n[1],u=0,o=t.length-1;u<t.length;o=u+0,u+=1){var l=Object(Pe["a"])(t[u],2),s=l[0],c=l[1],p=Object(Pe["a"])(t[o],2),v=p[0],d=p[1],f=c>i!==d>i&&r<(v-s)*(i-c)/(d-c)+s;f&&(a=!a)}if(H.value){var g,h=Object(Pe["a"])(e,2),m=h[0],b=h[1];g="left"===ee.value?K.value[0].points:Z.value[0].points,m>=g[0]&&m<=g[0]+g[2]&&b>=g[1]&&b<=g[1]+g[3]&&(a=!0)}return a}function gt(){ae.value=[];var e=function(e){var t=!1;return"left"===ee.value&&K.value.forEach((function(a,n){W.value&&ft(e,at(a.points,2))&&(t=!0),H.value&&ft(e,[])&&(t=!0)})),"right"===ee.value&&Z.value.forEach((function(a,n){W.value&&ft(e,at(a.points,2))&&(t=!0),H.value&&ft(e,[])&&(t=!0)})),t},t=function(e){e.ownerSVGElement;var t="left"===ee.value?Fe.value.getAttribute("x"):Ie.value.getAttribute("x"),a="left"===ee.value?Fe.value.getAttribute("y"):Ie.value.getAttribute("y"),n={x:parseFloat(t)+parseFloat(e.cx.baseVal.value),y:parseFloat(a)+parseFloat(e.cy.baseVal.value)};return n},a=[];if("left"===ee.value)for(var n=0;n<_.value.spatial.length;n+=1){var r=document.getElementById("tixel".concat(n)),i=t(r);a.push(e([i.x,i.y]))}else for(var u=0;u<_.value.spatial.length;u+=1){var o=document.getElementById("tixelUmap".concat(u)),l=t(o);a.push(e([l.x,l.y]))}var s=a.filter((function(e){return e})).length;if(re.value=s,s<1)return ne.value=[],void dt();M.a.each(a,(function(e,t){var a=document.getElementById("tixel".concat(t)),n=document.getElementById("tixelUmap".concat(t));e?ae.value.push(t):(null===a||void 0===a||a.setAttribute("opacity","0.3"),null===n||void 0===n||n.setAttribute("opacity","0.2"))}))}function ht(e){var t=[],a={};if(lt.value){var n=Object.keys(oe.value),r=G.value;n.forEach((function(e,t){a[e]=r[t]}))}else M.a.each(G.value,(function(e,a){t.push(e)}));"darkgrey"===z.value?N.value="white":N.value="darkgrey";for(var i=0;i<_.value.spatial.length;i+=1){var u=document.getElementById("tixel".concat(i)),o=document.getElementById("tixelUmap".concat(i)),l=/\d+/g,s=void 0;if(s=lt.value?u?u.getAttribute("celltype"):"":u?u.getAttribute("cluster"):"",e.includes(s))if(A.value||pe.value)if(lt.value){var c=u?u.getAttribute("celltype"):"";null===u||void 0===u||u.setAttribute("fill","".concat(a[c])),null===o||void 0===o||o.setAttribute("fill","".concat(a[c]))}else{var p=Number(s.match(l)[0])-1,v=t[p];null===u||void 0===u||u.setAttribute("fill","".concat(v)),null===o||void 0===o||o.setAttribute("fill","".concat(v))}else null===u||void 0===u||u.setAttribute("fill","".concat(ut.value[i])),null===o||void 0===o||o.setAttribute("fill","".concat(ut.value[i]));else null===u||void 0===u||u.setAttribute("fill","".concat(N.value)),null===o||void 0===o||o.setAttribute("fill","".concat(N.value))}T.value=e,F.value=!0}function mt(e,t){for(var a=[],n=5,r=(e-t)/(n-1),i=0;i<n;i+=1)a.push(parseFloat((t+r*i).toFixed(2)));return a}function bt(e){return 0===Ce.value.length?e:e>parseFloat(Ce.value[0])?parseFloat(Ce.value[0]):e<parseFloat(Ce.value[0])&&e>parseFloat(Ce.value[1])?e:e<parseFloat(Ce.value[1])?parseFloat(Ce.value[1]):e}function xt(e){return 0===Ce.value.length||!(e>parseFloat(Ce.value[0]))&&(e<parseFloat(Ce.value[0])&&e>parseFloat(Ce.value[1])||!(e<parseFloat(Ce.value[1]))&&e)}function _t(){return yt.apply(this,arguments)}function yt(){return yt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,u,l,s,c,p,v,d,f,g,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Qe.value){e.next=2;break}return e.abrupt("return");case 2:t=o.value<=50?22:44,a=o.value<=50?30:58,n=j.value,r=n.width,i=n.height,u=R.value,l=u.width,s=u.height,c=Math.min(r/(me.value-ge.value),i/(be.value-he.value)),p=Math.min(l/(ye.value-xe.value),s/(we.value-_e.value)),v=Math.min(r,i)/(5*t)*C.value,d=Math.min(l,s)/(5*a)*S.value,f=C.value*c*ge.value-v,g=C.value*c*he.value-v,h=S.value*p*xe.value-d,m=S.value*p*_e.value-d,_.value.spatial.forEach((function(e,t){var a=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]),i=parseFloat(e[4]),u=document.getElementById("tixel".concat(t)),o=document.getElementById("tixelUmap".concat(t));u.setAttribute("cx","".concat(a*C.value*c-f)),u.setAttribute("cy","".concat(n*C.value*c-g)),u.setAttribute("r","".concat(v)),o.setAttribute("cx","".concat(r*S.value*p-h)),o.setAttribute("cy","".concat(i*S.value*p-m)),o.setAttribute("r","".concat(d))}));case 15:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}function wt(){return kt.apply(this,arguments)}function kt(){return kt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,l,s,c,p,v,d,f,g,h,m,b,x,y,w,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[],M.a.each(G.value,(function(e,t){a.push(e)})),n=o.value<=50?22:44,r=o.value<=50?30:58,i=j.value,u=i.width,l=i.height,s=R.value,c=s.width,p=s.height,v=Math.min(u/(me.value-ge.value),l/(be.value-he.value)),d=Math.min(c/(ye.value-xe.value),p/(we.value-_e.value)),f=Math.min(u,l)/(5*n)*C.value,g=Math.min(c,p)/(5*r)*S.value,60,30,h=C.value*v*ge.value-f,m=C.value*v*he.value-f,b=S.value*d*xe.value-g,x=S.value*d*_e.value-g,y="http://www.w3.org/2000/svg",Fe.value=document.getElementById("spatialGroup"),Ie.value=document.getElementById("umapGroup"),De.value=document.getElementById("svgSpatial"),Te.value=document.getElementById("svgUmap"),w=[],k=[],_.value.spatial.forEach((function(e,t){w.push(parseFloat(e[5])),k.push(parseFloat(e[6]));var n=parseFloat(e[1]),r=parseFloat(e[2]),i=parseFloat(e[3]),u=parseFloat(e[4]),o=/\d+/g,l=e[0],s=Number(l.match(o)[0])-1,c=document.createElementNS(y,"circle"),p=document.createElementNS(y,"circle");c.setAttribute("cx","".concat(n*C.value*v-h)),c.setAttribute("cy","".concat(r*C.value*v-m)),c.setAttribute("r","".concat(f)),c.setAttribute("fill","".concat(a[s])),c.setAttribute("id","tixel".concat(t)),c.setAttribute("cluster","".concat(e[0])),c.setAttribute("opacity","1.0"),p.setAttribute("cx","".concat(i*S.value*d-b)),p.setAttribute("cy","".concat(u*S.value*d-x)),p.setAttribute("r","".concat(g)),p.setAttribute("fill","".concat(a[s])),p.setAttribute("id","tixelUmap".concat(t)),p.setAttribute("cluster","".concat(e[0])),p.setAttribute("opacity","1.0"),0!==st&&(c.setAttribute("celltype","".concat(e[st])),p.setAttribute("celltype","".concat(e[st]))),ot.value&&(c.setAttribute("sample","".concat(e[7])),c.setAttribute("treatment","".concat(e[8])),p.setAttribute("sample","".concat(e[7])),p.setAttribute("treatment","".concat(e[8]))),Fe.value.appendChild(c),Ie.value.appendChild(p)})),ze.value=[Fe.value.getBoundingClientRect().width,Fe.value.getBoundingClientRect().height],Ge.value=[Ie.value.getBoundingClientRect().width,Ie.value.getBoundingClientRect().height],Qe.value=!0,t.emit("spatialCircleData",[w,k]);case 27:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function Ot(){return jt.apply(this,arguments)}function jt(){return jt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,o,l,s,c,p,v,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==_.value&&void 0!==_.value.spatial){e.next=2;break}return e.abrupt("return");case 2:F.value=!1,a=[],L.value=[],n=[],r=[],i=[],u={},lt.value?(o=Object.keys(oe.value),l=G.value,o.forEach((function(e,t){u[e]=l[t]}))):M.a.each(G.value,(function(e,t){n.push(e)})),r=oi()({colormap:"jet",nshades:64,format:"hex",alpha:1}),V.value="linear-gradient(to right, ".concat(r[0],", ").concat(r[16],", ").concat(r[32]," , ").concat(r[48],", ").concat(r[63],")"),U.value=n,D.value=-1e4,I.value=1e4,s=0,A.value||pe.value?(c=[],p=[],v=[],_.value.spatial.forEach((function(e,t){s=0,p.push(parseFloat(e[5])),v.push(parseFloat(e[6]));var r=parseFloat(e[1]),o=parseFloat(e[2]),l=/\d+/g,d=e[0],f=Number(d.match(l)[0])-1;c.push([r,o,e]);var g={cluster:e[0],ogx:r,ogy:o,total:0,genes:{}},h=document.getElementById("tixel".concat(t)),m=document.getElementById("tixelUmap".concat(t));if(lt.value?(null===h||void 0===h||h.setAttribute("fill","".concat(u[e[st]])),null===m||void 0===m||m.setAttribute("fill","".concat(u[e[st]]))):(null===h||void 0===h||h.setAttribute("fill","".concat(n[f])),null===m||void 0===m||m.setAttribute("fill","".concat(n[f]))),b.value.forEach((function(e,a){s+=parseFloat(Oe.value[a][t]),g.genes[e]=parseFloat(Oe.value[a][t])})),pe.value){g.total=s,i.push(bt(s));var x=s/b.value.length;x>D.value&&(D.value=x),x<I.value&&(I.value=x)}a.push(g)})),A.value?t.emit("spatialCircleData",[p,v]):t.emit("spatialCircleData",a)):(_.value.spatial.forEach((function(e,t){s=0;var n=parseFloat(e[1]),r=parseFloat(e[2]),u={cluster:e[0],ogx:n,ogy:r,total:0,genes:{}};b.value.forEach((function(e,a){s+=parseFloat(Oe.value[a][t]),u.genes[e]=parseFloat(Oe.value[a][t])})),u.total=s,i.push(bt(s));var o=s/b.value.length;o>D.value&&(D.value=o),o<I.value&&(I.value=o),a.push(u)})),d=pi(r,i,b.value.length),t.emit("spatialCircleData",a),a.forEach((function(e,t){var n=xt(a[t].total),r=n?d[t]:N.value;ut.value.push(r);var i=document.getElementById("tixel".concat(t)),u=document.getElementById("tixelUmap".concat(t));null===i||void 0===i||i.setAttribute("fill","".concat(r)),null===u||void 0===u||u.setAttribute("fill","".concat(r))})),L.value=mt(0!==Ce.value.length?parseFloat(Ce.value[0]):D.value,0!==Ce.value.length?parseFloat(Ce.value[1]):I.value),t.emit("maxMinCount",[D.value.toString(),I.value.toString()])),pe.value&&(t.emit("singleCircleData",{coords:a,intense:r}),t.emit("sendColorBar",{color:V.value,maxMin:[ge.value,he.value,me.value,be.value],tixelColor:r}),t.emit("maxMinCount",[D.value.toString(),I.value.toString()])),ie.value=!1;case 19:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}var Rt=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.value.getTaskStatus(t);case 4:p.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ct(){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,i,o,l,s,c,p,v,d,f,g,h,b,x,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==_.value){e.next=30;break}return _.value={},a="data/".concat(u.value,"/h5/data.csv.gz"),e.next=5,r.value.getSpatialData(a);case 5:n=e.sent,_.value.spatial=n,i=[],o=[],l=[],s=[],c={},p={},8===_.value.spatial[0].length?st=7:9===_.value.spatial[0].length?ot.value=!0:10===_.value.spatial[0].length&&(ot.value=!0,st=9),_.value.spatial.forEach((function(e,t){e[0].includes("C")&&(i.push(parseFloat(e[1])),o.push(parseFloat(e[2])),l.push(parseFloat(e[3])),s.push(parseFloat(e[4])),Object.keys(c).includes(e[0])?c[e[0]]+=1:c[e[0]]=1,0!==st&&(Object.keys(p).includes(e[st])?p[e[st]]+=1:p[e[st]]=1))})),v=Object.keys(c),d=Object.keys(p),v.sort((function(e,t){if(null===e.match(/C\d+/)||null===t.match(/C\d+/))return 0;var a=e.match(/C\d+/)[0],n=t.match(/C\d+/)[0],r=parseFloat(a.split("C")[1]),i=parseFloat(n.split("C")[1]);return r<i?-1:r>i?1:0})),d.sort(),v.forEach((function(e,t){ue.value[e]=c[e]})),d.forEach((function(e,t){oe.value[e]=p[e]})),ge.value=Math.min.apply(Math,i),he.value=Math.min.apply(Math,o),me.value=Math.max.apply(Math,i),be.value=Math.max.apply(Math,o),xe.value=Math.min.apply(Math,l),_e.value=Math.min.apply(Math,s),ye.value=Math.max.apply(Math,l),we.value=Math.max.apply(Math,s),wt();case 30:if(null!==_.value.gene&&void 0!==_.value.gene){e.next=49;break}return f="data/".concat(u.value,"/h5/geneNames.txt.gz"),e.next=34,r.value.getGeneMotifNames(f);case 34:if(g=e.sent,_.value.gene=g,rt.value){e.next=42;break}return h="data/".concat(u.value,"/h5/motifNames.txt.gz"),e.next=40,r.value.getGeneMotifNames(h);case 40:b=e.sent,_.value.motif=b;case 42:if(!it.value){e.next=49;break}return x="data/".concat(u.value,"/h5/eRegulonNames.txt.gz"),e.next=46,r.value.getGeneMotifNames(x);case 46:y=e.sent,y.sort(),_.value.eRegulon=y;case 49:m.value=!1,"gene"===je.value?(t.emit("totalClust",ue.value),lt.value=!1,t.emit("totalGM",_.value.gene)):"motif"===je.value?(t.emit("totalClust",ue.value),lt.value=!1,t.emit("totalGM",_.value.motif)):"eRegulon"===je.value&&(t.emit("totalClust",oe.value),t.emit("totalGM",_.value.eRegulon),0!==st?(lt.value=!0,Ot()):lt.value=!1);case 51:case"end":return e.stop()}}),e)}))),Mt.apply(this,arguments)}function St(){return At.apply(this,arguments)}function At(){return At=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,i,u,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!(ae.value.length>0)){e.next=35;break}return m.value=!0,$.value=null,ie.value=!0,a=f.value,n=g.value,i=[l.value,ae.value,ce.value],u={},e.next=13,r.value.postTask(a,i,u,n);case 13:return o=e.sent,e.next=16,Rt(o._id);case 16:if("SUCCESS"===p.value.status||"FAILURE"===p.value.status){e.next=25;break}return"PROGRESS"===p.value.status&&($.value="".concat(p.value.progress,"% - ").concat(p.value.position)),e.next=20,new Promise((function(e){d.value=window.setTimeout(e,1e3)}));case 20:return d.value=null,e.next=23,Rt(o._id);case 23:e.next=16;break;case 25:if("SUCCESS"===p.value.status){e.next=29;break}return ke.dispatch({text:"Worker failed in AtxAtacViewer",options:{right:!0,color:"error"}}),m.value=!1,e.abrupt("return");case 29:$.value=p.value.status,s=p.value.result,t.emit("highlightedId",{ids:ae.value,genes:s.top_selected}),m.value=!1,e.next=37;break;case 35:return e.next=37,ct();case 37:e.next=44;break;case 39:e.prev=39,e.t0=e["catch"](2),console.log(e.t0),m.value=!1,ke.dispatch({text:e.t0,options:{right:!0,color:"error"}});case 44:ie.value=!1;case 45:case"end":return e.stop()}}),e,null,[[2,39]])}))),At.apply(this,arguments)}function Ft(){return It.apply(this,arguments)}function It(){return It=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="","gene"===je.value?(a="data/".concat(u.value,"/h5/summations/geneSummation"),n=_.value.gene):"motif"===je.value?(a="data/".concat(u.value,"/h5/summations/motifSummation"),n=_.value.motif):"eRegulon"===je.value&&(a="data/".concat(u.value,"/h5/summations/eRegulonSummation"),n=_.value.eRegulon),i=b.value.map((function(e){return n.indexOf(e)})),e.next=5,null===(t=r.value)||void 0===t?void 0:t.getSummation(a,i);case 5:o=e.sent,l=[],o.forEach((function(e,t){l.push(e.split(","))})),Oe.value=l;case 9:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function Dt(){$e="",qe="",We.setAttribute("d",""),He.setAttribute("d",""),Je.setAttribute("x","0"),Je.setAttribute("y","0"),Je.setAttribute("width","0"),Je.setAttribute("height","0"),Xe.setAttribute("x","0"),Xe.setAttribute("y","0"),Xe.setAttribute("width","0"),Xe.setAttribute("height","0"),Z.value=[],Y.value=[],K.value=[],Q.value=[],dt()}var Tt=function(e){Ve.push(e);while(Ve.length>Le)Ve.shift()},Et=function(e){var t=Ve.length;if(t%2===1||t>=Le){var a,n,r=0,i=0,u=0;for(n=e;n<t;n+=1)u+=1,a=Ve[n],r+=a.x,i+=a.y;return{x:r/u,y:i/u}}return{x:"no"}},Pt=function(){var e=Et(0);if("no"!==e.x){J.value&&($e+=" L".concat(e.x," ").concat(e.y)),X.value&&(qe+=" L".concat(e.x," ").concat(e.y));for(var t="",a=2;a<Ve.length;a+=2)e=Et(a),t+=" L".concat(e.x," ").concat(e.y);J.value&&We.setAttribute("d",$e+t),X.value&&He.setAttribute("d",qe+t)}};function Bt(e,t,a){var n=document.getElementById("toolTipSpatial");while(null!==n&&void 0!==n&&n.firstChild)null===n||void 0===n||n.firstChild.remove();if(ot.value){var r=[e,t,a],i=[lt.value?"CellType":"Cluster","Run_ID","Condition"];r.forEach((function(e,t){var a=document.createElement("p");a.innerText="".concat(i[t],": ").concat(r[t]),a.setAttribute("style","margin: 0; padding: 0"),null===n||void 0===n||n.appendChild(a)}))}else{var u=document.createElement("p");u.innerText=lt.value?"CellType: ".concat(e):"Cluster: ".concat(e),u.setAttribute("style","margin: 0; padding: 0"),null===n||void 0===n||n.appendChild(u)}Ye.value="visible"}function Ut(e){et.value=lt.value?"CellType: ".concat(e):"Cluster: ".concat(e),Ke.value="visible"}function Nt(){Ye.value="hidden"}function zt(){Ke.value="hidden"}function Gt(e){J.value=!0,Ye.value="hidden";var t=De.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var n=De.value.getScreenCTM(),r=t.matrixTransform(n.inverse());if(W.value)ee.value="left",Dt(),We.setAttribute("fill","none"),We.setAttribute("stroke","#6ffc03"),We.setAttribute("stroke-width","1"),We.getAttribute("id")||We.setAttribute("id","spa"),Tt({x:r.x,y:r.y}),$e+="M".concat(r.x," ").concat(r.y),We.setAttribute("d",$e),De.value.appendChild(We);else if(H.value)ee.value="left",Dt(),Je.setAttribute("x","".concat(r.x)),Je.setAttribute("y","".concat(r.y)),Je.setAttribute("fill","none"),Je.setAttribute("stroke","#6ffc03"),Je.setAttribute("width","0"),Je.setAttribute("height","0"),De.value.appendChild(Je),a=[r.x,r.y];else{Se.value=[r.x,r.y];var i=Fe.value.getAttribute("x"),u=Fe.value.getAttribute("y");Ee.value=[parseFloat(i),parseFloat(u)]}}function Lt(e){X.value=!0,Ke.value="hidden";var t=Te.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=Te.value.getScreenCTM(),r=t.matrixTransform(a.inverse());if(W.value)ee.value="right",Dt(),He.setAttribute("fill","none"),He.setAttribute("stroke","#6ffc03"),He.setAttribute("stroke-width","1"),He.getAttribute("id")||He.setAttribute("id","uma"),Tt({x:r.x,y:r.y}),qe+="M".concat(r.x," ").concat(r.y),He.setAttribute("d",qe),Te.value.appendChild(He),Y.value=[];else if(H.value)ee.value="right",Dt(),Xe.setAttribute("x","".concat(r.x)),Xe.setAttribute("y","".concat(r.y)),Xe.setAttribute("fill","none"),Xe.setAttribute("stroke","#6ffc03"),Xe.setAttribute("width","0"),Xe.setAttribute("height","0"),Te.value.appendChild(Xe),n=[r.x,r.y];else{Ae.value=[r.x,r.y];var i=Ie.value.getAttribute("x"),u=Ie.value.getAttribute("y");Be.value=[parseFloat(i),parseFloat(u)]}}function Vt(e){if(J.value){var t=De.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var n=De.value.getScreenCTM(),r=t.matrixTransform(n.inverse());if(W.value)Tt({x:r.x,y:r.y}),Pt(),Q.value.push(r.x),Q.value.push(r.y);else if(H.value){var i=Math.abs(r.x-a[0]),u=Math.abs(r.y-a[1]);r.x<a[0]&&Je.setAttribute("x","".concat(r.x)),r.y<a[1]&&Je.setAttribute("y","".concat(r.y)),Je.setAttribute("width","".concat(i)),Je.setAttribute("height","".concat(u))}else{var o=Math.abs(Se.value[0]-r.x),l=Math.abs(Se.value[1]-r.y),s=Se.value[0]<r.x?1:-1,c=Se.value[1]<r.y?1:-1;Fe.value.setAttribute("x","".concat(Ee.value[0]+o*s)),Fe.value.setAttribute("y","".concat(Ee.value[1]+l*c))}}else if("circle"===e.target.nodeName){var p=lt.value?7:5,v=lt.value?1:0;ot.value?Bt(e.target.attributes[p].value,e.target.attributes[7+v].value,e.target.attributes[8+v].value):Bt(e.target.attributes[p].value,"","");var d=["".concat(e.offsetX+10,"px"),"".concat(e.offsetY-13,"px")];tt.value=d}else"spatialGroup"!==e.target.id&&"circle"!==e.target.nodeName&&(Ye.value="hidden")}function $t(e){if(X.value){var t=Te.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=Te.value.getScreenCTM(),r=t.matrixTransform(a.inverse());if(W.value)Tt({x:r.x,y:r.y}),Pt(),Y.value.push(r.x),Y.value.push(r.y);else if(H.value){var i=Math.abs(r.x-n[0]),u=Math.abs(r.y-n[1]);r.x<n[0]&&Xe.setAttribute("x","".concat(r.x)),r.y<n[1]&&Xe.setAttribute("y","".concat(r.y)),Xe.setAttribute("width","".concat(i)),Xe.setAttribute("height","".concat(u))}else{var o=Math.abs(Ae.value[0]-r.x),l=Math.abs(Ae.value[1]-r.y),s=Ae.value[0]<r.x?1:-1,c=Ae.value[1]<r.y?1:-1;Ie.value.setAttribute("x","".concat(Be.value[0]+o*s)),Ie.value.setAttribute("y","".concat(Be.value[1]+l*c))}}else if("circle"===e.target.nodeName){Ut(e.target.attributes[lt.value?7:5].value);var p=["".concat(e.offsetX+10,"px"),"".concat(e.offsetY-13,"px")];nt.value=p}else"umapGroup"!==e.target.id&&"circle"!==e.target.nodeName&&(Ke.value="hidden")}function qt(e){if(J.value=!1,W.value){var t={key:"lasso",points:Q.value};K.value.push(t),Q.value=[],gt(),re.value>0&&St()}if(H.value){var a={key:"rect",points:[parseFloat(Je.getAttribute("x")),parseFloat(Je.getAttribute("y")),parseFloat(Je.getAttribute("width")),parseFloat(Je.getAttribute("height"))]};K.value.push(a),gt(),re.value>0&&St()}}function Wt(e){if(X.value=!1,W.value){var t={key:"lasso",points:Y.value};Z.value.push(t),Y.value=[],gt(),re.value>0&&St()}if(H.value){var a={key:"rect",points:[parseFloat(Xe.getAttribute("x")),parseFloat(Xe.getAttribute("y")),parseFloat(Xe.getAttribute("width")),parseFloat(Xe.getAttribute("height"))]};Z.value.push(a),gt(),re.value>0&&St()}}function Ht(e){i.value=e}function Jt(e){var t=[];t="plus"===e?[Ue.value[0]-20,Ue.value[1]-20]:[Ue.value[0]+20,Ue.value[0]+20],Ue.value=t}function Xt(e){var t=[];t="plus"===e?[Ne.value[0]-20,Ne.value[1]-20]:[Ne.value[0]+20,Ne.value[0]+20],Ne.value=t}function Qt(e){var t=[j.value.width,j.value.height];Ue.value=t}function Yt(e){var t=[R.value.width,R.value.height];Ne.value=t}function Kt(){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct();case 2:_t();case 3:case"end":return e.stop()}}),e)}))),Zt.apply(this,arguments)}return Object(v["h"])(pe,(function(e){b.value.length>0&&Ot()})),Object(v["h"])(W,(function(e){Dt(),W.value||dt()})),Object(v["h"])(H,(function(e){Dt(),H.value||dt()})),Object(v["h"])(le,(function(e){if(!W.value&&!H.value)if(Me.value===e[0])Me.value="",dt();else{var t=Object(Pe["a"])(e,1);Me.value=t[0],ht(e)}})),Object(v["h"])(se,(function(e){W.value||H.value||ht(e)})),Object(v["h"])(G,(function(e){te.value="picnic"===e?"black":"bone"===e?"brown":"hot"===e?"grey":"white",Ot()})),Object(v["h"])(s,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(u,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==t&&(_.value=null,m.value=!0,Ct());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(je,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==_.value&&(m.value=!0,(W.value||H.value)&&St(),Ct(),b.value.length>0&&(b.value=[]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(b,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ce.value=[],!t||0!==b.value.length){e.next=9;break}ut.value=[],A.value=!0,L.value=[],Oe.value=[],Ot(),e.next=17;break;case 9:return ut.value=[],m.value=!0,A.value=!1,e.next=14,Ft();case 14:Dt(),Ot(),m.value=!1;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(x,(function(e){var t=e;"undefined"===typeof e&&(t=[]),"string"===typeof e&&(t=[t]),b.value=t})),Object(v["h"])(Re,(function(e){""===e[0]&&""===e[1]?Ce.value=[]:Ce.value=e,Ot()})),Object(v["h"])(m,(function(e){})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,li;case 2:case"end":return e.stop()}}),e)})))),{get_uuid:Ze,scale:C,scaleUMAP:S,filenameGene:l,filenameFromParent:s,headers:si,selected:h,loading:m,selectedFiles:i,onFilesChanged:Ht,clusterHeaders:ci,selectedGenes:b,remove:vt,konvaConfigLeft:j,konvaConfigRight:R,circlesSpatial:E,circlesSpatialUMAP:P,isHighlighted:F,onResize:Kt,isClusterView:A,clusterItems:y,clusterColors:U,inactiveColor:N,backgroundColor:z,updateCircles:Ot,heatMap:G,stepArray:L,colorBarmap:V,highestCount:D,lowestCount:I,geneNames:q,isDrawing:W,isDrawingRect:H,mouseDownOnStageLeft:Gt,mouseDownOnStageRight:Lt,mouseMoveOnStageLeft:Vt,mouseMoveOnStageRight:$t,mouseUpOnStageLeft:qt,mouseUpOnStageRight:Wt,polygon:Q,polygonUMAP:Y,regions:K,regionsUMAP:Z,removeRegions:Dt,reScale:Jt,reScaleUMAP:Xt,resetScaleAndPos:Qt,resetScaleAndPosUMAP:Yt,runId:u,colorbarText:te,highlightIds:ae,lassoSide:ee,highlightCount:re,spatialData:_,spatialRun:ie,colorFromParent:c,clickedClusterFromParent:le,totalInClust:ue,totalInCellType:oe,averageInd:pe,retrieveData:Ct,geneObject:ve,motifObject:de,tixelObject:fe,minX:ge,minY:he,maxX:me,maxY:be,minX_UMAP:xe,minY_UMAP:_e,maxX_UMAP:ye,maxY_UMAP:we,geneMotif:je,tableKeyFromParent:ce,geneSummation:Oe,maxMinBoundary:Ce,maxMinBoundaryFromParents:Re,checkBoundary:bt,checkBoundaryColor:xt,currentClickedCluster:Me,assayFlag:rt,regulons_flag:it,originalClickedPoint:Se,originalClickedPointU:Ae,globalSpatialGroup:Fe,globalUmapGroup:Ie,globalSvgS:De,globalSvgU:Te,initializePlots:wt,translatePoint:Ee,translatePointU:Be,svg_spatial_wh:Ue,svg_umap_wh:Ne,initialized:Qe,visibility:Ye,visibilityUmap:Ke,showToolTipSpatial:Bt,showToolTipUmap:Ut,toolTipTextUmap:et,TTposition:tt,TTpositionUmap:nt,hideToolTipS:Nt,hideToolTipU:zt,current_tixel_colors:ut,multi_sample_flag:ot,clusters_ann_flag:lt,spatial_wh:ze,umap_wh:Ge,num_channel:o}}}),di=vi,fi=(a("8fce"),Object(te["a"])(di,ri,ii,!1,null,"3b4f006f",null)),gi=fi.exports,hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("canvas",{ref:"logo",attrs:{id:"logo"}})])},mi=[];function bi(e){for(var t=e,a=[],n=0;n<t.length;n+=1)a.push([t[n],n]);a.sort((function(e,t){return e[0]<t[0]?-1:1}));var r=[];t=[];for(var i=0;i<a.length;i+=1)t.push(a[i][0]),r.push(a[i][1]);return r}var xi=Object(v["c"])({name:"BarChart",props:["seqlogo","width","motif"],setup:function(e,t){var a=Object(v["a"])((function(){return e.seqlogo})),n=Object(v["a"])((function(){return e.width})),r=Object(v["a"])((function(){return e.motif}));function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.refs.logo.getContext("2d"),a.clearRect(0,0,n.value,300);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(a){var r,u,o,l,s,c,p,v,d,f,g,h,m,b,x,_,y,w,k,O,j,R;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:for(r={textcolor:"black",bgcolor:"white",border:35,padding:6,labelfont:"14px Arial,sans-serif",letterfont:"30px Lucida Console,monospace",fontpixelheight:24,ymaxs:0},u=t.refs.logo.getContext("2d"),u.save(),o=n.value,l=300,t.refs.logo.width=o,t.refs.logo.height=l,u.fillStyle=r.bgcolor,u.fillRect(0,0,o,l),s=["A","#0d9647"],c=["C","#255c9a"],p=["G","#f7b32b"],v=["T","#d6273a"],d=0;d<=a.length;d+=1)if(a[d])for(f=0;f<=a[d].length;f+=1)a[d][f]&&(a[d][f].includes("A")&&s.push(a[d][f][1]),a[d][f].includes("C")&&c.push(a[d][f][1]),a[d][f].includes("G")&&p.push(a[d][f][1]),a[d][f].includes("T")&&v.push(a[d][f][1]));for(g=[s,c,p,v],h=["A","C","G","T"],m=g[0].length-2,b=r.ymaxs,M.a.each(g,(function(e,t){var a=M.a.sum(e);a>b&&(b=Math.floor(a))})),x=0;x<m;x+=1){for(_=0,y=0;y<h.length;y+=1)_+=parseFloat(g[y][x+2]);_>b&&(b=_)}for(w=r.border,k=(o-r.border)/m,O=l-r.border,u.font=r.letterfont,j=function(e){for(var t=O,a=h.map((function(t){var a;return g.forEach((function(n,r){n.includes(t)&&(a=n[e+2])})),a})),n=bi(a).map((function(e){return e})),i=function(a){var i=h[n[a]],o=0,l=0;if(g.forEach((function(t,a){t.includes(i)&&(o=t[e+2],l=a)})),o>0){u.save(),u.fillStyle=g[l][1],u.translate(w,t);var s=O*o/(r.fontpixelheight*b),c=u.measureText(i),p=c.width,v=k/p;u.scale(v,s),u.fillText(i,0,0),u.restore(),t-=o*O/b}},o=0;o<h.length;o+=1)i(o);u.save(),u.fillStyle=r.textcolor,u.textAlign="center",u.textBaseline="top",u.font=r.labelfont,u.fillText((e+1).toString(),w+k/2,l-r.border+r.padding),u.restore(),w+=k},R=0;R<m;R+=1)j(R);u.fillStyle=r.textcolor,u.font=r.labelfont,u.textAlign="right",u.textBaseline="top",u.fillText("2 -",r.border-r.padding,64),u.textBaseline="top",u.fillText("1.5 -",r.border-r.padding,113),u.textBaseline="center",u.fillText("1 -",r.border-r.padding,l/2+11),u.textBaseline="bottom",u.fillText(".5 -",r.border-r.padding,l-74),u.textBaseline="bottom",u.fillText("0 -",r.border-r.padding,l-27),u.restore();case 42:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}return Object(v["h"])(a,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(n,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=3;break}return e.next=3,o(a.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(r,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,i();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)})))),{checker:o,dataFromParent:a,widthFromParent:n,motifFromParent:r}}}),_i=xi,yi=Object(te["a"])(_i,hi,mi,!1,null,null,null),wi=yi.exports,ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[e.allRuns.length>0?a("table",{staticStyle:{width:"100%","border-spacing":"35px"}},[a("tr",{staticStyle:{"border-bottom":"1px solid rgb(92, 112, 128)",color:"rgb(92, 112, 128)","font-weight":"500"}},[a("th",[e._v(" NGS ID ")]),a("th",[e._v("Run ID")]),a("th",[e._v(" Sample ID ")]),a("th",[e._v("Tissue")]),a("th",[e._v("Organism")]),a("th",[e._v("Experimental Condition")]),a("th",[e._v("Date")]),a("th",[e._v("Browser Link")])]),e._l(e.allRuns,(function(t){return a("tr",{key:t.inx,staticStyle:{"border-bottom":"1px solid rgb(92, 112, 128)"}},[a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.ngs_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.run_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.sample_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.tissue_type)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.species)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.experimental_condition)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.created_on)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("v-btn",{attrs:{outlined:""},on:{click:function(a){return e.toAtlasXplore(t)}}},[e._v(" AtlasXplore ")])],1)])}))],2):e._e(),a("div",{staticStyle:{padding:"10px","text-align":"right"}},[e._v("("),a("a",{attrs:{href:"https://docs.atlasxomics.com/projects/AtlasXplore",target:"_blank"}},[e._v("Browser Documentation")]),e._v(")")])])},Oi=[],ji=Object(v["c"])({name:"LoadingPage",props:{relevantRuns:{type:Array,required:!0},collabName:{type:String,required:!0}},setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return e.relevantRuns})),r=Object(v["a"])((function(){return e.collabName})),i=(Object(v["g"])([]),Object(v["g"])(!0));function u(e){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("".concat(t),"_blank");case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(e){this.$emit("run-selected",e.ngs_id)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),{allRuns:n,name:r,loading:i,nextPage:u,toAtlasXplore:l,router:a}}}),Ri=ji,Ci=Object(te["a"])(Ri,ki,Oi,!1,null,"3f0dcc82",null),Mi=Ci.exports,Si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[e.idName.length>0?[a("v-row",[e._l(e.data,(function(e){return[a("v-col",{key:e.id,attrs:{cols:"12",sm:"4"}},[a("Plotly",{attrs:{data:e.data,layout:e.layout,"display-mode-bar":!0}})],1)]}))],2)]:[a("v-row",[e._l(e.data,(function(e){return[a("v-col",{key:e.id,attrs:{vols:"12",sm:"6"}},[a("Plotly",{attrs:{data:e.data,layout:e.layout,"display-mode-bar":!0}})],1)]}))],2)]],2)],1)},Ai=[],Fi=a("04d1"),Ii=Object(v["c"])({name:"HistogramGraph",components:{Plotly:Fi["Plotly"]},props:["colorCode","chartData","idName","assay"],setup:function(e,t){var a=Object(v["a"])((function(){return e.colorCode})),n=Object(v["a"])((function(){return e.chartData})),r=Object(v["a"])((function(){return e.idName})),i=Object(v["a"])((function(){return e.assay})),u=Object(v["g"])({}),o=Object(v["g"])(),l=Object(v["g"])();function s(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,o,l,s,c,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n={},u.value={},r.value.length>0){for(o=function(e){var i={},u=[];t.forEach((function(t,a){Object.keys(i).includes(t.cluster)||(i[t.cluster]=[]),i[t.cluster].push(t.genes[r.value[e]])})),M.a.each(i,(function(e,t){var n={x:e,type:"histogram",opacity:.5,marker:{color:a.value[t]},name:t};u.push(n)})),u.sort((function(e,t){var a=parseFloat(e.name.split("C")[1]),n=parseFloat(t.name.split("C")[1]);return a<n?-1:a>n?1:0})),n[r.value[e]]={id:r.value[e],data:u,layout:{barmode:"overlay",title:r.value[e],traceorder:"normal"}}},l=0;l<r.value.length;l+=1)o(l);u.value=n}else{for(s=0;s<t.length;s+=1)c={x:Object.values(t[s]),marker:{color:"lightblue"},histnorm:"count",type:"histogram"},p=[i.value?"Gene Count":"TSS Enrichment",i.value?"UMI Count":"Log10 Unique Fragments"],n[s]={id:s,data:[c],layout:{title:p[s],traceorder:"normal",xaxis:{title:"Count"},yaxis:{title:"Amount of Tixels"}}};u.value=n}case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(v["h"])(n,(function(e){s(e)})),{data:u,layout:o,created:l,assayFromParent:i,constructChart:s}}}),Di=Ii,Ti=Object(te["a"])(Di,Si,Ai,!1,null,"3a0c7fd6",null),Ei=Ti.exports,Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],attrs:{cols:"12",sm:"12"}},[a("v-row",{staticStyle:{height:"34vh"},attrs:{id:"viewContainer"}})],1)],1)},Bi=[],Ui=a("362d"),Ni=new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}));function zi(e,t,a){var n=Math.min.apply(Math,Object(Kr["a"])(t))+12*a,r=Math.max.apply(Math,Object(Kr["a"])(t))+12*a,i=e.length,u=[];return M.a.each(t,(function(t){var o=t+12*a,l=(o-n)/(r-n)*(i-1),s=Math.trunc(l);u.push(e[s])})),u}var Gi=Object(v["c"])({name:"Singleview",props:["query","gene","heatmap","background","circleData","colorBar","loadingProp","userBoundary","channel"],setup:function(e,t){Object(v["a"])((function(){return B.state.client}));var a=Object(v["a"])((function(){return e.loadingProp})),n=Object(v["a"])((function(){return e.gene})),r=Object(v["a"])((function(){return e.channel})),i=Object(v["g"])(null),u=window.innerWidth,o=window.innerHeight,l=Object(v["g"])({x:0,y:0,width:u,height:o,draggable:!0,ogx:0}),s=Object(v["g"])([u,o]),c=Object(v["g"])(.8),p=Object(v["g"])(!0),d=Object(v["g"])(1e4),f=Object(v["g"])(0),g=(new Ui["default"].Label({visible:!1}),new Ui["default"].Tag({fill:"white",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round",shadowColor:"black",shadowBlur:10,shadowOffsetX:10,shadowOffsetY:10,shadowOpacity:.5}),new Ui["default"].Text({text:"",fontFamily:"Calibri",fontSize:15,padding:5,fill:"black"}),Object(v["a"])((function(){return e.circleData}))),h=Object(v["g"])([]),m=Object(v["a"])((function(){return e.heatmap?e.heatmap:"jet"})),b=Object(v["g"])(""),x=Object(v["a"])((function(){return e.colorBar})),_=Object(v["a"])((function(){return e.background})),y=Object(v["g"])("white"),w=Object(v["g"])([]),O=Object(v["g"])([]),j=Object(v["g"])(),R=Object(v["g"])(),C=Object(v["a"])((function(){return e.userBoundary})),M=Object(v["g"])([]),S=Object(v["g"])(),A=Object(v["g"])(!1);function F(){return I.apply(this,arguments)}function I(){return I=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.querySelector("#viewContainer"),t){e.next=3;break}return e.abrupt("return");case 3:a=t.offsetWidth,n=t.offsetHeight,l.value.width=Math.floor(a/3)-1,l.value.height=n,l.value.ogx=a,s.value=[l.value.width,l.value.height];case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function D(e,t){if(0===f.value)return[];for(var a=[],n=5,r=(e-t)/(n-1),i=0;i<n;i+=1)a.push(parseFloat((t+r*i).toFixed(2)));return a}function T(e){return 0===M.value.length?e:e>parseFloat(M.value[0])?parseFloat(M.value[0]):e<parseFloat(M.value[0])&&e>parseFloat(M.value[1])?e:e<parseFloat(M.value[1])?parseFloat(M.value[1]):e}function E(e){return 0===M.value.length||!(e>parseFloat(M.value[0]))&&(e<parseFloat(M.value[0])&&e>parseFloat(M.value[1])||!(e<parseFloat(M.value[1]))&&e)}function P(){return U.apply(this,arguments)}function U(){return U=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,i,u,o,s,p,v,d,f,g,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(A.value){e.next=2;break}return e.abrupt("return");case 2:t=O.value[0],a=O.value[1],i=O.value[2],u=O.value[3],o=l.value,s=o.width,p=o.height,v=Math.min(s/(i-t),p/(u-a)),d=r.value<=50?22:44,f=Math.min(s,p)/(5*d)*c.value,g=c.value*v*t-f,h=c.value*v*a-f,n.value.forEach((function(e){var t=document.getElementById("svg".concat(e));null===t||void 0===t||t.setAttribute("width","".concat(s,"px")),R.value.forEach((function(t,a){var n=document.getElementById("tixel".concat(a).concat(e));n.setAttribute("cx","".concat(t.ogx*c.value*v-g)),n.setAttribute("cy","".concat(t.ogy*c.value*v-h)),n.setAttribute("r","".concat(f))}))}));case 13:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function N(e){return new Promise((function(t){return setTimeout(t,e)}))}function z(){return G.apply(this,arguments)}function G(){return G=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,i,u,o,s,p,v,g,h,m,x,_,w,C,S,F;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==R.value){e.next=2;break}return e.abrupt("return");case 2:[],t=[],a=O.value[0],i=O.value[1],u=O.value[2],o=O.value[3],s=l.value,p=s.width,v=s.height,g=Math.min(p/(u-a),v/(o-i)),h=r.value<=50?22:44,m=Math.min(p,v)/(5*h)*c.value,x=c.value*g*a-m,_=c.value*g*i-m,w="http://www.w3.org/2000/svg",C=document.getElementById("viewContainer"),null===C||void 0===C||C.setAttribute("style","height: auto"),S=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a,n){var r,i,u,o,l,s,v,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],i=document.createElement("div"),i.setAttribute("id","plotWrapper".concat(a)),u=document.createElementNS("http://www.w3.org/2000/svg","svg"),u.setAttribute("width","".concat(p,"px")),u.setAttribute("height","34vh"),u.setAttribute("id","svg".concat(a)),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.setAttribute("id","svgGroup".concat(a)),o.setAttribute("y","30"),l=document.createElementNS("http://www.w3.org/2000/svg","text"),l.setAttribute("fill","white"),l.setAttribute("y","15"),s=document.createTextNode("".concat(a)),l.appendChild(s),v=document.createElement("div"),v.setAttribute("id","colorBar".concat(a)),v.setAttribute("style","background-image:".concat(b.value,"; display:flex; width: 85%")),t=[],R.value.forEach((function(e,n){t.push(T(e.genes[a]))})),f.value=-1e4,d.value=1e4,h=zi(j.value,t,1),R.value.forEach((function(e,n){var r=E(e.genes[a]),i=r?h[n]:"grey";f.value=t[n]>f.value?t[n]:f.value,d.value=t[n]<d.value?t[n]:d.value;var u=document.createElementNS(w,"circle");u.setAttribute("cx","".concat(e.ogx*c.value*g-x)),u.setAttribute("cy","".concat(e.ogy*c.value*g-_)),u.setAttribute("r","".concat(m)),u.setAttribute("id","tixel".concat(n).concat(a)),u.setAttribute("fill","".concat(i)),o.appendChild(u)})),r=D(0!==M.value.length?parseFloat(M.value[0]):f.value,0!==M.value.length?parseFloat(M.value[1]):d.value),u.appendChild(l),u.appendChild(o),null===i||void 0===i||i.appendChild(u),r.forEach((function(e){var t=document.createElement("div");t.setAttribute("style","color:".concat(y.value,"; font-size:16px; font-weight:bold; width:20%; text-align:center")),t.innerHTML=e,v.appendChild(t)})),null===i||void 0===i||i.appendChild(v),null===C||void 0===C||C.appendChild(i),e.next=33,N(30);case 33:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=0;case 19:if(!(F<n.value.length)){e.next=25;break}return e.next=22,S(n.value[F],F);case 22:F+=1,e.next=19;break;case 25:A.value=!0;case 26:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function L(){return V.apply(this,arguments)}function V(){return V=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.getElementById("viewContainer");while(t.firstChild)t.firstChild.remove();case 2:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function $(){return q.apply(this,arguments)}function q(){return q=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==R.value){e.next=2;break}return e.abrupt("return");case 2:t=[],a=[],n.value.forEach((function(e){var n=document.getElementById("colorBar".concat(e));while(null!==n&&void 0!==n&&n.firstChild)null===n||void 0===n||n.firstChild.remove();null===n||void 0===n||n.setAttribute("style","background-image:".concat(b.value,"; display:flex; width: 85%")),R.value.forEach((function(t,n){a.push(T(t.genes[e]))})),f.value=-1e4,d.value=1e4;var r=zi(j.value,a,1);R.value.forEach((function(t,n){var i=E(t.genes[e]),u=i?r[n]:"grey";f.value=a[n]>f.value?a[n]:f.value,d.value=a[n]<d.value?a[n]:d.value;var o=document.getElementById("tixel".concat(n).concat(e));o.setAttribute("fill","".concat(u))})),t=D(0!==M.value.length?parseFloat(M.value[0]):f.value,0!==M.value.length?parseFloat(M.value[1]):d.value),t.forEach((function(e){var t=document.createElement("div");t.setAttribute("style","color:".concat(y.value,"; font-size:16px; font-weight:bold; width:20%; text-align:center")),t.innerHTML=e,null===n||void 0===n||n.appendChild(t)}))}));case 5:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function W(){return H.apply(this,arguments)}function H(){return H=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:P();case 3:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}return Object(v["h"])(m,(function(e){y.value="picnic"===e?"black":"bone"===e?"brown":"hot"===e?"grey":"white",$()})),Object(v["h"])([g,n,x,C],function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i,u,o,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Pe["a"])(t,4),r=n[0],i=n[1],u=n[2],o=n[3],l=Object(Pe["a"])(a,4),s=l[0],l[1],l[2],l[3],void 0===r||void 0===i||void 0===u||r===s){e.next=11;break}return R.value=r.coords,j.value=r.intense,b.value=u.color,O.value=u.maxMin,""===o[0]&&""===o[1]?M.value=[]:M.value=o,e.next=10,L();case 10:z();case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),{deep:!0}),Object(v["h"])(C,(function(e){""===e[0]&&""===e[0]?M.value=[]:M.value=e,$()})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ni;case 2:F();case 3:case"end":return e.stop()}}),e)})))),{get_uuid:Ze,scale:c,loading:a,konvaConfigLeft:l,onResize:W,isClusterView:p,clusterColors:h,updateCircles:$,heatMap:m,colorBarmap:b,highestCount:f,lowestCount:d,colorbarText:y,spatialData:i,selectedGenesFromParent:n,colorsValues:x,maxMin:O,circlesSpatialSingle:w,colors_intensity:j,coordinates:R,backgroundColor:_,maxMinBoundary:M,maxMinBoundaryFromParents:C,checkBoundary:T,checkBoundaryColor:E,globalSpatial:S,viewBoxSpatial:s,resizeCircles:P,initialized:A,initializePlots:z,removeOld:L,num_channel:r}}}),Li=Gi,Vi=(a("ec4c"),Object(te["a"])(Li,Pi,Bi,!1,null,"75912588",null)),$i=Vi.exports,qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.go?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"9"}},[e.elements?[a("VueCytoscape",{key:e.update_component,ref:"cyRef",attrs:{config:e.config,preConfig:e.preConfig,afterCreated:e.afterCreated}})]:e._e()],2),a("v-col",{staticClass:"pr-22",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[e._v("Layout")]),a("v-select",{attrs:{items:["Forced-Algorithm","Concentric","Circle","Grid"]},on:{input:e.updateLayout},model:{value:e.default_layout,callback:function(t){e.default_layout=t},expression:"default_layout"}}),a("v-card-text",[e._v("Connection Strength")]),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-slider",{attrs:{disabled:0==e.regulons_from_parent.length,min:e.min_width,max:e.max_width,ticks:"always","tick-size":"7","thumb-label":"always"},on:{end:function(t){return e.sliceGraph(e.regulons_from_parent,e.slider,!1)}},scopedSlots:e._u([{key:"thumb-label",fn:function(t){var a=t.value;return[e._v(" "+e._s(e.slider_labels[a])+" ")]}}],null,!1,1627719166),model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}})],1)],1)],1):e._e()},Wi=[],Hi=a("3a6f"),Ji=a("233c"),Xi=a.n(Ji),Qi={style:[{selector:"node",style:{width:"mapData(size, 10, 30.0, 25, 50)",height:"mapData(size, 10, 30.0, 25, 50)","font-weight":"bold",content:"data(label)","text-valign":"center","text-wrap":"wrap","text-max-width":140,"background-color":"data(color)",color:"#000000ff"}},{selector:"edge",style:{"curve-style":"bezier",width:"mapData(width, 1, 1.5, 1, 10)","target-arrow-shape":"triangle","line-color":"data(color)","target-arrow-color":"data(color)","font-weight":"bold"}},{selector:"edge.label",style:{"line-color":"orange","target-arrow-color":"orange"}}]},Yi=Object(v["c"])({name:"NetworkGraph",components:{VueCytoscape:Hi["VueCytoscape"]},props:["selected_regulons","run_id","flag"],setup:function(e,t){var a=Object(v["a"])((function(){return B.state.client})),n=Object(v["a"])((function(){return e.selected_regulons})),r=Object(v["a"])((function(){return e.run_id})),i=Object(v["a"])((function(){return e.flag})),u=Object(v["g"])(),o=Object(v["g"])(),l=Object(v["g"])(),s=Object(v["g"])(),c=Object(v["g"])(0),p=Object(v["g"])([]),d=Object(v["g"])(0),f={Concentric:"concentric","Forced-Algorithm":"cola",Circle:"circle",Grid:"grid"},g=Object(v["g"])("Forced-Algorithm"),h=Object(v["g"])(4),m=Object(v["g"])(0),b=Object(v["g"])(4),x=Object(v["g"])(),_=Object(v["g"])([.15,.25,.5,.75,1]),y=Object(v["g"])(["15%","25%","50%","75%","100%"]);function w(e){"Forced-Algorithm"===g.value&&e.use(Xi.a)}function O(e){e.add(u.value).layout({name:"".concat(f[g.value]),idealEdgeLength:230}).run(),e.on("mouseover","edge",(function(e){}))}function j(e){var t=[],a={},n={};e.forEach((function(e,r){Object.keys(e).includes("position")?a={data:{id:e.data.name,label:e.data.name,color:e.data.color_rgb,size:e.data.size}}:(a={data:{id:r,source:e.data.source,color:e.data.color_rgb,target:e.data.target,width:e.data.width}},n[r]=a),t.push(a)})),x.value=n,o.value=t,u.value=t,l.value=Qi,c.value+=1}function R(e,t,a){var n=[],r=[],i=[],l=!1,p=function(e,a){var n=[],r=[],i=Object.keys(s.value);return e.forEach((function(e,u){if(i.includes(e)){var l=s.value[e].index,c=Math.ceil((l.length-1)*_.value[t]);"TF"===s.value[e].group&&(l=l.slice(0,c));var p=l.map((function(e){return o.value[e].data.target}));n.push.apply(n,Object(Kr["a"])(l)),p.forEach((function(e){a.includes(e)||r.push(e)}))}})),[n,r]},v=p(e,i);i.push.apply(i,Object(Kr["a"])(e)),r.push.apply(r,Object(Kr["a"])(v[0])),e.forEach((function(e){var t=s.value[e].control.map((function(e){return e}));t.forEach((function(e){var a=s.value[x.value[e].data.source].index[0];t.push(a)}));var a=t.map((function(e){return o.value[e]}));n.push.apply(n,Object(Kr["a"])(a))}));while(!l)0===v[1].length&&(l=!0),v=p(v[1],i),v[1].forEach((function(e){i.includes(e)||i.push(e)})),v[0].forEach((function(e){r.includes(e)||r.push(e)}));r.forEach((function(e,t){var a=o.value[e];n.push(a)})),u.value=n,c.value+=1}function C(e){c.value+=1}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(v["h"])(r,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,u,o,l,c,v,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t||!i.value){e.next=19;break}return u={path:"data/".concat(r.value,"/h5/networks"),bucket:"",filter:["json"]},e.next=4,null===(n=a.value)||void 0===n?void 0:n.getFileList(u);case 4:o=e.sent,o.sort(),l=[],c=0;case 8:if(!(c<o.length)){e.next=19;break}return d={params:{filename:"".concat(o[c])}},e.next=12,null===(v=a.value)||void 0===v?void 0:v.getJsonFile(d);case 12:f=e.sent,l.push(f),1===c&&(j(l[0]),s.value=f),c%2===1&&(p.value.push(l),l=[]);case 16:c+=1,e.next=8;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(n,(function(e){if(e.length>0)h.value=4,R(e,4,!0);else if(0===e.length&&o.value){var t=[];o.value.forEach((function(e,a){t.push(e)})),u.value=t,c.value+=1}})),{elements:u,config:l,regulons_from_parent:n,update_component:c,all_cell_types:p,current_selected:d,default_layout:g,go:i,slider:h,min_width:m,max_width:b,index_edges:x,truncate_value:_,slider_labels:y,preConfig:w,afterCreated:O,constructGraph:j,sliceGraph:R,updateLayout:C}}}),Ki=Yi,Zi=Object(te["a"])(Ki,qi,Wi,!1,null,"7ecfa312",null),eu=Zi.exports,tu=new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),au=[{text:"ID",value:"id"}],nu=[{text:"Cluster",value:"name"}],ru=[{text:"",value:"background"}],iu=[{background:"black"},{background:"white"},{background:"darkgrey"},{background:"custom"}],uu=[function(e){return!!e.match(/\d+/)||"Value must be digit"}],ou=Object(v["c"])({name:"AtlasXplore",components:{"table-component":Xr,"search-component":Lr,TrackBrowser:ni,AtxAtacViewer:gi,BarChart:wi,LoadingPage:Mi,HistogramGraph:Ei,Singleview:$i,NetworkGraph:eu,Appbar:Er,MainMenu:_t},props:["query"],setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return B.state.client})),r=Object(v["a"])((function(){return t.root.$route})),i=Object(v["a"])((function(){var e;return null===(e=B.state.client)||void 0===e?void 0:e.workers})),u=(Object(v["a"])((function(){return B.state.xploreData})),Object(v["g"])(pt(["admin"])?["Transparent","Opaque","FrontPage"]:["Transparent","Opaque"])),o=Object(v["g"])([]),l=Object(v["g"])(null),c=Object(v["g"])(null),p=Object(v["g"])(null),d=Object(v["g"])(null),f=Object(v["g"])(null),g=Object(v["g"])([]),h=Object(v["g"])(),m=Object(v["g"])([]),b=Object(v["g"])(!1),x=Object(v["g"])([]),_=Object(v["g"])([]),y=Object(v["g"])([]),w=Object(v["g"])(!1),O=Object(v["g"])([]),j=(window.innerWidth,window.innerHeight,Object(v["g"])(.75)),R=Object(v["g"])(.75),C=Object(v["g"])(!0),S=Object(v["g"])(!0),A=Object(v["g"])(!1),F=Object(v["g"])(0),I=Object(v["g"])(1e4),D=Object(v["g"])(""),T=Object(v["g"])(!1),E=Object(v["g"])(!1),P=Object(v["g"])({type:"",species:"",assay:"",organ:"",condition:"",date:"",runid:"",ngsid:"",channel:50}),U=Object(v["g"])("black"),N=Object(v["g"])(),z=Object(v["g"])(null),G=Object(v["g"])(),L=Object(v["g"])(null),V=Object(v["g"])([]),$=Object(v["g"])([]),q=Object(v["g"])(!1),W=Object(v["g"])(!1),H=Object(v["g"])(0),J=Object(v["g"])(!1),X=Object(v["g"])([!1]),Q=Object(v["g"])(null),Y=Object(v["g"])(!1),K=Object(v["g"])(!1),Z=Object(v["g"])(!1),ee=Object(v["g"])(!1),te=Object(v["g"])(),ae=Object(v["g"])("black"),ne=Object(v["g"])("black"),re=Object(v["g"])("white"),ie=Object(v["g"])([]),ue=Object(v["g"])([]),oe=Object(v["g"])(0),le=Object(v["g"])([""]),se=Object(v["g"])("gene"),ce=Object(v["g"])(!0),pe=Object(v["g"])(!1),ve=Object(v["g"])(!1),de=Object(v["g"])(!1),fe=Object(v["g"])(!1),ge=Object(v["g"])(!1),he=Object(v["g"])("hidden"),me=Object(v["g"])(!1),be=Object(v["g"])({}),xe=Object(v["g"])({}),_e=Object(v["g"])({}),ye=Object(v["g"])({}),we=Object(v["g"])(),Oe=Object(v["g"])(),je=Object(v["g"])(),Re=Object(v["g"])(""),Ce=Object(v["g"])(""),Me=Object(v["g"])(!1),Se=Object(v["g"])([]),Ae=Object(v["g"])([]),Fe=Object(v["g"])([]),Ie=Object(v["g"])(""),De=Object(v["g"])({}),Te=Object(v["g"])({}),Be=Object(v["g"])([]),Ue=Object(v["g"])({}),ze=Object(v["g"])(),Ge=Object(v["g"])(),Le=Object(v["g"])(!1),Ve=Object(v["g"])({}),$e=Object(v["g"])(1),We=Object(v["g"])(!1),Xe=Object(v["g"])(!1),Qe=Object(v["g"])(!1),Ke=Object(v["g"])(""),Ze=Object(v["g"])(""),et=Object(v["g"])(["",""]),tt=Object(v["g"])(!1),at=Object(v["g"])(!1),nt=(Object(v["g"])(!1),Object(v["g"])(["#D51F26","#272E6A","#208A42","#89288F","#F47D2B","#FEE500","#8A9FD1","#C06CAB","#D8A767","#90D5E4","#89C75F","#F37B7D","#9983BD","#D24B27","#3BBCA8","#6E4B9E","#0C727C","#7E1416","#E6C2DC","#3D3D3D"])),rt=Object(v["g"])(!0),it=Object(v["g"])(!1),ut=Object(v["g"])([]),ot=Object(v["g"])();function vt(){t.refs.mainmenu.openDrawer()}function ft(e){if(e){if(e.component!==r.value.query.component){var t="/".concat(e.component);a.push(t)}}else if(r.value.query.component){var n="/".concat(e.component);a.push(n)}}function gt(){var e=t.refs.peakContainer;e&&(Oe.value=e.$el.offsetWidth-2)}function ht(){null===n.value.user?a.go(-1):a.push("/")}function mt(e){return e.match("[A-Z]+[0-9]+")[0]}function bt(e){if(!e.includes("D"))return"";var t=e.replace(/D0+/i,"D");return t}function xt(e){tt.value=e}function _t(e){ie.value=e.ids,ue.value=e.genes}function yt(e){Ue.value=e}function wt(e){return kt.apply(this,arguments)}function kt(){return kt=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:it.value=!1,se.value=t;case 2:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function Ot(e){Ge.value=e}function jt(e){ze.value=e}function Rt(e){navigator.clipboard.writeText(e)}function Ct(e){Re.value=e}function Mt(e){if(-1!==e.indexOf("#")){var t=e.split("#")[0],a=e.split("#")[1],n="#";a.length>=6&&(n+=a,xe.value[t]=n)}}function St(){if(fe.value=!1,be.value!==xe.value){Me.value=!0;var e={},a=[];M.a.each(xe.value,(function(t,n){e[n]=t,a.push(t)})),nt.value=a,be.value=e,"gene"===se.value&&C.value&&!We.value&&(tt.value=!0,t.refs.trackbrowser.reload(d.value,be.value),tt.value=!1)}}function At(){fe.value=!1;var e={};M.a.each(be.value,(function(t,a){e[a]=t})),xe.value=e}function Ft(e,t){var a="string"!==typeof t.srcElement._value?"":t.srcElement._value;ye.value[e]=[a]}function It(){ge.value=!1;var e={};M.a.each(_e.value,(function(t,a){e[a]=t})),ye.value=e}function Dt(){ge.value=!1;var e={};M.a.each(ye.value,(function(t,a){e[a]=t})),_e.value=e}function Tt(e){if(Be.value.includes(e)){var t=Be.value.indexOf(e);t>-1&&Be.value.splice(t,1)}else Be.value.push(e)}function Et(){Ke.value.match(/\d+/)&&Ze.value.match(/\d+/)&&(et.value=[Ke.value,Ze.value],Qe.value=!Qe.value)}function Pt(){Ke.value="",Ze.value="",et.value=[Ke.value,Ze.value]}function Bt(e){var t=Object(Pe["a"])(e,2),a=t[0],n=t[1];Ke.value=a,Ze.value=n}function Ut(){ee.value=!1;var e=ie.value.join(),t=ue.value.join(),a="".concat(e,"\n\n").concat(t),n=document.createElement("a"),r=new Blob([a],{type:"text;charset=utf-8;"}),i=URL.createObjectURL(r);n.href=i,n.setAttribute("download","".concat(d.value,"/Selection.txt")),n.click()}function Nt(e){if(de.value=!1,C.value||!C.value&&!Le.value){var t=document.createElement("canvas"),a=t.getContext("2d"),n=["spatialGroup","umapGroup"],r=document.getElementById("spatialGroup"),i=document.getElementById("umapGroup"),u=parseFloat(r.getAttribute("width"))>parseFloat(i.getAttribute("width"))?parseFloat(r.getAttribute("width")):parseFloat(i.getAttribute("width")),o=parseFloat(r.getAttribute("height"))>parseFloat(i.getAttribute("height"))?parseFloat(r.getAttribute("height")):parseFloat(i.getAttribute("height"));u+=12,o+=12,t.width=2*u,t.height=o;var l=0,s=[0,u],c=function(e,n,r){if(l+=1,null===a||void 0===a||a.drawImage(e,n,r),2===l){var i=t.toDataURL("image/png"),u=document.createElement("a");u.id="".concat(d.value,"link"),u.href=i;var o=_.value.join();u.setAttribute("download","".concat(d.value,"/").concat(o,".png")),u.click()}};n.forEach((function(e,t){var a="".concat(e),n=document.createElement("canvas"),r=n.getContext("2d"),i=document.getElementById("".concat(a)),u=parseFloat(i.getAttribute("width")),o=parseFloat(i.getAttribute("height"));n.width=u+8,n.height=o+8;var l=(new XMLSerializer).serializeToString(i),p=new window.Image,v=s[t],d=0;p.onload=function(){null===r||void 0===r||r.drawImage(p,0,0,u,o),c(n,v,d)},p.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(l))}))}else{var p,v=document.createElement("canvas"),f=v.getContext("2d"),g=0,h=0,m=0,b=Math.floor(_.value.length/3)+1,x=-1,w=function(e,t,a){if(m+=1,null===f||void 0===f||f.drawImage(e,t,a),m===_.value.length){var n=v.toDataURL("image/png"),r=document.createElement("a");r.id="".concat(d.value,"link"),r.href=n;var i=_.value.join();r.setAttribute("download","".concat(d.value,"/").concat(i,".png")),r.click()}};_.value.forEach((function(e,t){var a="svgGroup".concat(e),n=document.createElement("canvas"),r=n.getContext("2d"),i=document.getElementById("".concat(a));g=i.getBoundingClientRect().width+8,h=i.getBoundingClientRect().height+8,0===t&&(v.width=3*g,v.height=b>=1?h*b+8*b:h,p=[0,g,2*g]),n.width=g,n.height=h;var u=(new XMLSerializer).serializeToString(i),o=new window.Image,l=p[t%3];t%3===0&&(x+=1);var s=x*h;o.onload=function(){null===r||void 0===r||r.drawImage(o,0,0,g,h),w(n,l,s)},o.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(u))}))}if(pe.value){var k=document.getElementById("capturePeak");dt()(k,{backgroundColor:e}).then((function(e){var t,a=e.toDataURL("image/png"),n=document.createElement("a");n.href=a,t="motif"===se.value?"".concat(d.value,"_").concat(y.value[0],"_seqlogo"):"".concat(d.value,"_").concat(y.value[0],"_peaks"),n.setAttribute("download","".concat(t,".png")),n.click()}))}if(ve.value){var O=document.getElementById("captureHisto");dt()(O,{backgroundColor:e}).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;var n=_.value.join();a.setAttribute("download","".concat(d.value,"/").concat(n,"_histogram.png")),a.click()}))}}function zt(){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:de.value=!1,t=document.getElementById("spatialGroup"),a=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),t.cloneNode(!0),i=(new XMLSerializer).serializeToString(t),u=new window.Image,u.onload=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var i,o,l,s,c,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=document.createElement("canvas"),o.width=a,o.height=r,l=o.getContext("2d"),l.drawImage(u,0,0,a,r),s=o.toDataURL("image/png"),c=document.createElement("a"),c.id="".concat(d.value,"link"),c.href=s,p="frontPage_".concat(d.value,".png"),c.setAttribute("download","".concat(p)),c.click(),e.next=14,null===(i=n.value)||void 0===i?void 0:i.generateFrontPage(s,d.value);case 14:e.sent;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(i));case 9:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Lt(e){!x.value.includes(e)&&m.value.length>0&&(le.value=[e],C.value=!1)}function Vt(e){"Anti"!==e?Se.value=[e]:$e.value*=-1}function $t(e){return qt.apply(this,arguments)}function qt(){return qt=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:m.value=t.map((function(e){return{name:e}})),b.value=!1;case 4:case"end":return e.stop()}}),e)}))),qt.apply(this,arguments)}function Wt(e){U.value=e.background,Y.value=!1}function Ht(){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(w.value){e.next=2;break}return e.abrupt("return");case 2:if(A.value=!1,a={},n={},r={},i={},[],u=Object.keys(De.value),Object.keys(De.value).length,!Me.value){for(o=0;o<u.length;o+=1)l=u[o],a[l]=nt.value[o],i[l]=nt.value[o],n[l]="",r[l]="";be.value=a,xe.value=i,"C1"in _e.value||(_e.value=n,ye.value=r)}"gene"!==se.value||!C.value||q.value||W.value||We.value||t.refs.trackbrowser.reload(d.value,be.value);case 12:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Xt(){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=[],a=[],n=Object.keys(De.value),O.value=n.map((function(e){return{name:e}})),a.push({text:"Anti",value:"id",sortable:!1,key:$e.value}),r=0;r<O.value.length;r+=1)a.push({text:O.value[r].name,value:O.value[r].name,sortable:!1});$.value=a,M.a.each(Ve.value[se.value][$e.value],(function(e,a){var n={},r=[],i=[];r.push("id"),i.push(a);for(var u=0;u<O.value.length;u+=1)r.push(O.value[u].name),i.push(e[u]);for(var o=0;o<r.length;o+=1)n[r[o]]=i[o];t.push(n)})),V.value=t,H.value=O.value.length;case 10:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}function Yt(){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value=!0,w.value=!0,e.next=4,Xt();case 4:return e.next=6,Ht();case 6:gt(),b.value=!1;case 8:case"end":return e.stop()}}),e)}))),Kt.apply(this,arguments)}function Zt(e){De.value=e,Be.value=Object.keys(De.value).map((function(e){return e})),"eRegulon"===se.value&&(Te.value=e),Object.keys(Ve.value).length>0&&Yt()}function ea(){return ta.apply(this,arguments)}function ta(){return ta=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,o,l,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filename:"data/".concat(d.value,"/h5/topTen_genes.json")}},e.next=3,null===(t=n.value)||void 0===t?void 0:t.getJsonFile(a);case 3:if(r=e.sent,Ve.value.gene=r,We.value){e.next=11;break}return u={params:{filename:"data/".concat(d.value,"/h5/topTen_motifs.json")}},e.next=9,null===(i=n.value)||void 0===i?void 0:i.getJsonFile(u);case 9:o=e.sent,Ve.value.motif=o;case 11:if(!Xe.value){e.next=17;break}return s={params:{filename:"data/".concat(d.value,"/h5/topTen_eRegulons.json")}},e.next=15,null===(l=n.value)||void 0===l?void 0:l.getJsonFile(s);case 15:c=e.sent,Ve.value.eRegulon=c;case 17:w.value=!1,Object.keys(De.value).length>1&&Yt();case 19:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}var aa=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.value.getTaskStatus(t);case 4:N.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function na(){return ra.apply(this,arguments)}function ra(){return ra=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(w.value){e.next=2;break}return e.abrupt("return");case 2:try{"motif"===se.value?(t=l.value,l.value=t.replace(/eRegulons|genes/i,"motifs")):"gene"===se.value?(a=l.value,l.value=a.replace(/eRegulons|motifs/i,"genes")):"eRegulon"===se.value&&(n=l.value,l.value=n.replace(/motifs|genes/i,"eRegulons"))}catch(r){console.log(r)}case 3:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(){return ua.apply(this,arguments)}function ua(){return ua=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="data",a="gene.seq_logo",r="atxcloud_gene",i=["".concat(t,"/").concat(d.value,"/h5/obj/motifs.csv"),y.value[0]],u={},e.next=8,n.value.postTask(a,i,u,r);case 8:return o=e.sent,e.next=11,aa(o._id);case 11:if("SUCCESS"===N.value.status||"FAILURE"===N.value.status){e.next=20;break}return"PROGRESS"===N.value.status&&(L.value="".concat(N.value.progress,"% - ").concat(N.value.position)),e.next=15,new Promise((function(e){z.value=window.setTimeout(e,1e3)}));case 15:return z.value=null,e.next=18,aa(o._id);case 18:e.next=11;break;case 20:"SUCCESS"!==N.value.status?(ke.dispatch({text:"Worker failed in AtlasXplore",options:{right:!0,color:"error"}}),b.value=!1):(ke.dispatch({text:"Motif ".concat(y.value[0]," found"),options:{right:!0,color:"success"}}),L.value=N.value.status,l=N.value.result,we.value=l),e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])}))),ua.apply(this,arguments)}function oa(e){return la.apply(this,arguments)}function la(){return la=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,u,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=30;break}return b.value=!0,a="gene.compute_cell_type",r="atxcloud_gene",i=[l.value,t],u={},e.next=8,n.value.postTask(a,i,u,r);case 8:return o=e.sent,e.next=11,aa(o._id);case 11:if("SUCCESS"===N.value.status||"FAILURE"===N.value.status){e.next=20;break}return"PROGRESS"===N.value.status&&(L.value="".concat(N.value.progress,"% - ").concat(N.value.position)),e.next=15,new Promise((function(e){z.value=window.setTimeout(e,1e3)}));case 15:return z.value=null,e.next=18,aa(o._id);case 18:e.next=11;break;case 20:if("SUCCESS"===N.value.status){e.next=24;break}return ke.dispatch({text:"Worker failed for CellType",options:{right:!0,color:"error"}}),b.value=!1,e.abrupt("return");case 24:L.value=N.value.status,s=N.value.result,c={},M.a.each(ye.value,(function(e,t){Object.keys(s).includes(t)?c[t]=s[t]:c[t]=["Undefined"]})),ye.value=c,b.value=!1;case 30:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function sa(){var e=t.refs.file.files[0],a=new FileReader;e.type.includes("csv")?(a.onload=function(e){Ae.value=[e.target.result]},a.onerror=function(e){return console.log(e)},a.readAsText(e)):ke.dispatch({text:"Wrong file type must be csv",options:{right:!0,color:"error"}})}function ca(e){var t=e.target;t.value=""}function pa(){return va.apply(this,arguments)}function va(){return va=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:d.value,a="data/".concat(t,"/metadata.json"),r={params:{filename:a}},e.next=5,n.value.getJsonFile(r);case 5:i=e.sent,console.log(i),P.value.organ=i.organ,P.value.species=i.species,P.value.type=i.assay,P.value.runid=i.run_id,P.value.channel=i.channel,u=["gene"],"Transcriptome"===i.assay?We.value=!0:u.push("motif"),i.regulons_flag&&(Xe.value=!0,u.push("eRegulon")),ut.value=u;case 16:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function da(){return fa.apply(this,arguments)}function fa(){return fa=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:return g.value=[],ot.value="",b.value=!0,t={path:"data",filter:"h5/obj/genes.h5ad",only_files:!0},e.next=8,n.value.getFileList(t);case 8:a=e.sent,r=a.map((function(e){return"".concat(e.split("/")[1])})),i=r.filter((function(e,t){return r.indexOf(e)===t})),g.value=i.map((function(e){return{id:e}})),b.value=!1;case 13:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function ga(e){return ha.apply(this,arguments)}function ha(){return ha=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:E.value=!1,a="data",n="","gene"===se.value&&(n="".concat(a,"/").concat(t.id,"/h5/obj/genes.h5ad")),"motif"===se.value&&(n="".concat(a,"/").concat(t.id,"/h5/obj/motifs.h5ad")),"eRegulon"===se.value&&(n="".concat(a,"/").concat(t.id,"/h5/obj/eRegulons.h5ad")),l.value=n,c.value="",d.value=t.id,P.value.species="",pa(d.value),ea();case 12:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}var ma=s["default"].extend(Lr),ba=Object(v["g"])(new ma({vuetify:Ne,propsData:{gene_list:m,gene_button:le},created:function(){this.$on("changed",(function(e){x.value=e})),this.$on("avgind",(function(e){Le.value=e})),this.$on("sentgenes",(function(e){C.value=!1,_.value=[],y.value=[],e.forEach((function(e,t){_.value.push(e)})),1===e.length&&"eRegulon"!==se.value&&(e.forEach((function(e,t){y.value.push(e)})),"motif"===se.value&&ia())}))}}));Object(v["h"])(pe,(function(e){he.value=e?"visible":"hidden"})),Object(v["h"])(se,(function(e){if(at.value=!0,!We.value){var t=document.getElementById("geneMotifButton"),a=t.childNodes[0];"gene"===e?a.innerText="GENE":"motif"===e?a.innerText="MOTIF":"eRegulon"===e&&(a.innerText="EREGULON"),Ke.value="",Ze.value="",et.value=[Ke.value,Ze.value],m.value=[],ce.value=!0,pe.value=!1,ve.value=!1,C.value=!0,_.value.length>0&&(x.value=[]),X.value=[!1],le.value=[],y.value=[],na()}at.value=!1})),Object(v["h"])($e,(function(e){ce.value=!0,pe.value=!1,ve.value=!1,C.value=!0,x.value=[],X.value=[!1],le.value=[],_.value=[],y.value=[],Xt()})),Object(v["h"])(q,(function(e){q.value?ae.value="green":ae.value="black"})),Object(v["h"])(W,(function(e){W.value?ne.value="green":ne.value="black"})),Object(v["h"])(x,(function(e){0===x.value.length?(C.value=!0,X.value=[!1],y.value=[],_.value=[]):(q.value=!1,W.value=!1)})),Object(v["h"])($e,(function(e){ce.value=!0,pe.value=!1,ve.value=!1,C.value=!0,x.value=[],X.value=[!1],le.value=[],_.value=[],y.value=[]})),Object(v["h"])(X,(function(e){var t=e[0];t||(C.value=!0,le.value=[],me.value=!0)})),Object(v["h"])(fe,(function(e){e||(Ce.value="",Re.value="")})),Object(v["h"])(Ae,(function(e){var t=function(e){var t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return a},a=e[0].split("\n"),n=a.map((function(e){return e.split(",")})),r=n.map((function(e){return Object(Ee["a"])({},e[0].replace(/[.\\/#!$%^&*;:{}=_`~()@'"\r\n]/g,""),e.slice(1,e.length))})),i={};i={},r.forEach((function(e,a){var n=Object.values(e),r=Object.keys(e);n.forEach((function(e,a){var n=e.filter((function(e){return e.length>1}));i[r[0]]=n.map((function(e){return t(e.replace(/[.,\\/#!$%^&*;:{}=_`~()@'"\r\n\s]/g,""))}))}))})),oa(i)})),Object(v["h"])(r,(function(e){console.log(e),e.query.component?B.commit.setComponent(e.query):B.commit.setComponent({component:null})}));var xa=Object(v["g"])([]),_a={text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,click:function(){E.value=!E.value}},ya={text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:b.value,click:function(){T.value=!T.value}},wa={text:se.value,icon:null,tooltip:"Cluster<->Annotations",disabled:b.value,ref:"geneMotifButton",enabled:!0,click:function(){it.value=!it.value}},ka={text:"Background/Heatmap",icon:"mdi-palette",tooltip:"Background/Heatmap",enabled:!0,click:function(){Y.value=!Y.value}},Oa={type:"component",name:"GeneAutoComplete",id:"geneac",enabled:!0,component:ba};function ja(){xa.value.push(_a,ya,wa,ka,Oa),B.commit.setSubmenu(xa.value)}function Ra(e){return Ca.apply(this,arguments)}function Ca(){return Ca=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return e.next=4,ga({id:t});case 4:G.value={task:"gene.compute_qc",queues:["atxcloud_gene"]};case 5:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ja(),t=Ye,e.next=4,Je(t,"public","Latch456!");case 4:if(a=e.sent,!He(a)){e.next=14;break}return n=st(),n&&ct(),lt({token:a.authorizationToken,url:a.serverURL}),e.t0=B.commit,e.next=12,qe.Create(t,a.authorizationToken);case 12:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1);case 14:return e.next=16,tu;case 16:return B.commit.setComponent({component:"AtlasXplore"}),d.value=null,J.value=!0,e.next=21,da();case 21:ba.value.$mount("#geneac");case 22:case"end":return e.stop()}}),e)})))),Object(v["e"])((function(){ba.value.$el&&(ba.value.$destroy(),ba.value.$el.parentNode.removeChild(ba.value.$el),B.commit.setSubmenu(null))})),{scale:j,scaleUMAP:R,filename:l,publicLink:f,items:g,headers:au,selected:h,loading:b,loadExpressions:$t,clusterHeaders:nu,backgroundOptions:iu,backgroundHeader:ru,genes:m,selectedGenes:x,spatialData:w,isHighlighted:A,onResize:gt,isClusterView:C,isSummation:S,clusterItems:O,backgroundColor:U,updateCircles:Ht,heatMap:nt,progressMessage:L,selectAction:ga,workers:i,candidateWorkers:o,currentTask:G,highestCount:F,lowestCount:I,topHeaders:$,geneNames:V,isDrawing:q,isDrawingRect:W,runId:d,sendGene:Lt,sendCluster:Vt,lengthClust:H,colorBarmap:D,showFlag:X,backgroundFlag:Y,chooseBackground:Wt,heatmapFlag:K,lassoSide:te,colorOnOff:ae,colorOnOffRect:ne,colorbarText:re,highlightIds:ie,topSelected:ue,listId:ee,captureScreen:Nt,saveTxt:Ut,highlightCount:oe,autoCompleteFlag:Z,geneButton:le,geneMotif:se,featureTableFlag:ce,peakViewerFlag:pe,histoFlag:ve,colorMap:be,spatialRun:me,visible:he,trackBrowserGenes:y,metadata:P,metaFlag:T,runIdFlag:E,displayFlag:de,clusterColorFlag:fe,cellTypeFlag:ge,getMeta:pa,cleanRunId:mt,childGenes:_,updateLoading:xt,updateSpatial:Yt,updateFilename:na,updateSelectors:_t,resolveAuthGroup:pt,seqlogo:ia,publicSeqlogo:je,seqLogoData:we,widthFromCard:Oe,holdGene:p,holdMotif:c,copyToClip:Rt,updateClusterLabel:Ct,clickedCluster:Re,userSelectedColor:Ce,changeClusterColor:St,manualClusterFlag:Me,clearClusterColor:At,checkFieldColor:Mt,checkFieldCell:Ft,clearCellType:It,changeCellType:Dt,colorMapCopy:xe,clickedClusterFromChild:Se,cellTypeMap:_e,cellTypeMapCopy:ye,uploadCellType:sa,fileContent:Ae,runCellType:oa,resetFile:ca,collabData:Fe,removeZeros:bt,collabName:Ie,updateClustTotal:Zt,totalInClust:De,totalInCellType:Te,unClickCluster:Tt,selectedClusters:Be,updateHistogram:yt,spatialCircleData:Ue,colorBarToSingle:jt,colorBarFromSibling:ze,dataToSingle:Ot,singleData:Ge,averageInd:Le,atlasXplore_displayed:J,collaborator_specific_ids:Q,prep_atlasxplore:Ra,acInstance:ba,submenu:xa,metadata_button:ya,gene_motif_button:wa,bg_color_button:ka,gene_ac_bar:Oa,prep_sub_menu:ja,tableKey:$e,topTenIds:Ve,updateTen:ea,redirectToVisual:ht,assayFlag:We,regulons_flag:Xe,updateTable:Xt,logout:ct,scaleFlag:Qe,userMaxValue:Ke,userMinValue:Ze,applyBoundary:Et,resetBoundary:Pt,onlyNumRule:uu,userMaxMinValue:et,updateMaxMin:Bt,peakViewLoad:tt,geneMotifLoad:at,oneTime:rt,saveImageTable:u,generateFrontPage:zt,clusters_ann_flag:it,clusters_ann_list:ut,changeClustersAnn:wt,search:ot,openDrawer:vt,menuClicked:ft}}}),lu=ou,su=(a("4a16"),Object(te["a"])(lu,De,Te,!1,null,null,null)),cu=su.exports,pu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"main"},[a("appbar",{staticClass:"appbar",attrs:{submenu:e.submenu},on:{openDrawer:e.openDrawer}}),a("main-menu",{ref:"mainmenu",staticStyle:{"z-index":"99999"},on:{menuClicked:e.menuClicked}}),a("v-container",{attrs:{fluid:""}},[a("v-row",[e.run_id_search_active?a("v-dialog",{attrs:{value:e.run_id_search_active,"hide-overlay":""},on:{"click:outside":function(t){e.run_id_search_active=!e.run_id_search_active}}},[a("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[a("v-card-title",[a("v-text-field",{attrs:{dense:"","prepend-inner-icon":"mdi-magnify",value:e.searchInput},on:{input:function(t){e.searchInput=t,e.searchRuns(e.searchInput)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"20vh",width:"20%",dense:"","single-select":"",loading:e.loading,items:e.run_id_folder_namesHolder,headers:e.headers},on:{"click:row":e.run_folder_selected}})],1)],1):e._e(),e.image_processing_begun?a("v-dialog",{attrs:{width:"600",height:"800",value:e.show_metadata,persistent:!e.metadata_confirmed_bool}},[a("metadata-dropdown",{attrs:{metadata:e.metadata,drop_down_manager:e.drop_down_manager,run_id:e.run_id,updating_existing:e.updating_existing,barcode_filename_list:e.barcode_filename_options,metadata_confirmed_bool:e.metadata_confirmed_bool},on:{confirmed:e.metadata_confirmed,"barcode-file-selected":e.retrieve_barcode_file,refresh:e.pageRefresh}})],1):e._e(),e.checkSpatial?e._e():a("v-col",{staticClass:"pl-6 pt-3",staticStyle:{"margin-top":"60px"},attrs:{cols:"12",sm:"2"}},[e.run_id&&e.image_processing_begun?[a("v-card",[a("v-slider",{staticClass:"pl-2",attrs:{dense:"",height:"20",label:"Scale",type:"number",min:"0.1",max:"0.8",step:"0.005",disabled:!e.current_image},on:{change:e.onChangeScale},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}}),a("v-list",{staticClass:"mt-n3 pt-0 pl-2",attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Rotation")]),a("v-btn",{staticClass:"leftRotate",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(0)}}},[a("img",{attrs:{src:"/static/img/rotate_left.png",width:"24",height:"24"}})]),a("v-btn",{staticClass:"spaced_btn",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||"45"==e.degreeRotation||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(1)}}},[a("img",{attrs:{src:"/static/img/rotate_right.png",width:"24",height:"24"}})]),a("div",{staticStyle:{display:"grid","margin-bottom":"20px"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"90",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"90")},on:{change:function(t){e.degreeRotation="90"}}}),e._v("90")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"45",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"45")},on:{change:function(t){e.degreeRotation="45"}}}),e._v("45")])])],1),a("v-list",{staticClass:"mt-n4 pt-0 pl-2",attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Cropping")]),a("v-btn",{attrs:{outlined:"",color:"primary",dense:"","x-small":"",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},on:{click:e.activateCrop}},[e._v(" Activate ")]),a("v-btn",{staticClass:"mt-0 pt-0",attrs:{outlined:"",loading:e.cropLoading,disabled:!e.current_image||!e.isCropMode||e.cropFlag,"x-small":"",dense:"",color:"primary"},on:{click:e.onCropButton}},[e._v(" Confirm ")])],1),a("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("ROI")]),a("v-btn",{staticClass:"mr-8",attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.active_roi_available},on:{click:e.finding_roi}},[e._v(" Activate ")]),a("v-btn",{attrs:{dense:"",outlined:"",color:"primary","x-small":"",disabled:e.grid_visible||!e.grid},on:{click:e.show_grid}},[e._v(" Display Grid ")]),a("v-btn",{attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.grid_visible},on:{click:function(t){return e.hide_grid()}}},[e._v(" Hide Grid ")])],1),a("v-list",{attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Thresholding")]),e._v(" C value: "+e._s(e.c_val)+" "),a("v-slider",{staticClass:"slider",attrs:{step:"1",min:"0",max:"25",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial},model:{value:e.c_val,callback:function(t){e.c_val=t},expression:"c_val"}}),e._v(" Neighborhood: "+e._s(e.neighbor_size)+" "),a("v-slider",{staticClass:"slider",attrs:{disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial,step:"1",min:"0",max:"25"},model:{value:e.neighbor_size,callback:function(t){e.neighbor_size=t},expression:"neighbor_size"}}),a("v-btn",{attrs:{loading:e.threshLoading,outlined:"",dense:"",color:"primary",small:"",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial||e.thresh_same},on:{click:e.thresh_clicked}},[e._v(" Threshold ")])],1),a("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Background Image")]),a("v-btn",{attrs:{id:"postB_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.postB_image_displayed||e.spatial},on:{click:function(t){return e.change_image("postB")}}},[e._v(" PostB ")]),a("v-btn",{attrs:{id:"bsa_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.bsa_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BSA")}}},[e._v(" BSA ")]),a("v-btn",{attrs:{id:"bw_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created||e.bw_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BW")}}},[e._v(" BW ")])],1),e._e(),e.position_counts_present?a("v-list",[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v(" Counts Visualization ")]),a("v-checkbox",{attrs:{label:e.show_counts_tixels?"Hide Counts":"Show Counts"},on:{click:e.toggle_tixel_counts_disp},model:{value:e.show_counts_tixels,callback:function(t){e.show_counts_tixels=t},expression:"show_counts_tixels"}}),e.show_counts_tixels?a("div",{style:{"background-image":""+e.linear_gradient_description_string,display:"flex",height:"50px","max-width":"250px","margin-left":"10px","margin-right":"10px"}},[a("div",{staticStyle:{position:"relative","padding-top":"50px",left:"5%"}},[e._v(" "+e._s(e.lower_bound_count)+" ")]),a("div",{staticStyle:{position:"relative","padding-top":"50px",left:"65%"}},[e._v(" "+e._s(e.upper_bound_count)+" ")])]):e._e()],1):e._e(),a("v-list",{staticClass:"pt-0 pl-2",attrs:{dense:""}},[a("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("On/Off")]),a("v-btn",{attrs:{outlined:"",disabled:!e.thresh_image_created||e.spatial,"x-small":"",dense:"",color:"primary"},on:{click:e.autoFill}},[e._v(" Autofill ")]),a("v-checkbox",{attrs:{dense:"",value:e.isBrushMode,disabled:!e.tixels_filled,label:"Fill"},model:{value:e.isBrushMode,callback:function(t){e.isBrushMode=t},expression:"isBrushMode"}}),a("v-checkbox",{attrs:{dense:"",value:e.isEraseMode,disabled:!e.tixels_filled,label:"Erase"},model:{value:e.isEraseMode,callback:function(t){e.isEraseMode=t},expression:"isEraseMode"}}),a("v-text-field",{staticStyle:{width:"100px"},attrs:{dense:"",label:"Br.Size",type:"number",min:"5.0",max:"100.0",step:"3.0",disabled:!e.tixels_filled},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}),[a("v-btn",{attrs:{disabled:!e.tixels_filled,outlined:"","x-small":"",dense:"",color:"primary"},on:{click:function(t){return e.handle_spatial_call()}}},[e._v(" Generate Spatial Folder ")])]],2)],1)]:e._e(),a("v-dialog",{attrs:{persistent:"",value:e.prompt_to_use_existing_spatial,"max-width":"800px"}},[a("v-card",[a("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),a("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.run_id)+" Spatial Folder Found. ")]),a("v-card-title",{staticClass:"justify-center"},[e._v(" Would you like to update the existing spatial folder or reprocess the image? ")]),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:function(t){return e.reprocess_image(e.run_id)}}},[e._v(" Reprocess ")]),a("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:e.update_run_function}},[e._v(" Update ")])],1)],1)],1),a("v-dialog",{attrs:{value:e.prompt_to_select_counts_positions,"max-width":"800px"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center"},[e._v(" Select tissue positions file with counts if available. ")]),a("v-card-actions",[a("v-select",{attrs:{items:e.count_file_options},model:{value:e.tissue_positions_counts_filename,callback:function(t){e.tissue_positions_counts_filename=t},expression:"tissue_positions_counts_filename"}}),a("v-btn",{on:{click:function(t){e.prompt_to_select_counts_positions=!1,e.load_counts_positions()}}},[e._v(" Confirm ")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",value:!e.image_processing_begun&&e.file_options.length>1&&!e.prompt_to_use_existing_spatial,"max-width":"800px"}},[a("v-card",[a("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),a("v-card-title",{staticClass:"justify-center"},[e._v(" Multiple Images Found. ")]),a("v-card-title",{staticClass:"justify-center"},[e._v(" Please select the BSA image to be used for processing. ")]),a("v-card-actions",{staticClass:"justify-center"},[a("v-col",[a("v-select",{attrs:{items:e.file_options,label:"Select Image",outlined:"",dense:"",color:"primary",small:""},model:{value:e.full_bsa_filename,callback:function(t){e.full_bsa_filename=t},expression:"full_bsa_filename"}}),a("v-btn",{staticStyle:{position:"relative",left:"50%",transform:"translateX(-50%)"},attrs:{disabled:""===e.full_bsa_filename,outlined:""},on:{click:function(t){e.show_metadata=!0,e.load_and_begin_image_processing()}}},[e._v(" Submit ")])],1)],1)],1)],1)],2),e.checkSpatial?e._e():a("v-col",{staticStyle:{"margin-top":"60px"},attrs:{cols:"12",sm:"9"}},[a("v-container",[e.loadingMessage?[a("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[a("v-card-text"),a("v-dialog",{attrs:{value:"true","hide-overlay":"",persistent:"",width:"600"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-title",[e._v(" Creating and Saving Spatial Folder")]),a("v-card-text",[a("v-progress-linear",{staticClass:"mb-0",attrs:{"buffer-value":"0",height:"10",stream:"",color:"white"},model:{value:e.one,callback:function(t){e.one=t},expression:"one"}})],1)],1)],1)],1)]:e._e(),a("v-row",[a("v-card",[e.loading&&!e.loadingMessage?[a("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[a("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)]:e._e(),e.checkSpatial||e.welcome_screen?e._e():a("v-stage",{ref:"konvaStage",staticClass:"mainStage",attrs:{config:e.konvaConfig},on:{mousemove:e.handleMouseMoveStage}},[e.current_image?a("v-layer",{ref:"imageLayer",attrs:{id:"imageLayer"},on:{click:e.imageClick}},[a("v-image",{ref:"image",attrs:{config:e.current_image}})],1):e._e(),e.grid?a("v-layer",{ref:"roiLayer",attrs:{id:"roiLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[e.updating_existing||e.isBrushMode||e.isEraseMode?e._e():[a("v-line",{attrs:{config:e.roi.generateBoundary()}})],a("v-transformer",{ref:"transformer"}),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():e._l(e.roi.getAnchors(),(function(t){return a("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart,dragmove:e.handleDragMove}})})),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():a("v-circle",{key:e.roi.getCenterAnchor().id,attrs:{config:e.roi.getCenterAnchor()},on:{dragstart:e.handleDragCenterStart,dragmove:e.handleDragCenterMove}})]:e._e()],2):e._e(),a("v-layer",e._l(100,(function(t){return a("v-group",{key:t},e._l(e.roi.get_polygon_subset(t-1,100),(function(t){return a("v-shape",{key:t.id,attrs:{config:t},on:{transformend:function(t){return e.roi.setScaleFactor()},mousedown:e.handleMouseDown}})})),1)})),1),a("v-layer",[e.isBrushMode||e.isEraseMode?a("v-circle",{attrs:{config:e.brushConfig},on:{mousedown:e.handleMouseDownBrush,mouseup:e.handleMouseUpBrush}}):e._e()],1),!e.isCropMode||e.grid||e.cropFlag?e._e():a("v-layer",{ref:"cropLayer",attrs:{id:"cropLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[a("v-rect",{attrs:{config:e.crop.generateRect()}}),e.isBrushMode?e._e():e._l(e.crop.getAnchors(),(function(t){return a("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart_Crop,dragend:e.handleDragEnd_Crop,dragmove:e.handleDragMove_Crop}})})),e.isBrushMode?e._e():a("v-circle",{key:e.crop.getCenterAnchor().id,attrs:{config:e.crop.getCenterAnchor()},on:{dragmove:e.handleDragCenterMove_Crop}})]:e._e()],2)],1)],2)],1)],2)],1),e.welcome_screen?a("v-col",{attrs:{cols:"12",sm:"12",justify:"center"}},[a("v-img",{staticClass:"center",attrs:{src:"/static/img/atlasbg.png",width:"width",height:"height"}})],1):e._e()],1)],1)],1)},vu=[],du=(a("4ec9"),a("25eb"),a("c740"),a("35a6")),fu=a.n(du),gu=a("a77c"),hu=a.n(gu),mu=a("31fa"),bu=a.n(mu),xu=a("0818"),_u=a.n(xu),yu=a("db49"),wu=a.n(yu),ku=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-select",{attrs:{disabled:e.disabled,items:e.display_options,label:e.display_label},on:{input:e.value_changed},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{attrs:{color:e.add_option?"red":"green"},on:{click:function(t){e.add_option=!e.add_option}}},[e._v(" "+e._s(e.add_option?"mdi-close":"mdi-table-plus")+" ")])]},proxy:!0}]),model:{value:e.local_variable,callback:function(t){e.local_variable=t},expression:"local_variable"}}),e.add_option?a("v-row",[a("v-text-field",{attrs:{label:"Add Option"},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-icon",{attrs:{disabled:0==e.custom_option.length,color:"green"},on:{click:e.new_option}},[e._v(" mdi-check ")])]},proxy:!0}],null,!1,3234581051),model:{value:e.custom_option,callback:function(t){e.custom_option=t},expression:"custom_option"}})],1):e._e()],1)},Ou=[],ju=Object(v["c"])({name:"custom-selector",props:{display_options:{type:Array,required:!0},display_label:{type:String,required:!0},variable:{required:!0},disabled:{type:Boolean}},model:{prop:"variable",event:"changed"},watch:{variable:function(e){this.local_variable=e}},setup:function(e,t){var a=Object(v["g"])(""),n=Object(v["g"])(""),r=Object(v["g"])(!1);function i(){t.emit("changed",a.value)}function u(){t.emit("option-added",n.value),a.value=n.value,n.value="",r.value=!1,i()}return Object(v["d"])((function(){e.variable&&(e.display_options.includes(e.variable)||t.emit("option-added",e.variable),a.value=String(e.variable))})),{local_variable:a,custom_option:n,add_option:r,value_changed:i,new_option:u}}}),Ru=ju,Cu=Object(te["a"])(Ru,ku,Ou,!1,null,null,null),Mu=Cu.exports,Su=Object(Ge["a"])((function e(){Object(ze["a"])(this,e),this.species_list=["mus_musculus","homo_sapiens","rattus_norvegicus","danio_rerio_(zebrafish)","gallus_domesticus_(chicken)","pdx","Mouse"],this.organ_list=["embryo","brain","kidney","polyp","liver","ovary","fallopian_tube_epithelium","cerebellum","retina","breast","bone_marrow","tonsil","scalp","pancreas","skin","tumor_allograft","melanoma_tumor","brain_tumor","colon_tumor","matched_liver_metastasis","tibialis_anterior_muscle_","hippocampus","lung","heart","embryonic_heart","spleen","colon","skull","thigh_skin","forearm_skin","shoulder_skin"],this.epitope_list=["H3K27me3","H3K27ac","H3K4me3"],this.group_list=[],this.tissue_source_list=[],this.pmid_list=[],this.tissue_type_list=["fresh_frozen","ffpe"],this.assay_list=["ATAC-seq","Transcriptome","CUT&Tag"],this.chip_resolution_list=["25um"]})),Au=(a("cb29"),function(){function e(t,a,n){Object(ze["a"])(this,e),this.get_distance_wscale=function(e,t,a,n,r){var i=Math.sqrt(Math.pow(a/r-e/r,2)+Math.pow(n/r-t/r,2)),u=Math.round(1e3*i);return u/1e3},this.scalefactor=a,this.coordinates={},this.initializeROI(t[0],t[1]),this.channels=n,this.polygons=[]}return Object(Ge["a"])(e,[{key:"get_polygon_subset",value:function(e,t){var a=Math.floor(this.polygons.length*(e/t)),n=Math.floor(this.polygons.length*((e+1)/t)),r=this.polygons.slice(a,n);return r}},{key:"initializeROI",value:function(e,t){var a=this,n=[[.15*e,.15*t],[e-.15*e,.15*t],[e-.15*e,t-.15*t],[.15*e,t-.15*t]];n.forEach((function(e,t){var n=Object(Pe["a"])(e,2),r=n[0],i=n[1],u=Ze(),o={draggable:!0,id:u,x:r,y:i,stroke:"green",radius:10};a.coordinates&&(a.coordinates[u]=o)}))}},{key:"getCoordinates",value:function(){var e=[];return M.a.forIn(this.coordinates,(function(t,a){var n={x:t.x,y:t.y,id:a};e.push(n)})),e}},{key:"setCoordinates",value:function(e){var t=this,a=0;M.a.forIn(this.coordinates,(function(n,r){t.coordinates[r]={x:e[a].x*t.scalefactor,y:e[a].y*t.scalefactor},a+=1}))}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=e.map((function(e){var t={draggable:!0,id:e.id,x:e.x,y:e.y,stroke:"green",radius:10};return t}));return t}},{key:"moveToNewCenter",value:function(e){var t=this,a=this.getCenterAnchor(),n=e.x-a.x,r=e.y-a.y;M.a.forIn(this.coordinates,(function(e,a){t.coordinates[a].x+=n,t.coordinates[a].y+=r}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/4,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/4,stroke:"green",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];return M.a.forIn(this.coordinates,(function(a,n){var r={x:a.x/e.scalefactor,y:a.y/e.scalefactor};t.push(r)})),t}},{key:"getMask",value:function(e){var t=this;return this.polygons.map((function(e){var a=e.posit,n=e.centery/t.scalefactor,r=e.centerx/t.scalefactor,i=e.on_tissue;return{position:a,value:i,coordinates:{y:n,x:r}}}))}},{key:"getOnTissue",value:function(){var e=0;return this.polygons.forEach((function(t){t.on_tissue&&(e+=1)})),e}},{key:"autoMask",value:function(e,t){var a=this,n=Object(Pe["a"])(e.shape,2),r=(n[0],n[1]),i=0;return M.a.each(this.polygons,(function(n,u){0===i&&(i+=1);for(var o=Math.round(n.centery/a.scalefactor),l=Math.round(n.centerx/a.scalefactor),s=Math.round(n.radius/a.scalefactor),c=0,p=l-s;p<l+s;p+=1)for(var v=o-s;v<o+s;v+=1)c+=e.data[p*r+v];c/=Math.pow(2*s,2);var d=c<t;a.polygons[u].fill=d?"red":null,a.polygons[u].on_tissue=d})),this.polygons}},{key:"generateBoundary",value:function(){var e=this.getCoordinates(),t=[];M.a.each(e,(function(e,a){t.push(e.x),t.push(e.y)}));var a={points:t,stroke:"red",strokeWidth:1,closed:!0,visible:!0};return a}},{key:"setPolygonsInCircle",value:function(e,t,a,n){var r=this;M.a.each(this.polygons,(function(i,u){var o=Math.pow(i.centerx-e,2)+Math.pow(i.centery-t,2)<Math.pow(a,2);o&&r.setPolygonState(u,n)}))}},{key:"setPolygonState",value:function(e,t){var a=this;Object.keys(t).forEach((function(n){a.polygons[e][n]=t[n]}))}},{key:"fill_color_counts",value:function(e){if(Object.keys(e).length===this.polygons.length)for(var t=0;t<this.polygons.length;t+=1)this.polygons[t].fill=e[t],this.polygons[t].opacity=this.polygons[t].on_tissue?1:.5}},{key:"remove_color_counts",value:function(){for(var e=0;e<this.polygons.length;e+=1){var t=null;this.polygons[e].on_tissue&&(t="red"),this.polygons[e].fill=t,this.polygons[e].opacity=1}}},{key:"toggle_tixel_visibility",value:function(){for(var e=0;e<this.polygons.length;e+=1)this.polygons[e].visible=!this.polygons[e].visible}},{key:"show_tixels",value:function(){0===this.polygons.length?this.loadTixels():this.toggle_tixel_visibility()}},{key:"setScaleFactor",value:function(e){var t=this,a=this.scalefactor;this.scalefactor=e;var n=this.scalefactor/a,r={};M.a.forIn(this.coordinates,(function(e,t){r[t]={x:e.x*n,y:e.y*n}})),this.coordinates=r;var i=[];M.a.each(this.polygons,(function(e,a){var r=e;r.scaleX=e.scaleX*n,r.scaleY=e.scaleY*n,r.radius=e.radius*n,r.centerx=e.centerx*n,r.centery=e.centery*n,r.strokeWidth=.8*Math.max(1-t.scalefactor,.1),i.push(r)})),this.polygons=i}},{key:"getQCScaleFactors",value:function(t,a){var n=2e3/t.image.width,r=600/t.image.width,i=this.getMask(a);i.length;var u=i[0].coordinates,o=(u.x,u.y,i[1].coordinates),l=(o.x,o.y,this.getCoordinates()),s=Object(Pe["a"])(l,4),c=s[0],p=s[1],v=(s[2],s[3]),d=2*this.channels-1,f=e.ratio50l(c.x,c.y,v.x,v.y,d),g=e.ratio50l(c.x,c.y,p.x,p.y,d),h=[f[1]-c.y,f[0]-c.x],m=this.get_distance_wscale(f[0],f[1],g[0],g[1],this.scalefactor),b=this.get_distance_wscale(c.x,c.y,g[0]+h[1],g[1]+h[0],this.scalefactor),x=(m+b)/2,_=1.6153846;return{spot_diameter_fullres:x,fiducial_diameter_fullres:x*_,tissue_hires_scalef:n,tissue_lowres_scalef:r}}},{key:"loadTixels",value:function(){var t,a,n,r,i,u=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=this.getCoordinates(),s=Object(Pe["a"])(l,4),c=s[0],p=s[1],v=(s[2],s[3]),d=2*this.channels-1,f=e.ratio50l(c.x,c.y,v.x,v.y,d),g=e.ratio50l(c.x,c.y,p.x,p.y,d),h=[f[1]-c.y,f[0]-c.x],m=[g[1]-c.y,g[0]-c.x],b=[2*h[0],2*h[1]],x=[2*m[0],2*m[1]],_=[];_.push(c.x),_.push(c.y);var y=[0,0],w=[0,0],k=!1;this.polygons=[];for(var O=0;O<this.channels;O+=1){y.fill(_[0]+m[1],0),y.fill(_[1]+m[0],1),k=!1;for(var j=function(l){!1===k?(w.fill(_[0],0),w.fill(_[1],1),t=[w[0],w[1]],a=[y[0],y[1]],n=[t[0]+h[1],t[1]+h[0]],r=[a[0]+h[1],a[1]+h[0]],k=!0):(w[0]+=b[1],w[1]+=b[0],t=[w[0],w[1]],a=[y[0],y[1]],n=[t[0]+h[1],t[1]+h[0]],r=[a[0]+h[1],a[1]+h[0]]),i=e.center(t,a,r,n);var s=[t[0],t[1]],c=[a[0],a[1]],p=[n[0],n[1]],v=[r[0],r[1]],d=O*u.channels+l,f="0",g=o[O*u.channels+l];if(g){var m=g[1];f=m}var x={sceneFunc:function(e,t){e.beginPath(),e.moveTo(s[0],s[1]),e.lineTo(c[0],c[1]),e.lineTo(v[0],v[1]),e.lineTo(p[0],p[1]),e.closePath(),e.fillStrokeShape(t)},id:d.toString(),fill:"1"===f?"red":null,on_tissue:"1"===f,visible:!0,centerx:i[0],centery:i[1],radius:h[0],opacity:1,stroke:"black",strokeWidth:.5,listening:!0,posit:[l,O],scaleX:1,scaleY:1,raw_fragments:null,log_fragments:null};u.polygons.push(x),y[0]+=b[1],y[1]+=b[0]},R=0;R<this.channels;R+=1)j(R);_[0]+=x[1],_[1]+=x[0]}}},{key:"generatePolygons",value:function(){return this.loadTixels(),this.polygons}}],[{key:"center",value:function(e,t,a,n){var r=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[(n[0]+a[0])/2,(n[1]+a[1])/2],u=(r[0]+i[0])/2,o=(r[1]+i[1])/2;return[u,o]}},{key:"ratio50l",value:function(e,t,a,n,r){var i=e+1/r*(a-e),u=t+1/r*(n-t);return[i,u]}}]),e}()),Fu=function(){function e(t,a){Object(ze["a"])(this,e),this.scalefactor=a,this.coordinates={},this.initialize(t[0],t[1])}return Object(Ge["a"])(e,[{key:"initialize",value:function(t,a){var n=this,r=e.distance([.25*t,.15*a],[t-.25*t,.15*a]),i=[[.25*t,.15*a],[t-.25*t,r+.15*a]];i.forEach((function(e,t){var a=Object(Pe["a"])(e,2),r=a[0],i=a[1],u=t,o={draggable:!0,id:u,x:r,y:i,stroke:"red",radius:10};n.coordinates&&(n.coordinates[u]=o)}))}},{key:"getCoordinates",value:function(){var e=[];return M.a.forIn(this.coordinates,(function(t,a){var n={x:t.x,y:t.y,id:a};e.push(n)})),e}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=this.realCoords(),a=e.map((function(e,a){var n={draggable:!0,id:e.id,x:t[a].x,y:t[a].y,stroke:"red",radius:10};return n}));return a}},{key:"moveToNewCenter",value:function(e,t,a){var n=this,r=this.getCenterAnchor(),i=e.x-r.x,u=e.y-r.y;M.a.forIn(this.coordinates,(function(e,t){n.coordinates[t].x+=i,n.coordinates[t].y+=u}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/2,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/2,stroke:"red",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];M.a.forIn(this.coordinates,(function(a,n){t.push(Math.round(a.x/e.scalefactor)),t.push(Math.round(a.y/e.scalefactor))}));var a=Math.round(t[1]-t[0]),n=Math.round(t[3]-t[2]),r=0;return a>n&&(r=a-n),a<n&&(r=a-n),t[3]+=r,t}},{key:"setCoordinates",value:function(e){var t=this,a=0;M.a.forIn(this.coordinates,(function(n,r){t.coordinates[r]={x:e[a].x*t.scalefactor,y:e[a].y*t.scalefactor},a+=1}))}},{key:"generateRect",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),a=Math.floor(e[1].y-e[0].y),n=0;t>a&&(n=t-a),t<a&&(n=t-a);var r=Object(Pe["a"])(e,2),i=r[0],u=r[1];u.y+=n;var o=Math.min(i.x,u.x),l=Math.min(i.y,u.y),s=Math.abs(i.x-u.x),c=Math.abs(i.y-u.y),p={x:o,y:l,width:s,height:c,stroke:"blue",strokeWidth:2};return p}},{key:"realCoords",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),a=Math.floor(e[1].y-e[0].y),n=0;t>a&&(n=t-a),t<a&&(n=t-a);var r=Object(Pe["a"])(e,2),i=r[0],u=r[1];return u.y+=n,this.coordinates[1].y+=n,[i,u]}},{key:"setScaleFactor",value:function(e){var t=this.scalefactor;this.scalefactor=e;var a=this.scalefactor/t,n={};M.a.forIn(this.coordinates,(function(e,t){n[t]={x:e.x*a,y:e.y*a}})),this.coordinates=n}}],[{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}]),e}(),Iu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),a("v-card-title",{staticClass:"justify-center"},[e._v(" Run ID: "+e._s(e.run_id)+" ")]),a("v-card-text",[a("v-select",{attrs:{outlined:"",dense:"",label:"Barcode File",items:e.barcode_filename_list,disabled:e.metadata_confirmed_bool},model:{value:e.metadata.barcode_filename,callback:function(t){e.$set(e.metadata,"barcode_filename",t)},expression:"metadata.barcode_filename"}}),a("selector",{attrs:{display_label:"Species",display_options:e.drop_down_manager.species_list},on:{"option-added":function(t){return e.updateList("species_list",t)}},model:{value:e.metadata.species,callback:function(t){e.$set(e.metadata,"species",t)},expression:"metadata.species"}}),a("selector",{attrs:{display_label:"Organ",display_options:e.drop_down_manager.organ_list},on:{"option-added":function(t){return e.updateList("organ_list",t)}},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),a("selector",{attrs:{display_label:"Tissue Type",display_options:e.drop_down_manager.tissue_type_list},on:{"option-added":function(t){return e.updateList("tissue_type_list",t)}},model:{value:e.metadata.tissue_type,callback:function(t){e.$set(e.metadata,"tissue_type",t)},expression:"metadata.tissue_type"}}),a("v-select",{attrs:{items:e.drop_down_manager.assay_list,label:"Assay"},model:{value:e.metadata.assay,callback:function(t){e.$set(e.metadata,"assay",t)},expression:"metadata.assay"}}),a("selector",{directives:[{name:"show",rawName:"v-show",value:"CUT&Tag"===e.metadata.assay,expression:"metadata.assay === 'CUT&Tag'"}],attrs:{display_label:"Epitope Name",display_options:e.drop_down_manager.epitope_list},on:{"option-added":function(t){return e.updateList("epitope_list",t)}},model:{value:e.metadata.antibody,callback:function(t){e.$set(e.metadata,"antibody",t)},expression:"metadata.antibody"}}),a("selector",{attrs:{display_label:"Chip Resolution",display_options:e.drop_down_manager.chip_resolution_list},on:{"option-added":function(t){return e.updateList("chip_resolution_list",t)}},model:{value:e.metadata.chip_resolution,callback:function(t){e.$set(e.metadata,"chip_resolution",t)},expression:"metadata.chip_resolution"}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:!e.metadata.barcode_filename,outlined:""},on:{click:e.metadata_confirmed}},[e._v(" Confirm ")])],1)],1)},Du=[],Tu=Object(v["c"])({name:"MetadataDropdown",components:{Selector:Mu},props:{metadata:{type:Object,required:!0},run_id:{type:String,required:!0},drop_down_manager:{type:Object,required:!0},updating_existing:{type:Boolean,required:!0},barcode_filename_list:{type:Array,required:!0},metadata_confirmed_bool:{type:Boolean,required:!0}},setup:function(e,t){var a=Object(v["a"])((function(){return e.drop_down_manager}));function n(){t.emit("confirmed")}function r(){t.emit("refresh")}function i(e,t){var n=a.value[e].map((function(e){return e}));n.push(t),a.value[e]=n}return{metadata_confirmed:n,pageRefresh:r,updateList:i}}}),Eu=Tu,Pu=Object(te["a"])(Eu,Iu,Du,!1,null,null,null),Bu=Pu.exports,Uu=new Promise((function(e){var t=Object(v["a"])((function(){return null!==B.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Nu=[{text:"ID",value:"id"}],zu=Object(v["c"])({name:"AtlasBrowser",props:["query"],components:{Selector:Mu,MetadataDropdown:Bu,Appbar:Er,MainMenu:_t},setup:function(e,t){var a,n=Object(v["a"])((function(){return wu.a.atlasxbrowser.bucket_name})),r=Object(v["a"])((function(){return wu.a.atlasxbrowser.bucket_name_spatial})),i=Object(v["a"])((function(){return wu.a.atlasxbrowser.root_dir})),u=Object(v["a"])((function(){return wu.a.atlasxbrowser.root_dir_spatial})),o=Object(v["g"])(!0),l=new Su,s=t.root.$router,c=Object(v["g"])(),p=Object(v["g"])([]),d=Object(v["a"])((function(){return t.root.$route})),f=Object(v["g"])([]),g=Object(v["g"])([]),h=Object(v["g"])([]),m=Object(v["g"])(),b=Object(v["g"])(""),x=Object(v["g"])(""),_=Object(v["g"])([]),y=Object(v["g"])({width_window:window.innerWidth,height_window:window.innerHeight}),w=Object(v["g"])({x:null,y:null,radius:20,fill:null,stroke:"red"}),O=Object(v["g"])(!1),j=Object(v["g"])(!1),R=Object(v["g"])(!1),C=Object(v["g"])(!1),S=Object(v["g"])(20),A=Object(v["g"])(!1),F=Object(v["g"])(new Fu([0,0],.15)),I=Object(v["g"])(new Au([0,0],.15,null)),D=Object(v["a"])((function(){return 0!==I.value.polygons.length&&I.value.polygons[0].visible})),T=Object(v["g"])(!1),E=Object(v["g"])(!1),P=Object(v["g"])(!1),U=Object(v["g"])(window.innerWidth),N=Object(v["g"])(window.innerHeight),z=Object(v["g"])(null),G=Object(v["g"])(null),L=Object(v["g"])(null),V=Object(v["g"])(.15),$=Object(v["g"])(0),q=Object(v["g"])(0),W=Object(v["g"])(0),H=Object(v["g"])(0),J=Object(v["g"])([]),X=Object(v["g"])(210),Q=Object(v["g"])(!1),Y=Object(v["g"])(!1),K=Object(v["g"])(new Map),Z=Object(v["g"])(!1),ee=Object(v["g"])(!1),te=Object(v["g"])(),ae=Object(v["g"])(null),ne=Object(v["g"])(null),re=Object(v["g"])({horizontal_flip:!1,vertical_flip:!1,rotation:0}),ie=Object(v["g"])(null),ue=Object(v["g"])(!1),oe=Object(v["g"])(!1),le=Object(v["g"])(!1),se=Object(v["g"])(!1),ce=Object(v["g"])(!1),pe=Object(v["g"])(),ve=Object(v["g"])(""),de=Object(v["g"])(""),fe=Object(v["g"])([]),ge=Object(v["g"])({}),he=Object(v["g"])(!1),me=Object(v["g"])(!1),be=Object(v["g"])(!1),xe=Object(v["g"])(!1),_e=Object(v["g"])(!1),ye=Object(v["g"])(0),we=Object(v["g"])(0),Oe=Object(v["g"])(!1),je=Object(v["g"])(!1),Re=Object(v["g"])(!1),Ce=(Object(v["g"])(!1),Object(v["g"])(!1)),Me=Object(v["g"])(),Se=Object(v["g"])(7),Ae=Object(v["g"])(7),Fe=Object(v["g"])(!0),Ie=Object(v["g"])(!1),De=Object(v["g"])(!1),Te=Object(v["g"])("90"),Ee=Object(v["g"])({fiducial_diameter_fullres:null,spot_diameter_fullres:null,tissue_hires_scalef:null,tissue_lowres_scalef:null}),Be=Object(v["g"])(!1),Ue=Object(v["g"])(),Ne=Object(v["g"])(null),ze=Object(v["g"])([]),Ge=Object(v["g"])(),Le=Object(v["g"])(),Ve=Object(v["g"])([]),$e=Object(v["g"])([]),We=Object(v["g"])([]),Xe=Object(v["a"])((function(){return wu.a.atlasxbrowser.barcode_mapping})),Qe=Object(v["g"])(""),Ke=Object(v["g"])(!1),Ze=0,nt=Object(v["g"])({points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""});function rt(){window.location.reload()}function it(){t.refs.mainmenu.openDrawer()}function ut(e){if(e){if(e.component!==d.value.query.component){var t="/".concat(e.component);s.push(t)}}else if(d.value.query.component){var a="/".concat(e.component);s.push(a)}}function ot(){nt.value={points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""}}function vt(){I.value=new Au([0,0],V.value,null),F.value=new Fu([0,0],V.value),I.value.setScaleFactor(V.value),F.value.setScaleFactor(V.value),E.value=!1,Be.value=!1,T.value=!1,j.value=!1,C.value=!1,Q.value=!1,Y.value=!1,O.value=!1,R.value=!1,ue.value=!1,oe.value=!1,ce.value=!1,Re.value=!1,Z.value=!1,Me.value=null,Oe.value=!1,re.value={horizontal_flip:!1,vertical_flip:!1,rotation:0},x.value="",je.value=!1,xe.value=!1,_e.value=!1,fe.value=[],de.value="",Ke.value=!1,Qe.value="",Ze=0}function dt(e){}function ft(e){var t=tt(d,e),a=s.resolve(t).href!==d.value.fullPath;a&&s.push(t)}var gt=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c.value.getTaskStatus(t);case 4:te.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ht(e){var t=V.value;z.value.scale={x:t,y:t},y.value.width=t*z.value.image.width,y.value.height=t*z.value.image.height,U.value=y.value.width,N.value=y.value.height,I.value.setScaleFactor(t),F.value.setScaleFactor(t)}function mt(e){var t=Xe.value[e];t&&(nt.value.barcode_filename=t)}function bt(){return xt.apply(this,arguments)}function xt(){return xt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function _t(){return yt.apply(this,arguments)}function yt(){return yt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,o,l,s,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return",!1);case 2:return Re.value=!1,Z.value=!0,ee.value=!1,t="".concat(u.value,"/").concat(b.value,"/spatial/metadata.json"),a="".concat(u.value,"/").concat(b.value,"/spatial/scalefactors_json.json"),n="".concat(u.value,"/").concat(b.value,"/spatial/tissue_positions_list.csv"),i={params:{filename:t,bucket_name:r.value,no_aws_yes_server:!1}},e.next=11,c.value.getJsonFile(i);case 11:return o=e.sent,l={params:{filename:n,bucket_name:r.value,no_aws_yes_server:!1}},e.next=15,c.value.getCsvFile(l);case 15:return s=e.sent,p={params:{filename:a,bucket_name:r.value,no_aws_yes_server:!1}},e.next=19,c.value.getJsonFile(p);case 19:if(v=e.sent,!(o&&s&&v)){e.next=29;break}return Ee.value=v,pe.value=s,Z.value=!1,nt.value=o,o.barcodes&&mt(o.barcodes),Qe.value=nt.value.barcode_filename,ke.dispatch({text:"Metadata loaded from existing spatial directory",options:{color:"success",right:!0}}),e.abrupt("return",!0);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}function wt(e){return kt.apply(this,arguments)}function kt(){return kt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=wu.a.atlasxbrowser.barcode_files_path.concat("/".concat(t)),i={params:{filename:r,bucket_name:n.value}},e.next=4,null===(a=c.value)||void 0===a?void 0:a.getCsvFile(i);case 4:return u=e.sent,o=[],u.forEach((function(e){o.push(e[0])})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function Ot(e){var t=Math.floor(Math.sqrt(e.length));return t*t!==e.length?-1:t}function jt(e){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return e.next=4,wt(t);case 4:return a=e.sent,n=Ot(a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function Ct(){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(nt.value.barcode_filename){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,wt(nt.value.barcode_filename);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:if(a=Ot(t),-1!==a){e.next=10;break}return e.abrupt("return",!1);case 10:return ie.value=a,I.value.channels=ie.value,We.value=t,e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)}))),Mt.apply(this,arguments)}function St(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ue.value=!0,oe.value=!0;var t=at(nt.value.points,2),a=t.map((function(e){return{x:e[0],y:e[1]}}));I.value.setCoordinates(a),re.value=nt.value.orientation,e&&I.value.loadTixels(pe.value)}function At(){ue.value=!0,I.value.show_tixels()}function Ft(){return It.apply(this,arguments)}function It(){return It=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ce.value=!1,t=!0,Z.value||(Z.value=!0,t=!1),Ke.value){e.next=25;break}return e.next=6,Ct();case 6:if(a=e.sent,a){e.next=13;break}Ce.value=!0,Ke.value=!1,ke.dispatch({text:"Invalid barcode file.",options:{color:"error"}}),e.next=25;break;case 13:if(n=!0,r=!0,!Oe.value){e.next=24;break}if(nt.value.barcode_filename===Qe.value){e.next=21;break}return e.next=19,jt(Qe.value);case 19:i=e.sent,i!==ie.value&&(n=!1,r=!1);case 21:St(r),O.value=n,n||At();case 24:Ke.value=!0;case 25:t||(Z.value=!1);case 26:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function Dt(e){if(!c.value)return null;var t=c.value.getImageAsJPG(e);return t}function Tt(e){if(!c.value)return null;try{var t=F.value.getCoordinatesOnImage();Oe.value&&(t=nt.value.crop_area);var a=t[0],r=t[1],i=t[2],u=t[3],o={params:{bucket_name:n.value,filename:e,rotation:re.value.rotation,x1:a,x2:i,y1:r,y2:u}},l=c.value.getGrayImageAsCroppedJPG(o);return l}catch(s){return Z.value=!1,null}}function Et(e){var t=new window.Image;t.src=URL.createObjectURL(e);var a=.1;return t&&(t.onload=function(e){z.value={x:0,y:0,draggable:!1,scale:{x:a,y:a},image:t,src:null,original_src:null},ht("")}),t}function Pt(){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,l,s,v,d,f,g,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:return o.value=!1,je.value=!0,Z.value=!0,ee.value=!1,a=!1,l=n.value,Oe.value?(t="".concat(u.value,"/").concat(b.value,"/spatial/figure/postB_BSA.tif"),Fe.value=!0,De.value=!1,Ie.value=!1,a=!0,l=r.value):t=x.value,s={path:"".concat(i.value,"/").concat(b.value,"/"),filter:[""],bucket:n.value,only_files:!0},e.prev=10,v={params:{bucket_name:l,filename:t,rotation:re.value.rotation,use_cache:a}},e.next=14,c.value.getImageAsJPG(v);case 14:return d=e.sent,Me.value=d,f=Et(d),e.next=19,c.value.getFileList(s);case 19:p.value=e.sent,Ge.value=f.src,Oe.value&&(g="".concat(u.value,"/").concat(b.value,"/spatial/figure/postB.tif"),h={params:{rotation:0,filename:g,use_cache:!0,bucket_name:r.value}},m=Dt(h),m&&(G.value=m)),Z.value=!1,Re.value=!1,e.next=31;break;case 26:e.prev=26,e.t0=e["catch"](10),console.log(e.t0),Z.value=!1,ke.dispatch({text:"Failed to load the image file",options:{color:"error",right:!0}});case 31:case"end":return e.stop()}}),e,null,[[10,26]])}))),Bt.apply(this,arguments)}function Ut(){_e.value?I.value.fill_color_counts(ge.value):I.value.remove_color_counts()}function Nt(e,t){var a=e.width,n=e.height,r=Math.abs(a*Math.cos(t))+Math.abs(n*Math.sin(t)),i=Math.abs(a*Math.sin(t))+Math.abs(n*Math.cos(t));return{width:r,height:i}}function zt(e,t,a,n,r,i,u,o){var l,s;return a<n?(l=Math.min(r,o),s=0):a<Math.PI/2?(l=Math.max(r,o),s=0):a<Math.PI/2+n?(l=e,s=Math.min(u,i)):a<Math.PI?(l=e,s=Math.max(u,i)):a<Math.PI+n?(l=Math.max(r,o),s=t):a<Math.PI/2*3?(l=Math.min(r,o),s=t):a<Math.PI/2*3+n?(l=0,s=Math.max(u,i)):a<2*Math.PI&&(l=0,s=Math.min(u,i)),[l,s]}function Gt(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Z.value=!0,1===t?(n=90,re.value.rotation+=270,Ze+=n):(r="90"===Te.value?3*parseInt(Te.value,10):315,Ze+=r,re.value.rotation+="90"===Te.value?parseInt(Te.value,10):45),i=new window.Image,i.src=URL.createObjectURL(Me.value),u=document.createElement("canvas"),o=u.getContext("2d"),i.onload=function(e){URL.revokeObjectURL(i.src);var t=Math.atan(i.width/i.height),n=Ze%360*Math.PI/180,r=Nt({width:i.width,height:i.height},n),l=r.width,s=r.height;u.width=l,u.height=s;var c=i.height*Math.abs(Math.sin(n)),p=i.height*Math.abs(Math.cos(n)),v=i.width*Math.abs(Math.cos(n)),d=i.width*Math.abs(Math.sin(n)),f=zt(l,s,n,t,c,d,p,v);o.translate(f[0],f[1]),o.rotate(n),o.drawImage(i,0,0),u.toBlob((function(e){Et(e);a=e}))},Z.value=!1;case 8:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Vt(e){for(var t=e,a=[],n=new RegExp("".concat(t,"[a-zA-z]*[0-9]*")),r=0;r<f.value.length;r+=1)n.test(f.value[r].id)&&a.push(f.value[r]);g.value=a}function $t(){return qt.apply(this,arguments)}function qt(){return qt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:return t=wu.a.atlasxbrowser.barcode_files_path.concat("/"),a={path:t,bucket:n.value,filter:".txt",only_files:!0,delimiter:"/"},e.next=6,c.value.getFileList(a);case 6:r=e.sent,r.forEach((function(e){var t=e.lastIndexOf("/");if(t<e.length-1){var a=e.substring(t+1,e.length);$e.value.push(a)}}));case 8:case"end":return e.stop()}}),e)}))),qt.apply(this,arguments)}function Wt(e,t){e.sort((function(e,t){var a=e[7],n=t[7];return a>n?1:a<n?-1:0}));for(var a=Math.sqrt(e.length),n=0;n<e.length;n+=1){var r=Math.floor(n/e.length*100),i=Number.parseInt(e[n][2],10),u=Number.parseInt(e[n][3],10),o=i*a+u;ge.value[o]=t[r]}var l=e[Math.round(.05*e.length)][7],s=e[Math.round(.95*e.length)][7];ye.value=Math.round(100*l)/100,we.value=Math.round(100*s)/100}function Ht(){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,u,o,l,s,p,v,d,f,g,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>0&&void 0!==h[0]?h[0]:de.value,n=h.length>1&&void 0!==h[1]?h[1]:r.value,i={params:{bucket_name:n,filename:a}},e.next=5,null===(t=c.value)||void 0===t?void 0:t.getCsvFile(i);case 5:if(u=e.sent,"Not-Found"!==u&&8===u[0].length){e.next=10;break}return ke.dispatch({text:"Error! Incompatible File!",options:{color:"red"}}),de.value="",e.abrupt("return");case 10:u.sort((function(e,t){var a=Number.parseInt(e[2],10),n=Number.parseInt(e[3],10),r=Number.parseInt(t[2],10),i=Number.parseInt(t[3],10);return a>r?1:a<r?-1:n>i?1:-1})),pe.value=u,o=JSON.parse(JSON.stringify(u)),l=oi()({colormap:"jet",nshades:100,format:"hex"}),Wt(o,l),s=l[0],p=Math.round(100*o[0][7])/100,v=l[49],d=Math.round(100*o[Math.round(.5*u.length)][7])/100,f=l[99],g=Math.round(100*o[o.length-1][7])/100,ve.value="linear-gradient(to right, ".concat(s,", ").concat(v,", ").concat(f,")"),Ve.value=[p,d,g],ke.dispatch({text:"Successfully Loaded Tissue Position Counts",options:{color:"green",position:"center"}}),xe.value=!0;case 25:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Xt(e){var t=V.value;null!==z.value?(z.value.scale={x:t,y:t},y.value.width=t*z.value.image.width,y.value.height=t*z.value.image.height,U.value=y.value.width,N.value=y.value.height):(y.value.width=U.value,y.value.height=N.value)}function Qt(e){e.target.attrs.id}function Yt(e){e.target.attrs.id,e.target._lastPos}function Kt(e){var t=e.target.attrs.id,a=e.target._lastPos;a.x>5&&a.y>5&&a.x<z.value.image.width&&a.y<z.value.image.height?(F.value.coordinates[t].x=a.x,F.value.coordinates[t].y=a.y):(F.value.coordinates[t].x=Math.min(Math.max(0,a.x),U.value),F.value.coordinates[t].y=Math.min(Math.max(0,a.y),N.value))}function Zt(e){F.value.moveToNewCenter(e.target._lastPos,U.value,N.value)}function ea(e){e.target.attrs.id;I.value.polygons=[]}function ta(e){var t=e.target.attrs.id,a=e.target._lastPos;a.x>5&&a.y>5&&a.x<U.value&&a.y<N.value?(I.value.coordinates[t].x=a.x,I.value.coordinates[t].y=a.y):(I.value.coordinates[t].x=Math.min(Math.max(0,a.x),U.value),I.value.coordinates[t].y=Math.min(Math.max(0,a.y),N.value))}function aa(e){I.value.polygons=[]}function na(e){I.value.moveToNewCenter(e.target._lastPos)}function ra(){var e={};_e.value?e.opacity=C.value?.5:1:e.fill=C.value?null:"red",e.on_tissue=!C.value,I.value.setPolygonsInCircle(w.value.x,w.value.y,w.value.radius,e)}function ia(e){if(0!==I.value.polygons.length){if(j.value)return P.value=!0,void ra();var t=e.target.attrs.id,a=M.a.findIndex(I.value.polygons,{id:t}),n={},r=I.value.polygons[a].on_tissue;n.on_tissue=!r,_e.value?n.opacity=r?.5:1:n.fill=r?null:"red",I.value.setPolygonState(a,n),P.value=!0}}function ua(e){P.value=!1}function oa(e){if(j.value||C.value){var a=t.refs.konvaStage.getNode().getPointerPosition(),n=a.x,r=a.y;w.value.x=n,w.value.y=r,A.value&&ra()}}function la(e){A.value=!0,ra()}function sa(e){A.value=!1}function ca(e){j.value=e}function pa(){I.value.toggle_tixel_visibility()}function va(e){return da.apply(this,arguments)}function da(){return da=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Fe.value=!1,De.value=!1,Ie.value=!1,a=null,"postB"!==t){e.next=12;break}if(L.value||!Oe.value||null==G.value){e.next=8;break}return e.next=8,G.value.then((function(e){L.value=URL.createObjectURL(e)}));case 8:a=L.value,De.value=!0,e.next=13;break;case 12:"BSA"===t?(a=Ge.value,Fe.value=!0):"BW"===t&&(a=Ue.value,Ie.value=!0);case 13:z.value.image.src=a;case 14:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function fa(){R.value=!0,Me.value=a}function ga(){var e=F.value.getCoordinatesOnImage(),t=z.value.image,a=t.width,n=t.height,r=Object(Pe["a"])(e,4),i=r[0],u=r[1],o=r[2],l=r[3];if(i<0||u<0||o>a||l>n)ke.dispatch({text:"Keeping Cropping on Image",options:{color:"warning",right:!0}});else{var s=Tt(x.value);s&&(G.value=s),le.value=!0,oe.value=!0,R.value=!0,E.value=!0;var c=new window.Image;new window.Image;c.src=URL.createObjectURL(Me.value);var p=document.createElement("canvas"),v=p.getContext("2d");c.onload=function(t){URL.revokeObjectURL(c.src),p.width=e[2]-e[0],p.height=e[3]-e[1],v.drawImage(c,e[0],e[1],e[2]-e[0],e[3]-e[1],0,0,e[2]-e[0],e[3]-e[1]),p.toBlob((function(e){var t=Et(e);Ge.value=t.src,le.value=!1}))},I.value=new Au([(e[2]-e[0])*V.value,(e[3]-e[1])*V.value],V.value,ie.value)}}function ha(){ue.value=!0,E.value=!1,T.value=!0}function ma(e){se.value=!0,Q.value=!0;var t=V.value;fu()(e,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a,n){var r,i,u,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new window.Image,i=Number(Se.value),u=Number(Ae.value),o=_u()(n,{compensation:i,size:u}),J.value=o,l=bu()(),hu()(o,"jpeg").pipe(l).on("finish",(function(){var e=l.toBlobURL("image/jpeg");r.src=e,Ue.value=e,r.onload=function(e){z.value={x:0,y:0,draggable:!1,scale:{x:V.value,y:V.value},image:r,src:null,original_src:null,alternative_src:null},ht(t)},Y.value=!0,Z.value=!1,se.value=!1,va("BW")}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}function ba(){z.value&&G.value&&(Z.value=!0,G.value.then((function(e){var t=URL.createObjectURL(e);L.value=t,ma(L.value)})))}var xa=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:$.value=t;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _a(){return ya.apply(this,arguments)}function ya(){return ya=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,o,l,s,v,d,f,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:if(nt.value.barcode_filename){e.next=5;break}return ke.dispatch({text:"Must Select Barcode File Before Generating Spatial Folder",options:{color:"warning",right:!0}}),e.abrupt("return");case 5:return e.prev=5,$.value=0,q.value=0,W.value=0,ee.value=!0,ae.value=null,Z.value=!0,t="atlasbrowser.generate_spatial",a="atxcloud_atlasbrowser",o=I.value.getCoordinatesOnImage(),l=F.value.getCoordinatesOnImage(),Oe.value&&(l=nt.value.crop_area),s=[],o.forEach((function(e,t){s.push(e.x),s.push(e.y)})),nt.value=Object.assign(nt.value,{points:s,run:b.value,blockSize:Ae.value,threshold:X.value,cValue:Se.value,numChannels:ie.value,orientation:re.value,crop_area:l,onTissueTixels:I.value.getOnTissue()}),v={run_id:b.value,files:p.value,crop_area:l,mask:I.value.getMask(l),metadata:nt.value,scalefactors:I.value.getQCScaleFactors(z.value,l),orientation:re.value,barcode_filename:nt.value.barcode_filename,barcode_list:We.value,bucket_name_bsa:n.value,bucket_name_spatial:r.value,root_dir_spatial:u.value,root_dir_bsa:i.value,bsa_filename:x.value,updating_existing:Oe.value},d=[v],f={},e.next=25,c.value.postTask(t,d,f,a);case 25:return g=e.sent,e.next=28,gt(g._id);case 28:if("SUCCESS"===te.value.status||"FAILURE"===te.value.status){e.next=40;break}if("PROGRESS"!==te.value.status){e.next=33;break}return e.next=32,xa(te.value.progress);case 32:ae.value="".concat(te.value.progress,"% - ").concat(te.value.position);case 33:return e.next=35,new Promise((function(e){ne.value=window.setTimeout(e,1e3)}));case 35:return ne.value=null,e.next=38,gt(g._id);case 38:e.next=28;break;case 40:if("SUCCESS"===te.value.status){e.next=46;break}return console.log("failed"),ke.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}),Z.value=!1,ee.value=!1,e.abrupt("return");case 46:return ke.dispatch({text:"Spatial Folder Successfully Uploaded",options:{right:!0,color:"success"}}),e.next=49,xa(te.value.progress);case 49:ae.value=te.value.status,Z.value=!1,ee.value=!1,$.value=0,q.value=0,W.value=0,ce.value=!0,e.next=68;break;case 58:e.prev=58,e.t0=e["catch"](5),console.log(e.t0),Z.value=!1,ee.value=!1,$.value=0,q.value=0,W.value=0,ce.value=!1,ke.dispatch({text:"Error generating spatial folder",options:{right:!0,color:"error"}});case 68:case"end":return e.stop()}}),e,null,[[5,58]])}))),ya.apply(this,arguments)}function wa(){c.value?O.value?_a():ke.dispatch({text:"Must complete image processing before genereating spatial folder",options:{right:!0,color:"error"}}):ke.dispatch({text:"Client is not initialized",options:{right:!0,color:"error"}})}function ka(){return Oa.apply(this,arguments)}function Oa(){return Oa=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return he.value=!1,Oe.value=!0,e.next=4,Pt();case 4:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function ja(e){ue.value=!0,0===I.value.polygons.length&&I.value.generatePolygons(),I.value.autoMask(J.value,X.value),O.value=!0}function Ra(){return Ca.apply(this,arguments)}function Ca(){return Ca=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.value){e.next=2;break}return e.abrupt("return");case 2:return f.value=[],g.value=[],m.value="",Z.value=!0,t={bucket_name:n.value,prefix:"".concat(i.value,"/"),delimiter:"/"},e.next=9,c.value.getSubFolders(t);case 9:a=e.sent,a&&(r=a.map((function(e){return{id:e}})),f.value=r),g.value=f.value,Z.value=!1;case 13:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Ma(e){return Sa.apply(this,arguments)}function Sa(){return Sa=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.value=!1,b.value=t.id,ft({component:"AtlasBrowser",run_id:b.value});case 3:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Aa(e){return Fa.apply(this,arguments)}function Fa(){return Fa=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket:r.value,path:"".concat(u.value,"/").concat(t,"/"),filter:[".csv"]},e.next=3,null===(a=c.value)||void 0===a?void 0:a.getFileList(n);case 3:i=e.sent,fe.value=i;case 5:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ia(e){return Da.apply(this,arguments)}function Da(){return Da=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={bucket:n.value,path:"".concat(i.value,"/").concat(t,"/"),delimiter:"/",filter:[".tif",".tiff",".png",".jpg","jpeg"]},e.next=3,null===(a=c.value)||void 0===a?void 0:a.getFileList(r);case 3:_.value=e.sent,1===_.value.length?(u=Object(Pe["a"])(_.value,1),x.value=u[0],Ce.value=!0,Pt()):0===_.value.length&&ke.dispatch({text:"No images found in folder",options:{right:!0,color:"error"}});case 5:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ta(e){return Ea.apply(this,arguments)}function Ea(){return Ea=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ot(),e.next=3,bt();case 3:Ia(t),he.value=!1;case 5:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Pa(e){return Ba.apply(this,arguments)}function Ba(){return Ba=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Uu){e.next=2;break}return e.abrupt("return");case 2:return b.value=t.id,vt(),e.next=6,_t();case 6:he.value=e.sent,he.value?Ce.value=!0:Ia(t.id);case 8:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}var Ua=Object(v["g"])([{text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,disabled:Z.value,click:function(){Re.value=!Re.value}},{text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:Z.value,click:function(){Ce.value=!Ce.value,b.value||(console.log("error message"),ke.dispatch({text:"Must select a Run ID",options:{right:!0,color:"error"}}))}},{text:"Restart",icon:!1,tooltip:"Restart Whole Process",enabled:!0,disabled:Z.value||o.value,click:function(){rt()}}]);return Object(v["h"])(S,(function(e){w.value.radius=e})),Object(v["h"])(C,(function(e){e&&(j.value=!1)})),Object(v["h"])(j,(function(e){e&&(C.value=!1)})),Object(v["h"])(z,(function(e){z.value&&!R.value&&(F.value=new Fu([V.value*z.value.image.width,V.value*z.value.image.height],V.value),ht(V.value))})),Object(v["h"])(Se,(function(e,t){e!==t&&(Y.value=!1)})),Object(v["h"])(Ae,(function(e,t){e!==t&&(Y.value=!1)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return B.commit.setSubmenu(Ua.value),t=Ye,e.next=4,Je(t,"public","Latch456!");case 4:if(a=e.sent,!He(a)){e.next=14;break}return n=st(),n&&ct(),lt({token:a.authorizationToken,url:a.serverURL}),e.t0=B.commit,e.next=12,qe.Create(t,a.authorizationToken);case 12:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1);case 14:return e.next=16,Uu;case 16:return c=Object(v["a"])((function(){return B.state.client})),B.commit.setComponent({component:"AtlasXBrowser"}),e.next=20,Uu;case 20:return window.addEventListener("resize",Xt),e.next=23,Ra();case 23:$t();case 24:case"end":return e.stop()}}),e)})))),Object(v["e"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:B.commit.setSubmenu(null),window.removeEventListener("resize",Xt);case 2:case"end":return e.stop()}}),e)})))),{allFiles:p,run_id:b,full_bsa_filename:x,metadata:nt,run_id_folder_names:f,run_id_folder_namesHolder:g,searchInput:h,headers:Nu,selectAction:Ma,search:m,konvaConfig:y,brushConfig:w,handleDragStart_Crop:Qt,handleDragEnd_Crop:Yt,handleDragMove_Crop:Kt,handleDragCenterMove_Crop:Zt,handleDragStart:ea,handleDragMove:ta,handleDragCenterStart:aa,handleDragCenterMove:na,handleMouseDown:ia,handleMouseMoveStage:oa,handleMouseDownBrush:la,handleMouseUpBrush:sa,handleMouseUp:ua,crop:F,roi:I,objectToArray:et,show_grid:At,current_image:z,load_and_begin_image_processing:Pt,searchRuns:Vt,stageWidth:U,initialize:vt,generateSpatial:_a,isCropMode:R,isBrushMode:j,setBrushMode:ca,isEraseMode:C,brushSize:S,scaleFactor:V,onChangeScale:ht,atpixels:J,autoFill:ja,threshold:X,loading:Z,loadingMessage:ee,cropLoading:le,threshLoading:se,orientation:re,drop_down_manager:l,onCropButton:ga,one:$,two:q,three:W,four:H,channels:ie,spatial:ce,scaleFactor_json:Ee,grid:ue,cropFlag:oe,tissue_position_list_obj:pe,prompt_to_use_existing_spatial:he,uploadingTixels:St,updating_existing:Oe,image_processing_begun:je,run_id_search_active:Re,show_metadata:Ce,bsa_blob:Me,getMeta:bt,resolveAuthGroup:pt,welcome_screen:o,company_image:Ne,thresh_clicked:ba,c_val:Se,neighbor_size:Ae,active_roi_available:E,roi_active:T,finding_roi:ha,thresh_image_created:Q,bw_image:Ue,linear_gradient_description_string:ve,thresh_same:Y,tixels_filled:O,bsa_image_displayed:Fe,change_image:va,handle_spatial_call:wa,rotate_bsa_image:Gt,saved_grid_state:K,hide_grid:pa,degreeRotation:Te,checkSpatial:Be,availableFiles:ze,imageClick:dt,root:i,bucket_name:n,bsa_image:Ge,black_white:Le,loadGrayCropped:Tt,postB_image_promise:G,postB_image:L,bw_image_displayed:Ie,postB_image_displayed:De,run_folder_selected:Pa,get_image_options:Ia,file_options:_,selecting_counts_pos_file:be,color_gradient_scale_numbers:Ve,tixel_color_mapping:ge,prompt_to_select_counts_positions:me,get_count_file_options:Aa,count_file_options:fe,tissue_positions_counts_filename:de,load_counts_positions:Ht,position_counts_present:xe,show_counts_tixels:_e,toggle_tixel_counts_disp:Ut,grid_visible:D,lower_bound_count:ye,upper_bound_count:we,metadata_confirmed:Ft,bucket_name_spatial:r,root_spatial:u,barcode_filename_options:$e,update_run_function:ka,retrieve_barcode_file:Ct,barcodes_in_list:We,reprocess_image:Ta,metadata_confirmed_bool:Ke,original_barcode_filename:Qe,pageRefresh:rt,activateCrop:fa,openDrawer:it,menuClicked:ut,submenu:Ua}}}),Gu=zu,Lu=(a("d657"),Object(te["a"])(Gu,pu,vu,!1,null,"62dc4c6c",null)),Vu=Lu.exports;s["default"].use(Ie["a"]);var $u=[{path:"/",name:"AtlasXplore",component:cu},{path:"/AtlasXplore",name:"AtlasXplore",component:cu},{path:"/AtlasXBrowser",name:"AtlasBrowser",component:Vu}],qu=new Ie["a"]({routes:$u,mode:"history"}),Wu=qu;s["default"].use(p.a),s["default"].config.productionTip=!1,new s["default"]({router:Wu,store:B.original,vuetify:Ne,provide:{vuetify:Ne},render:function(e){return e(Fe)}}).$mount("#app")},d657:function(e,t,a){"use strict";a("8535")},db49:function(e,t){var a={atlasxbrowser:{root_dir:"Images",root_dir_spatial:"Images_spatial",barcode_files_path:"BarcodeFiles",bucket_name:"atx-illumina",bucket_name_spatial:"atx-illumina",barcode_mapping:{1:"bc50v1-24.txt",2:"bc50v2-24.txt",3:"bc50v3-24.txt",4:"bc50v4-24.txt",5:"bc96v2-24.txt","1 (normal)":"bc50v1-24.txt","2 (reverseB)":"bc50v2-24.txt","3 (reverseA)":"bc50v3-24.txt","4 (reverseAB)":"bc50v4-24.txt"}}};e.exports=a},db89:function(e,t,a){},ec4c:function(e,t,a){"use strict";a("b98a")},f5dd:function(e,t,a){"use strict";a("db89")}});
//# sourceMappingURL=app.3e599e28.js.map