(function(e){function t(t){for(var n,u,s=t[0],o=t[1],c=t[2],p=0,v=[];p<s.length;p++)u=s[p],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&v.push(a[u][0]),a[u]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var o=r[s];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},i=[];function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=o;i.push(["cd49","chunk-vendors"]),r()})({0:function(e,t){},"034f":function(e,t,r){"use strict";r("85ec")},1:function(e,t){},2:function(e,t){},"34c1":function(e,t,r){"use strict";r("e9e6")},"507d":function(e,t,r){"use strict";r("5a45")},"5a45":function(e,t,r){},"85ec":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),a=r("7591"),i=r.n(a),u=(r("e792"),r("d5e8"),r("5363"),r("a6f4"));n["default"].use(u["b"]);var s=r("8a60"),o=r.n(s),c=o.a.prototype.stopCallback;function l(){o.a.paused=!1,o.a.pause=function(){o.a.paused=!0},o.a.unpause=function(){o.a.paused=!1},o.a.prototype.stopCallback=function(e,t,r){return!!o.a.paused||c(e,t,r)}}l();var p=r("4eb5"),v=r.n(p);n["default"].use(v.a);var d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view"),r("global-snackbar"),r("prompt"),r("upload-progress-display")],1)},f=[],h=r("2f62"),g=r("1898"),m=r("1da1"),b=r("5530"),_=(r("96cf"),r("4de4"),r("d3b7"),r("159b"),r("d81d"),r("3ca3"),r("ddb0"),r("ac1f"),r("1276"),r("99af"),r("bc3a")),x=r.n(_),y=r("2ef0"),w=r.n(y),k=function(e){return M(e,j)},O=function(e){return P(e,j)},j=Object(g["b"])({namespaced:!0,state:{inProgress:!1,dialogOpen:!1,uploads:[]},getters:{totalProgress:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=O(t),a=n.state,i=a.uploads.filter((function(e){return!e.cancelled}));return Math.round(i.reduce((function(e,t){return e+t.progress}),0)/i.length)},allSuccessful:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=O(t),a=n.state;return a.uploads.filter((function(e){return!e.error&&!e.cancelled})).length===a.uploads.length}},mutations:{setInProgress:function(e,t){e.inProgress=t},setDialogOpen:function(e,t){e.dialogOpen=t},setUploads:function(e,t){e.uploads=t},setUploadAtIndex:function(e,t){var r=t.upload,a=t.index;n["default"].set(e.uploads,a,r)}},actions:{cancelUpload:function(e,t){var r=k(e),n=r.state,a=r.commit,i=n.uploads[t];i.cancelToken.cancel();var u=Object(b["a"])(Object(b["a"])({},i),{},{cancelled:!0});a.setUploadAtIndex({index:t,upload:u})},cancelAllUploads:function(e){var t=k(e),r=t.state,n=t.dispatch;r.uploads.forEach((function(e,t){n.cancelUpload(t)}))},uploadDatasetFiles:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u,s,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],u=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:u,index:t})},n=k(e),a=n.state,i=n.commit,u=n.rootState.client,null!==u){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){s(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,s=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},s),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:i.setInProgress(!1);case 11:case"end":return r.stop()}}),r)})))()},uploadMetadataFile:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u,s,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],u=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:u,index:t})},n=k(e),a=n.state,i=n.commit,u=n.rootState.client,null!==u){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){s(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadMetadataFile(t);case 2:n=e.sent,s=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},s),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:i.setInProgress(!1);case 11:case"end":return r.stop()}}),r)})))()},uploadQcDatasetFiles:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u,s,o,c,l,p,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=function(e,t){var r=e.loaded/e.total*100,n=a.uploads[t],u=Object(b["a"])(Object(b["a"])({},n),{},{progress:r});i.setUploadAtIndex({upload:u,index:t})},n=k(e),a=n.state,i=n.commit,u=n.rootState.client,null!==u){r.next=4;break}return r.abrupt("return");case 4:return i.setInProgress(!0),o=t.map((function(e,t){return Object(b["a"])(Object(b["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:x.a.CancelToken.source(),onProgress:function(e){s(e,t)}})})),i.setUploads(o),c=o.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,s=a.uploads[r],i.setUploadAtIndex({index:r,upload:Object(b["a"])(Object(b["a"])({},s),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.next=10,Promise.all(c);case 10:return l=t[0].output_filename.split("/")[0],p=y["uniq"](t.map((function(e){return e.output_filename.split("/")[1]}))),v=p.map((function(e){var t="".concat(l,"/").concat(e),r={params:{qc_dir:t}},n=u.generateQcEntry(r);return n})),r.next=15,Promise.all(v).then((function(e){y["each"](e,(function(e){}))}));case 15:i.setInProgress(!1);case 16:case"end":return r.stop()}}),r)})))()},resetUploadState:function(e){var t=k(e),r=t.commit;r.setInProgress(!1),r.setUploads([])}}}),R=j;n["default"].use(h["a"]);var C=Object(g["a"])({state:{client:null,currentComponent:{component:null},serverStatus:null,subMenu:null,xploreData:null},getters:{},mutations:{setClient:function(e,t){e.client=t},setComponent:function(e,t){e.currentComponent=t},setServerStatus:function(e,t){e.serverStatus=t},setSubmenu:function(e,t){e.subMenu=t},setXploreData:function(e,t){e.xploreData=t}},actions:{},modules:{upload:R}}),S=C.store,M=(C.rootActionContext,C.moduleActionContext),P=(C.rootGetterContext,C.moduleGetterContext),A=S,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",e._b({attrs:{timeout:e.timeout},scopedSlots:e._u([e.buttonExists?{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{text:"",icon:!!e.buttonIcon},on:{click:e.buttonClicked}},"v-btn",n,!1),[e.buttonIcon?r("v-icon",[e._v(" "+e._s(e.buttonIcon)+" ")]):r("span",[e._v(" "+e._s(e.button)+" ")])],1)]}}:null],null,!0),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},"v-snackbar",e.options,!1),[e._v(" "+e._s(e.text)+" "),e.buttonExists?r("v-spacer"):e._e()],1)},B=[],T=Object(u["f"])(!1),F=Object(u["f"])(""),E="",U=Object(u["f"])(E),D="",L=Object(u["f"])(D),z=null,N=Object(u["f"])(z),q=2e3,J=Object(u["f"])(q),G={color:"secondary"},W=Object(u["f"])(G);function $(e){F.value=e.text,U.value=e.button||E,L.value=e.buttonIcon||D,N.value=e.callback||z,J.value=e.timeout||q,W.value=Object(b["a"])(Object(b["a"])({},G),e.options),T.value=!0}Object(u["g"])(T,(function(e){!1===e&&setTimeout((function(){W.value=G}),150)}));var H=Object(u["c"])({name:"Snackbar",setup:function(){var e=Object(u["a"])((function(){return U.value||L.value}));function t(){null!==N.value&&N.value(),T.value=!1}return{show:T,text:F,button:U,buttonIcon:L,buttonExists:e,callback:N,timeout:J,options:W,buttonClicked:t}}}),Q=H,V=r("2877"),X=Object(V["a"])(Q,I,B,!1,null,null,null),K=X.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"400"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clickNegative.apply(null,arguments)},input:function(t){return t||e.clickNegative()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-card",[e.title?r("v-toolbar-title",{staticClass:"title pa-4"},[e._v(" "+e._s(e.title)+" ")]):e._e(),r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pl-4"},[e._v(" "+e._s(e.message)+" ")]),r("v-card-actions",[r("v-spacer"),e.negativeText?r("v-btn",{attrs:{text:""},on:{click:e.clickNegative}},[e._v(" "+e._s(e.negativeText)+" ")]):e._e(),e.positiveText?r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.clickPositive}},[e._v(" "+e._s(e.positiveText)+" ")]):e._e()],1)],1)],1)},Z=[],ee="",te="",re=null,ne="",ae="",ie=Object(u["f"])(!1),ue=Object(u["f"])(ee),se=Object(u["f"])(te),oe=Object(u["f"])(re),ce=Object(u["f"])(ne),le=Object(u["f"])(ae);var pe=Object(u["c"])({name:"Prompt",setup:function(){function e(){oe.value&&oe.value(!0),ie.value=!1}function t(){oe.value&&oe.value(!1),ie.value=!1}return{show:ie,title:ue,message:se,positiveText:ce,negativeText:le,clickPositive:e,clickNegative:t}}}),ve=pe,de=Object(V["a"])(ve,Y,Z,!1,null,null,null),fe=de.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dialogOpen?r("v-card",{staticClass:"progress-card mr-5 mb-5",attrs:{"min-width":"20vw"}},[r("v-card-title",[e.inProgress?e._e():[e.allSuccessful?r("v-icon",{attrs:{left:"",color:"success"}},[e._v(" mdi-check ")]):r("v-icon",{attrs:{left:"",color:"warning"}},[e._v(" mdi-alert-circle ")])],e.inProgress?r("span",[e._v(" Uploading "+e._s(e.uploads.length)+" Files ")]):r("span",[e._v(" Uploads Finished ")]),r("v-spacer"),e.minimized?r("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!1}}},[r("v-icon",[e._v("mdi-chevron-up")])],1):r("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!0}}},[r("v-icon",[e._v("mdi-chevron-down")])],1),r("v-btn",{attrs:{icon:""},on:{click:e.handleClickClose}},[r("v-icon",[e._v("mdi-close")])],1),r("v-dialog",{attrs:{width:"30vw"},model:{value:e.closeDialogDialog,callback:function(t){e.closeDialogDialog=t},expression:"closeDialogDialog"}},[r("v-card",[r("v-card-title",[e._v("Cancel Uploads?")]),r("v-card-subtitle",[e._v(" Are you sure you want to cancel all uploads? ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:e.cancelAllUploads}},[e._v(" Cancel Uploads ")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.closeDialogDialog=!1}}},[e._v(" Continue ")])],1)],1)],1)],2),e.inProgress?r("v-progress-linear",{attrs:{value:e.totalProgress}}):e._e(),e.minimized?e._e():r("v-card-text",{staticClass:"pa-0"},[r("v-list",{attrs:{dense:""}},e._l(e.uploads,(function(t,n){return r("v-list-item",{key:n},[r("v-list-item-avatar",[r("v-icon",[e._v("mdi-folder-upload")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(" "+e._s(t.file.name)+" ")]),t.error?r("v-list-item-subtitle",{staticClass:"red--text"},[e._v(" "+e._s(t.error)+" ")]):e._e()],1),r("v-list-item-action",[t.cancelled?r("v-icon",{attrs:{color:"error"}},[e._v(" mdi-cancel ")]):t.error?r("v-icon",{attrs:{color:"error"}},[e._v(" mdi-close ")]):r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(a){var i=a.hover;return[i&&!t.finished?r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.cancelUpload(n)}}},[r("v-icon",[e._v("mdi-close")])],1):t.finished?r("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check ")]):r("v-progress-circular",{attrs:{color:"primary",width:"2",size:"24",value:50}})]}}],null,!0)})],1)],1)})),1)],1)],1):e._e()},ge=[],me={dispatch:$},be=Object(u["c"])({name:"UploadProgressDisplay",setup:function(){var e=Object(u["a"])((function(){return A.state.upload.uploads})),t=Object(u["a"])((function(){return A.getters.upload.allSuccessful})),r=Object(u["a"])((function(){return A.state.upload.inProgress})),n=Object(u["a"])((function(){return A.state.upload.dialogOpen})),a=Object(u["a"])((function(){return A.getters.upload.totalProgress})),i=Object(u["f"])(!0),s=Object(u["f"])(!1);function o(){A.commit.upload.setDialogOpen(!1),s.value=!1}function c(e){A.dispatch.upload.cancelUpload(e)}function l(){return p.apply(this,arguments)}function p(){return p=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.dispatch.upload.cancelAllUploads();case 2:me.dispatch({text:"Uploads Cancelled."}),o();case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(){r.value?s.value=!0:o()}return{uploads:e,allSuccessful:t,inProgress:r,totalProgress:a,dialogOpen:n,closeDialog:o,closeDialogDialog:s,handleClickClose:v,cancelUpload:c,cancelAllUploads:l,minimized:i}}}),_e=be,xe=(r("507d"),Object(V["a"])(_e,he,ge,!1,null,"6e5fe924",null)),ye=xe.exports,we=Object(u["c"])({name:"App",components:{GlobalSnackbar:K,Prompt:fe,UploadProgressDisplay:ye},setup:function(e,t){Object(u["a"])((function(){return A.state.client}))}}),ke=we,Oe=(r("034f"),Object(V["a"])(ke,d,f,!1,null,null,null)),je=Oe.exports,Re=r("8c4f"),Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-main",[r("appbar",{staticClass:"appbar",attrs:{submenu:e.submenu}}),r("v-container",{attrs:{fluid:""}},[r("v-row",[e.run_id_search_active?r("v-dialog",{attrs:{value:e.run_id_search_active,"hide-overlay":""},on:{"click:outside":function(t){e.run_id_search_active=!e.run_id_search_active}}},[r("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[r("v-card-title",[r("v-text-field",{attrs:{dense:"","prepend-inner-icon":"mdi-magnify",value:e.searchInput},on:{input:function(t){e.searchInput=t,e.searchRuns(e.searchInput)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{attrs:{height:"20vh",width:"20%",dense:"","single-select":"",loading:e.loading,items:e.run_id_folder_namesHolder,headers:e.headers},on:{"click:row":e.run_folder_selected}})],1)],1):e._e(),e.image_processing_begun?r("v-dialog",{attrs:{width:"600",height:"800",value:e.show_metadata,persistent:!e.metadata_confirmed_bool}},[r("metadata-dropdown",{attrs:{metadata:e.metadata,drop_down_manager:e.drop_down_manager,run_id:e.run_id,updating_existing:e.updating_existing,barcode_filename_list:e.barcode_filename_options,metadata_confirmed_bool:e.metadata_confirmed_bool},on:{confirmed:e.metadata_confirmed,refresh:e.pageRefresh}})],1):e._e(),e.checkSpatial?e._e():r("v-col",{staticClass:"pl-6 pt-3",attrs:{cols:"12",sm:"2"}},[e.run_id&&e.image_processing_begun?[r("v-card",[r("v-slider",{staticClass:"pl-2",attrs:{dense:"",height:"20",label:"Scale",type:"number",min:"0.1",max:"0.8",step:"0.005",disabled:!e.current_image},on:{change:e.onChangeScale},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}}),r("v-list",{staticClass:"mt-n3 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Rotation")]),r("v-btn",{attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(0)}}},[r("img",{attrs:{src:"/static/img/rotate_left.png",width:"24",height:"24"}})]),r("v-btn",{staticClass:"spaced_btn",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||"45"==e.degreeRotation||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(1)}}},[r("img",{attrs:{src:"/static/img/rotate_right.png",width:"24",height:"24"}})]),r("div",{staticStyle:{display:"grid","margin-top":"10px"}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"90",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"90")},on:{change:function(t){e.degreeRotation="90"}}}),e._v("90")]),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"45",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"45")},on:{change:function(t){e.degreeRotation="45"}}}),e._v("45")])])],1),r("v-list",{staticClass:"mt-n4 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Cropping")]),r("v-btn",{attrs:{outlined:"",color:"primary",dense:"","x-small":"",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},on:{click:function(t){e.isCropMode=!0}}},[e._v(" Activate ")]),r("v-btn",{staticClass:"mt-0 pt-0",attrs:{outlined:"",loading:e.cropLoading,disabled:!e.current_image||!e.isCropMode||e.cropFlag,"x-small":"",dense:"",color:"primary"},on:{click:function(t){return e.onCropButton()}}},[e._v(" Confirm ")])],1),r("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("ROI")]),r("v-btn",{staticClass:"mr-8",attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.active_roi_available},on:{click:e.finding_roi}},[e._v(" Activate ")]),r("v-btn",{attrs:{dense:"",outlined:"",color:"primary","x-small":"",disabled:e.grid_visible||!e.grid},on:{click:e.show_grid}},[e._v(" Display Grid ")]),r("v-btn",{attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.grid_visible},on:{click:function(t){return e.hide_grid()}}},[e._v(" Hide Grid ")])],1),r("v-list",{attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Thresholding")]),e._v(" C value: "+e._s(e.c_val)+" "),r("v-slider",{staticClass:"slider",attrs:{step:"1",min:"0",max:"25",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial},model:{value:e.c_val,callback:function(t){e.c_val=t},expression:"c_val"}}),e._v(" Neighborhood: "+e._s(e.neighbor_size)+" "),r("v-slider",{staticClass:"slider",attrs:{disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial,step:"1",min:"0",max:"25"},model:{value:e.neighbor_size,callback:function(t){e.neighbor_size=t},expression:"neighbor_size"}}),r("v-btn",{attrs:{loading:e.threshLoading,outlined:"",dense:"",color:"primary",small:"",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial||e.thresh_same},on:{click:e.thresh_clicked}},[e._v(" Threshold ")])],1),r("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Background Image")]),r("v-btn",{attrs:{id:"postB_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.postB_image_displayed||e.spatial},on:{click:function(t){return e.change_image("postB")}}},[e._v(" PostB ")]),r("v-btn",{attrs:{id:"bsa_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.bsa_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BSA")}}},[e._v(" BSA ")]),r("v-btn",{attrs:{id:"bw_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created||e.bw_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BW")}}},[e._v(" BW ")])],1),e._e(),e.position_counts_present?r("v-list",[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v(" Counts Visualization ")]),r("v-checkbox",{attrs:{label:e.show_counts_tixels?"Hide Counts":"Show Counts"},on:{click:e.toggle_tixel_counts_disp},model:{value:e.show_counts_tixels,callback:function(t){e.show_counts_tixels=t},expression:"show_counts_tixels"}}),e.show_counts_tixels?r("div",{style:{"background-image":""+e.linear_gradient_description_string,display:"flex",height:"50px","max-width":"250px","margin-left":"10px","margin-right":"10px"}},[r("div",{staticStyle:{position:"relative","padding-top":"50px",left:"5%"}},[e._v(" "+e._s(e.lower_bound_count)+" ")]),r("div",{staticStyle:{position:"relative","padding-top":"50px",left:"65%"}},[e._v(" "+e._s(e.upper_bound_count)+" ")])]):e._e()],1):e._e(),r("v-list",{staticClass:"pt-0 pl-2",attrs:{dense:""}},[r("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("On/Off")]),r("v-btn",{attrs:{outlined:"",disabled:!e.thresh_image_created||e.spatial,"x-small":"",dense:"",color:"primary"},on:{click:e.autoFill}},[e._v(" Autofill ")]),r("v-checkbox",{attrs:{dense:"",value:e.isBrushMode,disabled:!e.tixels_filled,label:"Fill"},model:{value:e.isBrushMode,callback:function(t){e.isBrushMode=t},expression:"isBrushMode"}}),r("v-checkbox",{attrs:{dense:"",value:e.isEraseMode,disabled:!e.tixels_filled,label:"Erase"},model:{value:e.isEraseMode,callback:function(t){e.isEraseMode=t},expression:"isEraseMode"}}),r("v-text-field",{staticStyle:{width:"100px"},attrs:{dense:"",label:"Br.Size",type:"number",min:"5.0",max:"100.0",step:"3.0",disabled:!e.tixels_filled},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}),[r("v-btn",{attrs:{disabled:!e.tixels_filled,outlined:"","x-small":"",dense:"",color:"primary"},on:{click:function(t){return e.handle_spatial_call()}}},[e._v(" Generate Spatial Folder ")])]],2)],1)]:e._e(),r("v-dialog",{attrs:{persistent:"",value:e.prompt_to_use_existing_spatial,"max-width":"800px"}},[r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.run_id)+" Spatial Folder Found. ")]),r("v-card-title",{staticClass:"justify-center"},[e._v(" Would you like to update the existing spatial folder or reprocess the image? ")]),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:function(t){return e.reprocess_image(e.run_id)}}},[e._v(" Reprocess ")]),r("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:e.update_run_function}},[e._v(" Update ")])],1)],1)],1),r("v-dialog",{attrs:{value:e.prompt_to_select_counts_positions,"max-width":"800px"}},[r("v-card",[r("v-card-title",{staticClass:"justify-center"},[e._v(" Select tissue positions file with counts if available. ")]),r("v-card-actions",[r("v-select",{attrs:{items:e.count_file_options},model:{value:e.tissue_positions_counts_filename,callback:function(t){e.tissue_positions_counts_filename=t},expression:"tissue_positions_counts_filename"}}),r("v-btn",{on:{click:function(t){e.prompt_to_select_counts_positions=!1,e.load_counts_positions()}}},[e._v(" Confirm ")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"",value:!e.image_processing_begun&&e.file_options.length>1&&!e.prompt_to_use_existing_spatial,"max-width":"800px"}},[r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" Multiple Images Found. ")]),r("v-card-title",{staticClass:"justify-center"},[e._v(" Please select the BSA image to be used for processing. ")]),r("v-card-actions",{staticClass:"justify-center"},[r("v-col",[r("v-select",{attrs:{items:e.file_options,label:"Select Image",outlined:"",dense:"",color:"primary",small:""},model:{value:e.full_bsa_filename,callback:function(t){e.full_bsa_filename=t},expression:"full_bsa_filename"}}),r("v-btn",{staticStyle:{position:"relative",left:"50%",transform:"translateX(-50%)"},attrs:{disabled:""===e.full_bsa_filename,outlined:""},on:{click:function(t){e.show_metadata=!0,e.load_and_begin_image_processing()}}},[e._v(" Submit ")])],1)],1)],1)],1)],2),e.checkSpatial?e._e():r("v-col",{attrs:{cols:"12",sm:"9"}},[r("v-container",[e.loadingMessage?[r("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[r("v-card-text"),r("v-dialog",{attrs:{value:"true","hide-overlay":"",persistent:"",width:"600"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-title",[e._v(" Creating and Saving Spatial Folder")]),r("v-card-text",[r("v-progress-linear",{staticClass:"mb-0",attrs:{"buffer-value":"0",height:"10",stream:"",color:"white"},model:{value:e.one,callback:function(t){e.one=t},expression:"one"}})],1)],1)],1)],1)]:e._e(),r("v-row",[r("v-card",[e.loading&&!e.loadingMessage?[r("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[r("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)]:e._e(),e.checkSpatial||e.welcome_screen?e._e():r("v-stage",{ref:"konvaStage",staticClass:"mainStage",attrs:{config:e.konvaConfig},on:{mousemove:e.handleMouseMoveStage}},[e.current_image?r("v-layer",{ref:"imageLayer",attrs:{id:"imageLayer"},on:{click:e.imageClick}},[r("v-image",{ref:"image",attrs:{config:e.current_image}})],1):e._e(),e.grid?r("v-layer",{ref:"roiLayer",attrs:{id:"roiLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[e.updating_existing||e.isBrushMode||e.isEraseMode?e._e():[r("v-line",{attrs:{config:e.roi.generateBoundary()}})],r("v-transformer",{ref:"transformer"}),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():e._l(e.roi.getAnchors(),(function(t){return r("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart,dragmove:e.handleDragMove}})})),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():r("v-circle",{key:e.roi.getCenterAnchor().id,attrs:{config:e.roi.getCenterAnchor()},on:{dragstart:e.handleDragCenterStart,dragmove:e.handleDragCenterMove}})]:e._e()],2):e._e(),r("v-layer",e._l(100,(function(t){return r("v-group",{key:t},e._l(e.roi.get_polygon_subset(t-1,100),(function(t){return r("v-shape",{key:t.id,attrs:{config:t},on:{transformend:function(t){return e.roi.setScaleFactor()},mousedown:e.handleMouseDown}})})),1)})),1),r("v-layer",[e.isBrushMode||e.isEraseMode?r("v-circle",{attrs:{config:e.brushConfig},on:{mousedown:e.handleMouseDownBrush,mouseup:e.handleMouseUpBrush}}):e._e()],1),!e.isCropMode||e.grid||e.cropFlag?e._e():r("v-layer",{ref:"cropLayer",attrs:{id:"cropLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[r("v-rect",{attrs:{config:e.crop.generateRect()}}),e.isBrushMode?e._e():e._l(e.crop.getAnchors(),(function(t){return r("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart_Crop,dragend:e.handleDragEnd_Crop,dragmove:e.handleDragMove_Crop}})})),e.isBrushMode?e._e():r("v-circle",{key:e.crop.getCenterAnchor().id,attrs:{config:e.crop.getCenterAnchor()},on:{dragmove:e.handleDragCenterMove_Crop}})]:e._e()],2)],1)],2)],1)],2)],1),e.welcome_screen?r("v-col",{attrs:{cols:"12",sm:"12",justify:"center"}},[r("v-img",{staticClass:"center",attrs:{src:"/static/img/atlasbg.png",width:"width",height:"height"}})],1):e._e()],1)],1)],1)},Se=[],Me=r("2909"),Pe=r("3835"),Ae=(r("4ec9"),r("2b3d"),r("9861"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("00b4"),r("4e82"),r("25eb"),r("a9e3"),r("c740"),r("6062"),r("e9c4"),r("caad"),r("2532"),r("d4ec")),Ie=r("bee2");r("b0c0"),r("d9e2");function Be(e,t){var r=e.toString();while(r.length<t)r="0".concat(r);return r}var Te=function(){function e(t){Object(Ae["a"])(this,e),this.axios=x.a.create({baseURL:t}),this.serverURL=t,this.urlPostfix=this.getUrlPostfix(),this.user=null,this.workers=null,x.a.defaults.headers.common["Access-Control-Allow-Origin"]="*"}return Object(Ie["a"])(e,[{key:"getUrlPostfix",value:function(){var e=this.serverURL.split("/"),t=e[e.length-1];return t}},{key:"updateWorkers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getWorkerSummary();case 2:this.workers=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApplicationInfo",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/app");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadByLink",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link",a={filename:t,expiry:r},e.next=4,this.axios.get(n,{params:a});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"downloadByLinkPublic",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link_public",a={bucket_name:t,filename:r},e.next=4,this.axios.get(n,{params:a});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"uploadDatasetFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t.file,t.file.name),r.append("meta",JSON.stringify(t.meta)),r.append("output_filename",t.output_filename),n="api/v1/storage/upload",e.prev=5,e.next=8,this.axios.post(n,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!x.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadMetadataFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t.file,t.file.name),r.append("meta",JSON.stringify(t.meta)),r.append("output_filename",t.output_filename),n="api/v1/dataset/".concat(t.meta_type,"/upload"),e.prev=5,e.next=8,this.axios.post(n,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!x.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/auth/changepassword",/Success : (.+)/,e.prev=2,e.next=5,this.axios.put(r,t);case 5:n=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",!1);case 11:if(!n.data){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Unknown Response Received from ".concat(r,"."));case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("/api/v1/auth/user",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"user_request_account",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/user_account_request",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notify_user_group_assignment",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/inform_user_assignment",t);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{user:t}},n=this.axios.put("/api/v1/auth/confirm",r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.delete("/api/v1/auth/user/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetUserPassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/resetpassword",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNames",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/gmnames",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNamesByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:r},e.next=3,this.axios.post("api/v1/genes/gmnames/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSpatialData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpatialDataByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:r},e.next=3,this.axios.post("api/v1/genes/get_spatial_data/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSummation",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,rows:r},e.next=3,this.axios.post("api/v1/genes/get_summation",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressions",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={filename:t},e.next=3,this.axios.post("api/v1/genes/expressions",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressionsByToken",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},e.next=3,this.axios.post("api/v1/genes/expressions/".concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneSpatial",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,genes:r},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",n,{timeout:3e5});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"encodeLink",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("api/v1/genes/generate_link",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWorkerSummary",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers/summary",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWorkers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTaskSync",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task_sync",u={queue:a,task:t,args:r,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task",u={queue:a,task:t,args:r,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"postPublicTask",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a,i){var u,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u="/api/v1/public_task",s={queue:a,task:t,args:r,kwargs:n,key:i},console.log(s),e.next=5,this.axios.post(u,s);case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a,i){return e.apply(this,arguments)}return t}()},{key:"decodeMetadata",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/storage/decode_meta/".concat(t),e.next=3,this.axios.get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTaskStatus",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/task/".concat(t),e.next=3,this.axios.get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJsonFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/json",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCsvFile",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/csv",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFileList",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/list",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubFolders",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/sub_folders",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBuckets",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/storage/fetch_buckets");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getImage",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:r}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomePageImages",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage/png",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:r}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getImageAsJPG",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/image_as_jpg",{params:t.params,responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",new File([r.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGrayImageAsCroppedJPG",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/grayscale_image_jpg_cropping",{params:t.params,responseType:"blob"});case 3:return r=e.sent,e.abrupt("return",new File([r.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateFrontPage",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:t,runId:r},e.next=3,this.axios.post("/api/v1/storage/generate_frontpage",n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"generateQcEntry",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/qc_entry",null,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMetadataFromRunId",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/v1/dataset/slimstest_runid",n="D".concat(Be(Number(t.split("D")[1]),5)),a={params:{run_id:n}},e.next=5,this.axios.get(r,a);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunIdList",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/dataset/slimstest_list_runids",e.next=3,this.axios.get(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkWafer",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getWafers(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWafers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafers",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putWafers",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/wafers",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteWafer",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/wafers",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkChip",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getChips(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getChips",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/chips",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putChips",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/chips",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteChip",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/chips",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkDbit",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getDbits(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDbits",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/dbits",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putDbits",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/dbits",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDbit",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/dbits",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getQc(r);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/qc",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putQc",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/qc",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWaferTrace",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafertrace",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunsCollaborator",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="dbit_metadata",a={params:{collaborator:t,table_name:n,web_objs:r}},e.next=4,this.axios.get("/api/v1/run_db/get_runs_collaborator",a);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"get_user_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/list_accounts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_group_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/group");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create_group",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={data:{group_name:t,description:r}},e.next=3,this.axios.post("/api/v1/auth/group",n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"modify_group_list",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/modify_group_list",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete_group",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{group_name:t}},e.next=3,this.axios.delete("/api/v1/auth/group",r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disable_user",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{username:t}},e.next=3,this.axios.put("/api/v1/auth/disable_user",r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logIntoPublic",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/auth/log_into_public");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUpdateDate",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_last_update");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSlimsData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_slims_data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicRuns",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/populate_homepage");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupPublicRuns",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="all_public_run_data",n={params:{table:r,group:t}},e.next=4,this.axios.get("/api/v1/run_db/get_group_runs",n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"re_initialize_db",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="public_data",r={params:{database:t}},console.log(r),e.next=5,this.axios.get("/api/v1/run_db/reinitialize_db",r);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePublicData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,this.axios.post("/api/v1/run_db/update_public",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchPMID",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_pmid",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchAuthors",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_authors",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"grabPaths",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/retrieve_paths");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm_user_status_via_email",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={params:{username:t,confirmation_code:r}},e.next=3,this.axios.get("/api/v1/auth/confirm_user_via_email",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"resend_registration_code",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/resend_confirmation_via_email",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"forgotPasswordRequest",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/forgot_password_request",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetPassword",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={username:t,password:r,code:n},e.next=3,this.axios.post("/api/v1/auth/forgot_password_confirmation",a);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"confirm_user_email_admin",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={username:t},e.next=3,this.axios.post("/api/v1/auth/confirm_user_email_admin",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_available_fields",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_field_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"upload_metadata_from_page",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/upload_metadata_page",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_info_from_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_run_id",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_run_ids",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_run_ids");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_info_from_results_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={results_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_results_id",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkSpatialFolderExists",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket_name:t,run_id:r},e.next=3,this.axios.post("/api/v1/run_db/check_spatial_folder_exists",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getJobs",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_jobs",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ensure_run_id_created",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/ensure_run_id_created",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_ids",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_studies");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_study_runs",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={study_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_study_runs",r);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update_study_table",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/update_study_table",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_types",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_study_types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_downloadable_files_for_run",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={tissue_id:t},e.next=3,this.axios.post("/api/v1/run_db/load_run_files_info",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_type_options",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_file_type_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submit_file_changes",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/set_run_files",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_info_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_file_info_run_id",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_all_downloadable_files_run_id",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_all_downloadable_files_run_id");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_urls",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_urls",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_url",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_url",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"Create",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e(r),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()}]),e}();r("466d"),Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SERVER_URL;var Fe="atxLogin",Ee=window.location.href,Ue=Ee.match(/https:.+\.custom\.pods\.latch\.bio/i),De="".concat(Ue),Le=r("35a6"),ze=r.n(Le),Ne=r("a77c"),qe=r.n(Ne),Je=r("31fa"),Ge=r.n(Je),We=r("0818"),$e=r.n(We),He=r("db49"),Qe=r.n(He),Ve=r("595c"),Xe=r.n(Ve),Ke=(r("53ca"),r("fb6a"),r("b64b"),r("498a"),r("9129"),r("ec26e"));function Ye(){return Object(Ke["a"])()}function Ze(e){var t=[];return w.a.forEach(e,(function(e,r){var n={key:r,value:e};t.push(n)})),t}function et(e,t){var r=e,n={name:r.name||void 0,path:r.path,params:r.params,query:t};return n}function tt(e,t){for(var r=[],n=0;n<e.length;n+=t)r[r.length]=e.slice(n,n+t);return r}var rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{attrs:{app:"",dense:""}},[e._l(e.subMenu,(function(t){return r("v-tooltip",{key:t.text,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on,i=n.attrs;return[t.type?e._e():[r("v-btn",e._g(e._b({class:t.enabled?"visible":"hidden",attrs:{id:t.ref?t.ref:"",text:"",icon:!!t.icon},on:{click:t.click}},"v-btn",i,!1),a),[t.icon?[r("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])]:e._e(),t.icon?e._e():[e._v(" "+e._s(t.text)+" ")]],2)],"component"==t.type?[r("div",{attrs:{id:t.id}})]:e._e()]}}],null,!0)},[r("span",{key:t.text+"-span"},[e._v(e._s(t.tooltip))])])})),r("v-spacer"),[r("v-menu",{attrs:{"offset-y":""},model:{value:e.userMenu,callback:function(t){e.userMenu=t},expression:"userMenu"}})]],2)},nt=[],at=r("2340"),it=r("fcf4"),ut=r("a78e"),st=r.n(ut),ot=Object(u["a"])((function(){return A.state.client})),ct=Object(u["a"])((function(){return null!==ot.value})),lt=Object(u["a"])((function(){var e;return(null===(e=ot.value)||void 0===e?void 0:e.user)||null}));Object(u["a"])((function(){return null!==lt.value}));function pt(){var e;st.a.remove(Fe),window.clearTimeout(null===(e=A.state.client)||void 0===e?void 0:e.refreshTimeoutId),A.commit.setClient(null)}function vt(e){if(!ot.value)return!1;if(!ot.value.user)return!1;if("any"===e[0]&&ot.value.user.groups.length>0)return!0;var t=!1;return w.a.each(ot.value.user.groups,(function(r){e.includes(r)&&(t=!0)})),t}var dt={"--bar-button-hover-bkg":it["a"].grey.lighten2,"--bar-button-open-color":it["a"].grey.darken3,"--bar-button-open-bkg":it["a"].grey.lighten2,"--bar-menu-item-hover-bkg":it["a"].grey.lighten2},ft=Object(u["c"])({name:"Appbar",props:["submenu"],components:{VueFileToolbarMenu:at["a"]},setup:function(e,t){t.root.$router;var r=Object(u["a"])((function(){return dt})),n=Object(u["a"])((function(){return A.state.currentComponent})),a=Object(u["f"])(!1),i=Object(u["f"])(!1),s=Object(u["a"])((function(){return e.submenu}));return{filemenuStyle:r,loggedIn:ct,logout:pt,userMenu:a,changePasswordMenu:i,subMenu:s,component:n,resolveAuthGroup:vt}}}),ht=ft,gt=(r("f5dd"),Object(V["a"])(ht,rt,nt,!1,null,null,null)),mt=gt.exports,bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-select",{attrs:{disabled:e.disabled,items:e.display_options,label:e.display_label},on:{input:e.value_changed},scopedSlots:e._u([{key:"append-outer",fn:function(){return[r("v-icon",{attrs:{color:e.add_option?"red":"green"},on:{click:function(t){e.add_option=!e.add_option}}},[e._v(" "+e._s(e.add_option?"mdi-close":"mdi-table-plus")+" ")])]},proxy:!0}]),model:{value:e.local_variable,callback:function(t){e.local_variable=t},expression:"local_variable"}}),e.add_option?r("v-row",[r("v-text-field",{attrs:{label:"Add Option"},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-icon",{attrs:{disabled:0==e.custom_option.length,color:"green"},on:{click:e.new_option}},[e._v(" mdi-check ")])]},proxy:!0}],null,!1,3234581051),model:{value:e.custom_option,callback:function(t){e.custom_option=t},expression:"custom_option"}})],1):e._e()],1)},_t=[],xt=Object(u["c"])({name:"custom-selector",props:{display_options:{type:Array,required:!0},display_label:{type:String,required:!0},variable:{required:!0},disabled:{type:Boolean}},model:{prop:"variable",event:"changed"},watch:{variable:function(e){this.local_variable=e}},setup:function(e,t){var r=Object(u["f"])(""),n=Object(u["f"])(""),a=Object(u["f"])(!1);function i(){t.emit("changed",r.value)}function s(){t.emit("option-added",n.value),r.value=n.value,n.value="",a.value=!1,i()}return Object(u["d"])((function(){e.variable&&(e.display_options.includes(e.variable)||t.emit("option-added",e.variable),r.value=String(e.variable))})),{local_variable:r,custom_option:n,add_option:a,value_changed:i,new_option:s}}}),yt=xt,wt=Object(V["a"])(yt,bt,_t,!1,null,null,null),kt=wt.exports,Ot=Object(Ie["a"])((function e(){Object(Ae["a"])(this,e),this.species_list=["mus_musculus","homo_sapiens","rattus_norvegicus","danio_rerio_(zebrafish)","gallus_domesticus_(chicken)","pdx","Mouse"],this.organ_list=["embryo","brain","kidney","polyp","liver","ovary","fallopian_tube_epithelium","cerebellum","retina","breast","bone_marrow","tonsil","scalp","pancreas","skin","tumor_allograft","melanoma_tumor","brain_tumor","colon_tumor","matched_liver_metastasis","tibialis_anterior_muscle_","hippocampus","lung","heart","embryonic_heart","spleen","colon","skull","thigh_skin","forearm_skin","shoulder_skin"],this.epitope_list=["H3K27me3","H3K27ac","H3K4me3"],this.group_list=[],this.tissue_source_list=[],this.pmid_list=[],this.tissue_type_list=["fresh_frozen","ffpe"],this.assay_list=["ATAC-seq","Transcriptome","CUT&Tag"],this.chip_resolution_list=["25um"]})),jt=(r("cb29"),function(){function e(t,r,n){Object(Ae["a"])(this,e),this.get_distance_wscale=function(e,t,r,n,a){var i=Math.sqrt(Math.pow(r/a-e/a,2)+Math.pow(n/a-t/a,2)),u=Math.round(1e3*i);return u/1e3},this.scalefactor=r,this.coordinates={},this.initializeROI(t[0],t[1]),this.channels=n,this.polygons=[]}return Object(Ie["a"])(e,[{key:"get_polygon_subset",value:function(e,t){var r=Math.floor(this.polygons.length*(e/t)),n=Math.floor(this.polygons.length*((e+1)/t)),a=this.polygons.slice(r,n);return a}},{key:"initializeROI",value:function(e,t){var r=this,n=[[.15*e,.15*t],[e-.15*e,.15*t],[e-.15*e,t-.15*t],[.15*e,t-.15*t]];n.forEach((function(e,t){var n=Object(Pe["a"])(e,2),a=n[0],i=n[1],u=Ye(),s={draggable:!0,id:u,x:a,y:i,stroke:"green",radius:10};r.coordinates&&(r.coordinates[u]=s)}))}},{key:"getCoordinates",value:function(){var e=[];return w.a.forEach(this.coordinates,(function(t,r){var n={x:t.x,y:t.y,id:r};e.push(n)})),e}},{key:"setCoordinates",value:function(e){var t=this,r=0;w.a.forEach(this.coordinates,(function(n,a){t.coordinates[a]={x:e[r].x*t.scalefactor,y:e[r].y*t.scalefactor},r+=1}))}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=e.map((function(e){var t={draggable:!0,id:e.id,x:e.x,y:e.y,stroke:"green",radius:10};return t}));return t}},{key:"moveToNewCenter",value:function(e){var t=this,r=this.getCenterAnchor(),n=e.x-r.x,a=e.y-r.y;w.a.forEach(this.coordinates,(function(e,r){t.coordinates[r].x+=n,t.coordinates[r].y+=a}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/4,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/4,stroke:"green",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];return w.a.forEach(this.coordinates,(function(r){var n={x:r.x/e.scalefactor,y:r.y/e.scalefactor};t.push(n)})),t}},{key:"getMask",value:function(e){var t=this;return this.polygons.map((function(e){var r=e.posit,n=e.centery/t.scalefactor,a=e.centerx/t.scalefactor,i=e.on_tissue;return{position:r,value:i,coordinates:{y:n,x:a}}}))}},{key:"getOnTissue",value:function(){var e=0;return this.polygons.forEach((function(t){t.on_tissue&&(e+=1)})),e}},{key:"autoMask",value:function(e,t){var r=this,n=Object(Pe["a"])(e.shape,2),a=(n[0],n[1]),i=0;return w.a.each(this.polygons,(function(n,u){0===i&&(i+=1);for(var s=Math.round(n.centery/r.scalefactor),o=Math.round(n.centerx/r.scalefactor),c=Math.round(n.radius/r.scalefactor),l=0,p=o-c;p<o+c;p+=1)for(var v=s-c;v<s+c;v+=1)l+=e.data[p*a+v];l/=Math.pow(2*c,2);var d=l<t;r.polygons[u].fill=d?"red":null,r.polygons[u].on_tissue=d})),this.polygons}},{key:"generateBoundary",value:function(){var e=this.getCoordinates(),t=[];w.a.each(e,(function(e,r){t.push(e.x),t.push(e.y)}));var r={points:t,stroke:"red",strokeWidth:1,closed:!0,visible:!0};return r}},{key:"setPolygonsInCircle",value:function(e,t,r,n){var a=this;w.a.each(this.polygons,(function(i,u){var s=Math.pow(i.centerx-e,2)+Math.pow(i.centery-t,2)<Math.pow(r,2);s&&a.setPolygonState(u,n)}))}},{key:"setPolygonState",value:function(e,t){var r=this;Object.keys(t).forEach((function(n){r.polygons[e][n]=t[n]}))}},{key:"fill_color_counts",value:function(e){if(Object.keys(e).length===this.polygons.length)for(var t=0;t<this.polygons.length;t+=1)this.polygons[t].fill=e[t],this.polygons[t].opacity=this.polygons[t].on_tissue?1:.5}},{key:"remove_color_counts",value:function(){for(var e=0;e<this.polygons.length;e+=1){var t=null;this.polygons[e].on_tissue&&(t="red"),this.polygons[e].fill=t,this.polygons[e].opacity=1}}},{key:"toggle_tixel_visibility",value:function(){for(var e=0;e<this.polygons.length;e+=1)this.polygons[e].visible=!this.polygons[e].visible}},{key:"show_tixels",value:function(){0===this.polygons.length?this.loadTixels():this.toggle_tixel_visibility()}},{key:"setScaleFactor",value:function(e){var t=this,r=this.scalefactor;this.scalefactor=e;var n=this.scalefactor/r,a={};w.a.forEach(this.coordinates,(function(e,t){a[t]={x:e.x*n,y:e.y*n}})),this.coordinates=a;var i=[];w.a.each(this.polygons,(function(e,r){var a=e;a.scaleX=e.scaleX*n,a.scaleY=e.scaleY*n,a.radius=e.radius*n,a.centerx=e.centerx*n,a.centery=e.centery*n,a.strokeWidth=.8*Math.max(1-t.scalefactor,.1),i.push(a)})),this.polygons=i}},{key:"getQCScaleFactors",value:function(t,r){var n=2e3/t.image.width,a=600/t.image.width,i=this.getMask(r);i.length;var u=i[0].coordinates,s=(u.x,u.y,i[1].coordinates),o=(s.x,s.y,this.getCoordinates()),c=Object(Pe["a"])(o,4),l=c[0],p=c[1],v=(c[2],c[3]),d=2*this.channels-1,f=e.ratio50l(l.x,l.y,v.x,v.y,d),h=e.ratio50l(l.x,l.y,p.x,p.y,d),g=[f[1]-l.y,f[0]-l.x],m=this.get_distance_wscale(f[0],f[1],h[0],h[1],this.scalefactor),b=this.get_distance_wscale(l.x,l.y,h[0]+g[1],h[1]+g[0],this.scalefactor),_=(m+b)/2,x=1.6153846;return{spot_diameter_fullres:_,fiducial_diameter_fullres:_*x,tissue_hires_scalef:n,tissue_lowres_scalef:a}}},{key:"loadTixels",value:function(){var t,r,n,a,i,u=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this.getCoordinates(),c=Object(Pe["a"])(o,4),l=c[0],p=c[1],v=(c[2],c[3]),d=2*this.channels-1,f=e.ratio50l(l.x,l.y,v.x,v.y,d),h=e.ratio50l(l.x,l.y,p.x,p.y,d),g=[f[1]-l.y,f[0]-l.x],m=[h[1]-l.y,h[0]-l.x],b=[2*g[0],2*g[1]],_=[2*m[0],2*m[1]],x=[];x.push(l.x),x.push(l.y);var y=[0,0],w=[0,0],k=!1;this.polygons=[];for(var O=0;O<this.channels;O+=1){y.fill(x[0]+m[1],0),y.fill(x[1]+m[0],1),k=!1;for(var j=function(o){!1===k?(w.fill(x[0],0),w.fill(x[1],1),t=[w[0],w[1]],r=[y[0],y[1]],n=[t[0]+g[1],t[1]+g[0]],a=[r[0]+g[1],r[1]+g[0]],k=!0):(w[0]+=b[1],w[1]+=b[0],t=[w[0],w[1]],r=[y[0],y[1]],n=[t[0]+g[1],t[1]+g[0]],a=[r[0]+g[1],r[1]+g[0]]),i=e.center(t,r,a,n);var c=[t[0],t[1]],l=[r[0],r[1]],p=[n[0],n[1]],v=[a[0],a[1]],d=O*u.channels+o,f="0",h=s[O*u.channels+o];if(h){var m=h[1];f=m}var _={sceneFunc:function(e,t){e.beginPath(),e.moveTo(c[0],c[1]),e.lineTo(l[0],l[1]),e.lineTo(v[0],v[1]),e.lineTo(p[0],p[1]),e.closePath(),e.fillStrokeShape(t)},id:d.toString(),fill:"1"===f?"red":null,on_tissue:"1"===f,visible:!0,centerx:i[0],centery:i[1],radius:g[0],opacity:1,stroke:"black",strokeWidth:.5,listening:!0,posit:[o,O],scaleX:1,scaleY:1,raw_fragments:null,log_fragments:null};u.polygons.push(_),y[0]+=b[1],y[1]+=b[0]},R=0;R<this.channels;R+=1)j(R);x[0]+=_[1],x[1]+=_[0]}}},{key:"generatePolygons",value:function(){return this.loadTixels(),this.polygons}}],[{key:"center",value:function(e,t,r,n){var a=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],u=(a[0]+i[0])/2,s=(a[1]+i[1])/2;return[u,s]}},{key:"ratio50l",value:function(e,t,r,n,a){var i=e+1/a*(r-e),u=t+1/a*(n-t);return[i,u]}}]),e}()),Rt=function(){function e(t,r){Object(Ae["a"])(this,e),this.scalefactor=r,this.coordinates={},this.initialize(t[0],t[1])}return Object(Ie["a"])(e,[{key:"initialize",value:function(t,r){var n=this,a=e.distance([.25*t,.15*r],[t-.25*t,.15*r]),i=[[.25*t,.15*r],[t-.25*t,a+.15*r]];i.forEach((function(e,t){var r=Object(Pe["a"])(e,2),a=r[0],i=r[1],u=t,s={draggable:!0,id:u,x:a,y:i,stroke:"red",radius:10};n.coordinates&&(n.coordinates[u]=s)}))}},{key:"getCoordinates",value:function(){var e=[];return w.a.forEach(this.coordinates,(function(t,r){var n={x:t.x,y:t.y,id:r};e.push(n)})),e}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=this.realCoords(),r=e.map((function(e,r){var n={draggable:!0,id:e.id,x:t[r].x,y:t[r].y,stroke:"red",radius:10};return n}));return r}},{key:"moveToNewCenter",value:function(e,t,r){var n=this,a=this.getCenterAnchor(),i=e.x-a.x,u=e.y-a.y;w.a.forEach(this.coordinates,(function(e,t){n.coordinates[t].x+=i,n.coordinates[t].y+=u}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/2,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/2,stroke:"red",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];w.a.forEach(this.coordinates,(function(r,n){t.push(Math.round(r.x/e.scalefactor)),t.push(Math.round(r.y/e.scalefactor))}));var r=Math.round(t[1]-t[0]),n=Math.round(t[3]-t[2]),a=0;return r>n&&(a=r-n),r<n&&(a=r-n),t[3]+=a,t}},{key:"setCoordinates",value:function(e){var t=this,r=0;w.a.forEach(this.coordinates,(function(n,a){t.coordinates[a]={x:e[r].x*t.scalefactor,y:e[r].y*t.scalefactor},r+=1}))}},{key:"generateRect",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),r=Math.floor(e[1].y-e[0].y),n=0;t>r&&(n=t-r),t<r&&(n=t-r);var a=Object(Pe["a"])(e,2),i=a[0],u=a[1];u.y+=n;var s=Math.min(i.x,u.x),o=Math.min(i.y,u.y),c=Math.abs(i.x-u.x),l=Math.abs(i.y-u.y),p={x:s,y:o,width:c,height:l,stroke:"blue",strokeWidth:2};return p}},{key:"realCoords",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),r=Math.floor(e[1].y-e[0].y),n=0;t>r&&(n=t-r),t<r&&(n=t-r);var a=Object(Pe["a"])(e,2),i=a[0],u=a[1];return u.y+=n,this.coordinates[1].y+=n,[i,u]}},{key:"setScaleFactor",value:function(e){var t=this.scalefactor;this.scalefactor=e;var r=this.scalefactor/t,n={};w.a.forEach(this.coordinates,(function(e,t){n[t]={x:e.x*r,y:e.y*r}})),this.coordinates=n}}],[{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}]),e}(),Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),r("v-card-title",{staticClass:"justify-center"},[e._v(" Run ID: "+e._s(e.run_id)+" ")]),r("v-card-text",[r("v-select",{attrs:{outlined:"",dense:"",label:"Barcode File",items:e.barcode_filename_list,disabled:e.metadata_confirmed_bool},model:{value:e.metadata.barcode_filename,callback:function(t){e.$set(e.metadata,"barcode_filename",t)},expression:"metadata.barcode_filename"}}),r("selector",{attrs:{display_label:"Species",display_options:e.drop_down_manager.species_list},on:{"option-added":function(t){return e.updateList("species_list",t)}},model:{value:e.metadata.species,callback:function(t){e.$set(e.metadata,"species",t)},expression:"metadata.species"}}),r("selector",{attrs:{display_label:"Organ",display_options:e.drop_down_manager.organ_list},on:{"option-added":function(t){return e.updateList("organ_list",t)}},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),r("selector",{attrs:{display_label:"Tissue Type",display_options:e.drop_down_manager.tissue_type_list},on:{"option-added":function(t){return e.updateList("tissue_type_list",t)}},model:{value:e.metadata.tissue_type,callback:function(t){e.$set(e.metadata,"tissue_type",t)},expression:"metadata.tissue_type"}}),r("v-select",{attrs:{items:e.drop_down_manager.assay_list,label:"Assay"},model:{value:e.metadata.assay,callback:function(t){e.$set(e.metadata,"assay",t)},expression:"metadata.assay"}}),r("selector",{directives:[{name:"show",rawName:"v-show",value:"CUT&Tag"===e.metadata.assay,expression:"metadata.assay === 'CUT&Tag'"}],attrs:{display_label:"Epitope Name",display_options:e.drop_down_manager.epitope_list},on:{"option-added":function(t){return e.updateList("epitope_list",t)}},model:{value:e.metadata.antibody,callback:function(t){e.$set(e.metadata,"antibody",t)},expression:"metadata.antibody"}}),r("selector",{attrs:{display_label:"Chip Resolution",display_options:e.drop_down_manager.chip_resolution_list},on:{"option-added":function(t){return e.updateList("chip_resolution_list",t)}},model:{value:e.metadata.chip_resolution,callback:function(t){e.$set(e.metadata,"chip_resolution",t)},expression:"metadata.chip_resolution"}})],1),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{disabled:!e.metadata.barcode_filename,outlined:""},on:{click:e.metadata_confirmed}},[e._v(" Confirm ")])],1)],1)},St=[],Mt=Object(u["c"])({name:"MetadataDropdown",components:{Selector:kt},props:{metadata:{type:Object,required:!0},run_id:{type:String,required:!0},drop_down_manager:{type:Object,required:!0},updating_existing:{type:Boolean,required:!0},barcode_filename_list:{type:Array,required:!0},metadata_confirmed_bool:{type:Boolean,required:!0}},setup:function(e,t){var r=Object(u["a"])((function(){return e.drop_down_manager}));function n(){t.emit("confirmed")}function a(){t.emit("refresh")}function i(e,t){var n=r.value[e].map((function(e){return e}));n.push(t),r.value[e]=n}return{metadata_confirmed:n,pageRefresh:a,updateList:i}}}),Pt=Mt,At=Object(V["a"])(Pt,Ct,St,!1,null,null,null),It=At.exports,Bt=new Promise((function(e){var t=Object(u["a"])((function(){return null!==A.state.client}));Object(u["h"])((function(){t.value&&e(!0)}))})),Tt=[{text:"ID",value:"id"}],Ft=Object(u["c"])({name:"AtlasBrowser",props:["query"],components:{Selector:kt,MetadataDropdown:It,Appbar:mt},setup:function(e,t){var r=Object(u["a"])((function(){return Qe.a.atlasxbrowser.root_dir})),n=Object(u["a"])((function(){return Qe.a.atlasxbrowser.barcode_files_path})),a=Object(u["f"])(!0),i=new Ot,s=t.root.$router,o=Object(u["a"])((function(){return A.state.client})),c=Object(u["f"])([]),l=Object(u["a"])((function(){return t.root.$route})),p=Object(u["f"])([]),v=Object(u["f"])([]),d=Object(u["f"])([]),f=Object(u["f"])(),h=Object(u["f"])(""),g=Object(u["f"])(""),b=Object(u["f"])(""),_=Object(u["f"])([]),x=Object(u["f"])({width_window:window.innerWidth,height_window:window.innerHeight}),y=Object(u["f"])({x:null,y:null,radius:20,fill:null,stroke:"red"}),k=Object(u["f"])(!1),O=Object(u["f"])(!1),j=Object(u["f"])(!1),R=Object(u["f"])(!1),C=Object(u["f"])(20),S=Object(u["f"])(!1),M=Object(u["f"])(new Rt([0,0],.15)),P=Object(u["f"])(new jt([0,0],.15,null)),I=Object(u["a"])((function(){return 0!==P.value.polygons.length&&P.value.polygons[0].visible})),B=Object(u["f"])(!1),T=Object(u["f"])(!1),F=Object(u["f"])(!1),E=Object(u["f"])(window.innerWidth),U=Object(u["f"])(window.innerHeight),D=Object(u["f"])(null),L=Object(u["f"])(null),z=Object(u["f"])(null),N=Object(u["f"])(.15),q=Object(u["f"])(0),J=Object(u["f"])(0),G=Object(u["f"])(0),W=Object(u["f"])(0),$=Object(u["f"])([]),H=Object(u["f"])(210),Q=Object(u["f"])(!1),V=Object(u["f"])(!1),X=Object(u["f"])(new Map),K=Object(u["f"])(!1),Y=Object(u["f"])(!1),Z=Object(u["f"])(),ee=Object(u["f"])(null),te=Object(u["f"])(null),re=Object(u["f"])({horizontal_flip:!1,vertical_flip:!1,rotation:0}),ne=Object(u["f"])(null),ae=Object(u["f"])(!1),ie=Object(u["f"])(!1),ue=Object(u["f"])(!1),se=Object(u["f"])(!1),oe=Object(u["f"])(!1),ce=Object(u["f"])(),le=Object(u["f"])(""),pe=Object(u["f"])(""),ve=Object(u["f"])([]),de=Object(u["f"])({}),fe=Object(u["f"])(!1),he=Object(u["f"])(!1),ge=Object(u["f"])(!1),be=Object(u["f"])(!1),_e=Object(u["f"])(!1),xe=Object(u["f"])(0),ye=Object(u["f"])(0),we=Object(u["f"])(!1),ke=Object(u["f"])(!1),Oe=Object(u["f"])(!1),je=(Object(u["f"])(!1),Object(u["f"])(!1)),Re=Object(u["f"])(),Ce=Object(u["f"])(7),Se=Object(u["f"])(7),Ae=Object(u["f"])(!0),Ie=Object(u["f"])(!1),Be=Object(u["f"])(!1),Fe=Object(u["f"])("90"),Ee=Object(u["f"])({fiducial_diameter_fullres:null,spot_diameter_fullres:null,tissue_hires_scalef:null,tissue_lowres_scalef:null}),Ue=Object(u["f"])(!1),Le=Object(u["f"])(),Ne=Object(u["f"])(null),Je=Object(u["f"])([]),We=Object(u["f"])(),He=Object(u["f"])(),Ve=Object(u["f"])([]),Ke=Object(u["f"])([]),Ye=Object(u["f"])([]),rt=Object(u["a"])((function(){return Qe.a.atlasxbrowser.barcode_mapping})),nt=Object(u["f"])(""),at=Object(u["f"])(!1),it=Object(u["f"])(!1),ut=!1,st=Object(u["f"])({points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""});function ot(){window.location.reload()}var ct=Object(u["f"])([{text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,disabled:K.value,click:function(){Oe.value=!Oe.value}},{text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:K.value,click:function(){je.value=!je.value,h.value||(console.log("error message"),me.dispatch({text:"Must select a Run ID",options:{right:!0,color:"error"}}))}},{text:"Restart",icon:!1,tooltip:"Restart Whole Process",enabled:!0,disabled:K.value||a.value,click:function(){ot()}}]);function lt(){st.value={points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""}}function pt(){P.value=new jt([0,0],N.value,null),M.value=new Rt([0,0],N.value),P.value.setScaleFactor(N.value),M.value.setScaleFactor(N.value),T.value=!1,Ue.value=!1,B.value=!1,O.value=!1,R.value=!1,Q.value=!1,V.value=!1,k.value=!1,j.value=!1,ae.value=!1,ie.value=!1,oe.value=!1,Oe.value=!1,K.value=!1,Re.value=null,we.value=!1,re.value={horizontal_flip:!1,vertical_flip:!1,rotation:0},g.value="",ke.value=!1,be.value=!1,_e.value=!1,ve.value=[],pe.value="",at.value=!1,nt.value=""}function vt(e){}function dt(e){var t=et(l,e),r=s.resolve(t).href!==l.value.fullPath;r&&s.push(t)}var ft=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o.value.getTaskStatus(t);case 4:Z.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ht(e){var t=N.value;D.value.scale={x:t,y:t},x.value.width=t*D.value.image.width,x.value.height=t*D.value.image.height,E.value=x.value.width,U.value=x.value.height,P.value.setScaleFactor(t),M.value.setScaleFactor(t)}function gt(e){var t=rt.value[e];t&&(st.value.barcode_filename=t)}function mt(){return bt.apply(this,arguments)}function bt(){return bt=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),bt.apply(this,arguments)}function _t(){return xt.apply(this,arguments)}function xt(){return xt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,u,s,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return",!1);case 2:return Oe.value=!1,K.value=!0,Y.value=!1,t=ut?"".concat(h.value,"/spatial/metadata.json"):"".concat(r.value,"/").concat(h.value,"/spatial/metadata.json"),n=ut?"".concat(h.value,"/spatial/metadata.json"):"".concat(r.value,"/").concat(h.value,"/spatial/scalefactors_json.json"),a=ut?"".concat(h.value,"/spatial/metadata.json"):"".concat(r.value,"/").concat(h.value,"/spatial/tissue_positions_list.csv"),i={params:{filename:t,flag:ut}},e.next=11,o.value.getJsonFile(i);case 11:return u=e.sent,s={params:{filename:a,flag:ut}},e.next=15,o.value.getCsvFile(s);case 15:return c=e.sent,l={params:{filename:n,flag:ut}},e.next=19,o.value.getJsonFile(l);case 19:if(p=e.sent,!(u&&c&&p)){e.next=29;break}return Ee.value=p,ce.value=c,K.value=!1,st.value=u,u.barcodes&&gt(u.barcodes),nt.value=st.value.barcode_filename,me.dispatch({text:"Metadata loaded from existing spatial directory",options:{color:"success",right:!0}}),e.abrupt("return",!0);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function yt(e){return wt.apply(this,arguments)}function wt(){return wt=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.value.concat("/".concat(t)),i={params:{filename:a,flag:ut}},e.next=4,null===(r=o.value)||void 0===r?void 0:r.getCsvFile(i);case 4:return u=e.sent,s=[],u.forEach((function(e){s.push(e[0])})),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)}))),wt.apply(this,arguments)}function kt(e){var t=Math.floor(Math.sqrt(e.length));return t*t!==e.length?-1:t}function Ct(e){return St.apply(this,arguments)}function St(){return St=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return e.next=4,yt(t);case 4:return r=e.sent,n=kt(r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Mt(){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(st.value.barcode_filename){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,yt(st.value.barcode_filename);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:if(r=kt(t),-1!==r){e.next=10;break}return e.abrupt("return",!1);case 10:return ne.value=r,P.value.channels=ne.value,Ye.value=t,e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function At(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ae.value=!0,ie.value=!0;var t=tt(st.value.points,2),r=t.map((function(e){return{x:e[0],y:e[1]}}));P.value.setCoordinates(r),re.value=st.value.orientation,e&&P.value.loadTixels(ce.value)}function It(){ae.value=!0,P.value.show_tixels()}function Ft(){return Et.apply(this,arguments)}function Et(){return Et=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(je.value=!1,t=!0,K.value||(K.value=!0,t=!1),at.value){e.next=25;break}return e.next=6,Mt();case 6:if(r=e.sent,r){e.next=13;break}je.value=!0,at.value=!1,me.dispatch({text:"Invalid barcode file.",options:{color:"error"}}),e.next=25;break;case 13:if(n=!0,a=!0,!we.value){e.next=24;break}if(st.value.barcode_filename===nt.value){e.next=21;break}return e.next=19,Ct(nt.value);case 19:i=e.sent,i!==ne.value&&(n=!1,a=!1);case 21:At(a),k.value=n,n||It();case 24:at.value=!0;case 25:t||(K.value=!1);case 26:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ut(e){if(!o.value)return null;var t=o.value.getImageAsJPG(e);return t}function Dt(e){if(!o.value)return null;try{var t=M.value.getCoordinatesOnImage();we.value&&(t=st.value.crop_area);var r=t[0],n=t[1],a=t[2],i=t[3],u={params:{filename:e,rotation:re.value.rotation,x1:r,x2:a,y1:n,y2:i,flag:ut}},s=o.value.getGrayImageAsCroppedJPG(u);return s}catch(c){return K.value=!1,null}}function Lt(e){var t=new window.Image;t.src=URL.createObjectURL(e);var r=.1;return t&&(t.onload=function(e){D.value={x:0,y:0,draggable:!1,scale:{x:r,y:r},image:t,src:null,original_src:null},ht("")}),t}function zt(){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,i,u,s,l,p,v,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:return a.value=!1,ke.value=!0,K.value=!0,Y.value=!1,we.value?(t=ut?"".concat(h.value,"/spatial/figure/postB_BSA.tif"):"".concat(r.value,"/").concat(h.value,"/spatial/figure/postB_BSA.tif"),Ae.value=!0,Be.value=!1,Ie.value=!1):t=ut?"".concat(h.value,"/").concat(g.value):"".concat(r.value,"/").concat(h.value,"/").concat(g.value),n={path:ut?"".concat(h.value,"/"):"".concat(r.value,"/").concat(h.value,"/"),filter:[""],only_files:!0,flag:ut},e.prev=8,i={params:{filename:t,rotation:re.value.rotation,flag:ut}},e.next=12,o.value.getImageAsJPG(i);case 12:return u=e.sent,Re.value=u,s=Lt(u),e.next=17,o.value.getFileList(n);case 17:c.value=e.sent,We.value=s.src,we.value&&(l=ut?"".concat(h.value,"/spatial/figure/postB.tif"):"".concat(r.value,"/").concat(h.value,"/spatial/figure/postB.tif"),p={params:{rotation:0,filename:l,flag:ut}},v=Ut(p),v&&(L.value=v)),it.value&&(d={params:{rotation:0,filename:ut?"".concat(h.value,"/").concat(b.value):"".concat(r.value,"/").concat(h.value,"/").concat(b.value),flag:ut}},f=Ut(d),f&&(L.value=f)),K.value=!1,Oe.value=!1,e.next=30;break;case 25:e.prev=25,e.t0=e["catch"](8),console.log(e.t0),K.value=!1,me.dispatch({text:"Failed to load the image file",options:{color:"error",right:!0}});case 30:case"end":return e.stop()}}),e,null,[[8,25]])}))),Nt.apply(this,arguments)}function qt(){_e.value?P.value.fill_color_counts(de.value):P.value.remove_color_counts()}function Jt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return K.value=!0,0===t?(a=parseInt(Fe.value,10),re.value.rotation+=a):re.value.rotation+=270,i={params:{filename:ut?"".concat(h.value,"/").concat(g.value):"".concat(r.value,"/").concat(h.value,"/").concat(g.value),rotation:re.value.rotation,flag:ut}},e.next=5,null===(n=o.value)||void 0===n?void 0:n.getImageAsJPG(i);case 5:u=e.sent,Re.value=u,Lt(u),K.value=!1;case 9:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Wt(e){for(var t=e,r=[],n=new RegExp("".concat(t,"[a-zA-z]*[0-9]*")),a=0;a<p.value.length;a+=1)n.test(p.value[a].id)&&r.push(p.value[a]);v.value=r}function $t(){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:return t=n.value,r={path:t,filter:[".txt"],flag:!1},a={path:t,filter:[".txt"],flag:!0},e.next=7,o.value.getFileList(r);case 7:return i=e.sent,i||(i=[]),e.next=11,o.value.getFileList(a);case 11:u=e.sent,u||(u=[]),s=i.concat(u),Ke.value=Object(Me["a"])(new Set(s)),console.log(Ke.value);case 16:case"end":return e.stop()}}),e)}))),Ht.apply(this,arguments)}function Qt(e,t){e.sort((function(e,t){var r=e[7],n=t[7];return r>n?1:r<n?-1:0}));for(var r=Math.sqrt(e.length),n=0;n<e.length;n+=1){var a=Math.floor(n/e.length*100),i=Number.parseInt(e[n][2],10),u=Number.parseInt(e[n][3],10),s=i*r+u;de.value[s]=t[a]}var o=e[Math.round(.05*e.length)][7],c=e[Math.round(.95*e.length)][7];xe.value=Math.round(100*o)/100,ye.value=Math.round(100*c)/100}function Vt(){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i,u,s,c,l,p,v,d,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=f.length>0&&void 0!==f[0]?f[0]:pe.value,n={params:{filename:r}},e.next=4,null===(t=o.value)||void 0===t?void 0:t.getCsvFile(n);case 4:if(a=e.sent,"Not-Found"!==a&&8===a[0].length){e.next=9;break}return me.dispatch({text:"Error! Incompatible File!",options:{color:"red"}}),pe.value="",e.abrupt("return");case 9:a.sort((function(e,t){var r=Number.parseInt(e[2],10),n=Number.parseInt(e[3],10),a=Number.parseInt(t[2],10),i=Number.parseInt(t[3],10);return r>a?1:r<a?-1:n>i?1:-1})),ce.value=a,i=JSON.parse(JSON.stringify(a)),u=Xe()({colormap:"jet",nshades:100,format:"hex"}),Qt(i,u),s=u[0],c=Math.round(100*i[0][7])/100,l=u[49],p=Math.round(100*i[Math.round(.5*a.length)][7])/100,v=u[99],d=Math.round(100*i[i.length-1][7])/100,le.value="linear-gradient(to right, ".concat(s,", ").concat(l,", ").concat(v,")"),Ve.value=[c,p,d],me.dispatch({text:"Successfully Loaded Tissue Position Counts",options:{color:"green",position:"center"}}),be.value=!0;case 24:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Kt(e){var t=N.value;null!==D.value?(D.value.scale={x:t,y:t},x.value.width=t*D.value.image.width,x.value.height=t*D.value.image.height,E.value=x.value.width,U.value=x.value.height):(x.value.width=E.value,x.value.height=U.value)}function Yt(e){e.target.attrs.id}function Zt(e){e.target.attrs.id,e.target._lastPos}function er(e){var t=e.target.attrs.id,r=e.target._lastPos;r.x>5&&r.y>5&&r.x<D.value.image.width&&r.y<D.value.image.height?(M.value.coordinates[t].x=r.x,M.value.coordinates[t].y=r.y):(M.value.coordinates[t].x=Math.min(Math.max(0,r.x),E.value),M.value.coordinates[t].y=Math.min(Math.max(0,r.y),U.value))}function tr(e){M.value.moveToNewCenter(e.target._lastPos,E.value,U.value)}function rr(e){e.target.attrs.id;P.value.polygons=[]}function nr(e){var t=e.target.attrs.id,r=e.target._lastPos;r.x>5&&r.y>5&&r.x<E.value&&r.y<U.value?(P.value.coordinates[t].x=r.x,P.value.coordinates[t].y=r.y):(P.value.coordinates[t].x=Math.min(Math.max(0,r.x),E.value),P.value.coordinates[t].y=Math.min(Math.max(0,r.y),U.value))}function ar(e){P.value.polygons=[]}function ir(e){P.value.moveToNewCenter(e.target._lastPos)}function ur(){var e={};_e.value?e.opacity=R.value?.5:1:e.fill=R.value?null:"red",e.on_tissue=!R.value,P.value.setPolygonsInCircle(y.value.x,y.value.y,y.value.radius,e)}function sr(e){if(0!==P.value.polygons.length){if(O.value)return F.value=!0,void ur();var t=e.target.attrs.id,r=w.a.findIndex(P.value.polygons,{id:t}),n={},a=P.value.polygons[r].on_tissue;n.on_tissue=!a,_e.value?n.opacity=a?.5:1:n.fill=a?null:"red",P.value.setPolygonState(r,n),F.value=!0}}function or(e){F.value=!1}function cr(e){if(O.value||R.value){var r=t.refs.konvaStage.getNode().getPointerPosition(),n=r.x,a=r.y;y.value.x=n,y.value.y=a,S.value&&ur()}}function lr(e){S.value=!0,ur()}function pr(e){S.value=!1}function vr(e){O.value=e}function dr(){P.value.toggle_tixel_visibility()}function fr(e){return hr.apply(this,arguments)}function hr(){return hr=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ae.value=!1,Be.value=!1,Ie.value=!1,r=null,"postB"!==t){e.next=12;break}if(!(!z.value&&we.value&&null!=L.value||it.value&&null!=L.value)){e.next=8;break}return e.next=8,L.value.then((function(e){z.value=URL.createObjectURL(e)}));case 8:r=z.value,Be.value=!0,e.next=13;break;case 12:"BSA"===t?(r=We.value,Ae.value=!0):"BW"===t&&(r=Le.value,Ie.value=!0);case 13:D.value.image.src=r;case 14:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function gr(e){var t=M.value.getCoordinatesOnImage(),n=D.value.image,a=n.width,i=n.height,u=Object(Pe["a"])(t,4),s=u[0],o=u[1],c=u[2],l=u[3];if(s<0||o<0||c>a||l>i)me.dispatch({text:"Keeping Cropping on Image",options:{color:"warning",right:!0}});else{var p=Dt(ut?"".concat(h.value,"/").concat(g.value):"".concat(r.value,"/").concat(h.value,"/").concat(g.value));p&&(L.value=p),ue.value=!0,ie.value=!0,j.value=!0,T.value=!0;var v=new window.Image;new window.Image;v.src=URL.createObjectURL(Re.value);var d=document.createElement("canvas"),f=d.getContext("2d");v.onload=function(e){URL.revokeObjectURL(v.src),d.width=t[2]-t[0],d.height=t[3]-t[1],f.drawImage(v,t[0],t[1],t[2]-t[0],t[3]-t[1],0,0,t[2]-t[0],t[3]-t[1]),d.toBlob((function(e){var t=Lt(e);We.value=t.src,ue.value=!1}))},P.value=new jt([(t[2]-t[0])*N.value,(t[3]-t[1])*N.value],N.value,ne.value)}}function mr(){ae.value=!0,T.value=!1,B.value=!0}function br(e){se.value=!0,Q.value=!0;var t=N.value;ze()(e,function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r,n){var a,i,u,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=new window.Image,i=Number(Ce.value),u=Number(Se.value),s=$e()(n,{compensation:i,size:u}),$.value=s,o=Ge()(),qe()(s,"jpeg").pipe(o).on("finish",(function(){var e=o.toBlobURL("image/jpeg");a.src=e,Le.value=e,a.onload=function(e){D.value={x:0,y:0,draggable:!1,scale:{x:N.value,y:N.value},image:a,src:null,original_src:null,alternative_src:null},ht(t)},V.value=!0,K.value=!1,se.value=!1,fr("BW")}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}function _r(){D.value&&L.value&&(K.value=!0,L.value.then((function(e){var t=URL.createObjectURL(e);z.value=t,br(z.value)})))}var xr=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:q.value=t;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function yr(){return wr.apply(this,arguments)}function wr(){return wr=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,i,u,s,l,p,v,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:if(st.value.barcode_filename){e.next=5;break}return me.dispatch({text:"Must Select Barcode File Before Generating Spatial Folder",options:{color:"warning",right:!0}}),e.abrupt("return");case 5:return e.prev=5,q.value=0,J.value=0,G.value=0,Y.value=!0,ee.value=null,K.value=!0,t="atlasbrowser.generate_spatial",a="atxcloud_atlasbrowser",i=P.value.getCoordinatesOnImage(),u=M.value.getCoordinatesOnImage(),we.value&&(u=st.value.crop_area),s=[],i.forEach((function(e,t){s.push(e.x),s.push(e.y)})),st.value=Object.assign(st.value,{points:s,run:h.value,blockSize:Se.value,threshold:H.value,cValue:Ce.value,numChannels:ne.value,orientation:re.value,crop_area:u,onTissueTixels:P.value.getOnTissue()}),l={run_id:h.value,files:c.value,crop_area:u,mask:P.value.getMask(u),metadata:st.value,scalefactors:P.value.getQCScaleFactors(D.value,u),orientation:re.value,barcode_path:"".concat(n.value,"/").concat(st.value.barcode_filename),root_dir:r.value,barcode_dir:n,bsa_path:ut?"/ldata/".concat(h.value,"/").concat(g.value):"".concat(r.value,"/").concat(h.value,"/").concat(g.value),updating_existing:we.value,postB_flag:it,latch_flag:ut},p=[l],v={},e.next=25,o.value.postTask(t,p,v,a);case 25:return d=e.sent,e.next=28,ft(d._id);case 28:if("SUCCESS"===Z.value.status||"FAILURE"===Z.value.status){e.next=40;break}if("PROGRESS"!==Z.value.status){e.next=33;break}return e.next=32,xr(Z.value.progress);case 32:ee.value="".concat(Z.value.progress,"% - ").concat(Z.value.position);case 33:return e.next=35,new Promise((function(e){te.value=window.setTimeout(e,1e3)}));case 35:return te.value=null,e.next=38,ft(d._id);case 38:e.next=28;break;case 40:if("SUCCESS"===Z.value.status){e.next=46;break}return console.log("failed"),me.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}),K.value=!1,Y.value=!1,e.abrupt("return");case 46:return me.dispatch({text:"Spatial Folder Successfully Uploaded",options:{right:!0,color:"success"}}),e.next=49,xr(Z.value.progress);case 49:ee.value=Z.value.status,K.value=!1,Y.value=!1,q.value=0,J.value=0,G.value=0,oe.value=!0,e.next=68;break;case 58:e.prev=58,e.t0=e["catch"](5),console.log(e.t0),K.value=!1,Y.value=!1,q.value=0,J.value=0,G.value=0,oe.value=!1,me.dispatch({text:"Error generating spatial folder",options:{right:!0,color:"error"}});case 68:case"end":return e.stop()}}),e,null,[[5,58]])}))),wr.apply(this,arguments)}function kr(){o.value?k.value?yr():me.dispatch({text:"Must complete image processing before genereating spatial folder",options:{right:!0,color:"error"}}):me.dispatch({text:"Client is not initialized",options:{right:!0,color:"error"}})}function Or(){return jr.apply(this,arguments)}function jr(){return jr=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return fe.value=!1,we.value=!0,e.next=4,zt();case 4:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Rr(e){ae.value=!0,0===P.value.polygons.length&&P.value.generatePolygons(),P.value.autoMask($.value,H.value),k.value=!0}function Cr(){return Sr.apply(this,arguments)}function Sr(){return Sr=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,u,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value){e.next=2;break}return e.abrupt("return");case 2:return p.value=[],v.value=[],f.value="",K.value=!0,t={prefix:"".concat(r.value,"/"),flag:ut},n={prefix:"",flag:!0},e.next=10,o.value.getSubFolders(t);case 10:return a=e.sent,e.next=13,o.value.getSubFolders(n);case 13:i=e.sent,u=[],a.length>i.length?i.forEach((function(e){a.includes(e)&&u.push(e)})):a.forEach((function(e){i.includes(e)&&u.push(e)})),s=a.concat(i),s&&(c=[],l=[],s.forEach((function(e){void 0!==u&&u.includes(e)&&!l.includes(e)?(c.push({id:e,from:["p","l"]}),l.push(e)):a.includes(e)&&!l.includes(e)?c.push({id:e,from:["p"]}):i.includes(e)&&!l.includes(e)&&c.push({id:e,from:["l"]})})),p.value=c),console.log(p.value),v.value=p.value,K.value=!1;case 21:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Mr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.value=!1,h.value=t.id,dt({component:"AtlasBrowser",run_id:h.value});case 3:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Ar(e){return Ir.apply(this,arguments)}function Ir(){return Ir=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={path:ut?"".concat(t,"/"):"".concat(r.value,"/").concat(t,"/"),filter:[".csv"],flag:ut},e.next=3,null===(n=o.value)||void 0===n?void 0:n.getFileList(a);case 3:i=e.sent,ve.value=i;case 5:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Br(e){return Tr.apply(this,arguments)}function Tr(){return Tr=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={path:ut?"".concat(t,"/"):"".concat(r.value,"/").concat(t,"/"),filter:[".tif",".tiff",".png",".jpg","jpeg"],flag:ut},e.next=3,null===(n=o.value)||void 0===n?void 0:n.getFileList(a);case 3:_.value=e.sent,1===_.value.length?(i=Object(Pe["a"])(_.value,1),g.value=i[0],zt()):_.value.length>1?(_.value.forEach((function(e){e.toLowerCase().includes("bsa")&&(g.value=e),e.toLowerCase().includes("postb")&&(it.value=!0,b.value=e)})),je.value=!0):0===_.value.length&&(me.dispatch({text:"No images found in folder",options:{right:!0,color:"error"}}),K.value=!1);case 5:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Fr(e){return Er.apply(this,arguments)}function Er(){return Er=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return lt(),e.next=3,mt();case 3:Br(t),fe.value=!1;case 5:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Ur(e){return Dr.apply(this,arguments)}function Dr(){return Dr=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Bt){e.next=2;break}return e.abrupt("return");case 2:return h.value=t.id,1===t.from.length&&"l"===t.from[0]&&(ut=!0),pt(),e.next=7,_t();case 7:fe.value=e.sent,fe.value?je.value=!0:Br(t.id);case 9:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}return Object(u["g"])(C,(function(e){y.value.radius=e})),Object(u["g"])(R,(function(e){e&&(O.value=!1)})),Object(u["g"])(O,(function(e){e&&(R.value=!1)})),Object(u["g"])(D,(function(e){D.value&&!j.value&&(M.value=new Rt([N.value*D.value.image.width,N.value*D.value.image.height],N.value),ht(N.value))})),Object(u["g"])(Ce,(function(e,t){e!==t&&(V.value=!1)})),Object(u["g"])(Se,(function(e,t){e!==t&&(V.value=!1)})),Object(u["d"])(Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=De,e.t0=A.commit,e.next=4,Te.Create(t);case 4:return e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1),A.commit.setComponent({component:"AtlasXBrowser"}),e.next=9,Bt;case 9:return window.addEventListener("resize",Kt),e.next=12,Cr();case 12:$t();case 13:case"end":return e.stop()}}),e)})))),Object(u["e"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:A.commit.setSubmenu(null),window.removeEventListener("resize",Kt);case 2:case"end":return e.stop()}}),e)})))),{allFiles:c,run_id:h,full_bsa_filename:g,full_postb_filename:b,metadata:st,run_id_folder_names:p,run_id_folder_namesHolder:v,searchInput:d,headers:Tt,selectAction:Mr,search:f,konvaConfig:x,brushConfig:y,handleDragStart_Crop:Yt,handleDragEnd_Crop:Zt,handleDragMove_Crop:er,handleDragCenterMove_Crop:tr,handleDragStart:rr,handleDragMove:nr,handleDragCenterStart:ar,handleDragCenterMove:ir,handleMouseDown:sr,handleMouseMoveStage:cr,handleMouseDownBrush:lr,handleMouseUpBrush:pr,handleMouseUp:or,crop:M,roi:P,objectToArray:Ze,show_grid:It,current_image:D,load_and_begin_image_processing:zt,searchRuns:Wt,stageWidth:E,initialize:pt,generateSpatial:yr,isCropMode:j,isBrushMode:O,setBrushMode:vr,isEraseMode:R,brushSize:C,scaleFactor:N,onChangeScale:ht,atpixels:$,autoFill:Rr,threshold:H,loading:K,loadingMessage:Y,cropLoading:ue,threshLoading:se,orientation:re,drop_down_manager:i,onCropButton:gr,one:q,two:J,three:G,four:W,channels:ne,spatial:oe,scaleFactor_json:Ee,grid:ae,cropFlag:ie,tissue_position_list_obj:ce,prompt_to_use_existing_spatial:fe,uploadingTixels:At,updating_existing:we,image_processing_begun:ke,run_id_search_active:Oe,show_metadata:je,bsa_blob:Re,getMeta:mt,welcome_screen:a,company_image:Ne,thresh_clicked:_r,c_val:Ce,neighbor_size:Se,active_roi_available:T,roi_active:B,finding_roi:mr,thresh_image_created:Q,bw_image:Le,linear_gradient_description_string:le,thresh_same:V,tixels_filled:k,bsa_image_displayed:Ae,change_image:fr,handle_spatial_call:kr,rotate_bsa_image:Jt,saved_grid_state:X,hide_grid:dr,degreeRotation:Fe,checkSpatial:Ue,availableFiles:Je,imageClick:vt,root:r,bsa_image:We,black_white:He,loadGrayCropped:Dt,postB_image_promise:L,postB_image:z,bw_image_displayed:Ie,postB_image_displayed:Be,run_folder_selected:Ur,get_image_options:Br,file_options:_,selecting_counts_pos_file:ge,color_gradient_scale_numbers:Ve,tixel_color_mapping:de,prompt_to_select_counts_positions:he,get_count_file_options:Ar,count_file_options:ve,tissue_positions_counts_filename:pe,load_counts_positions:Vt,position_counts_present:be,show_counts_tixels:_e,toggle_tixel_counts_disp:qt,grid_visible:I,lower_bound_count:xe,upper_bound_count:ye,metadata_confirmed:Ft,barcode_filename_options:Ke,update_run_function:Or,retrieve_barcode_file:Mt,barcodes_in_list:Ye,reprocess_image:Fr,metadata_confirmed_bool:at,original_barcode_filename:nt,submenu:ct,pageRefresh:ot}}}),Et=Ft,Ut=(r("34c1"),Object(V["a"])(Et,Ce,Se,!1,null,"3251bf66",null)),Dt=Ut.exports;n["default"].use(Re["a"]);var Lt=[{path:"/",name:"AtlasBrowser",component:Dt}],zt=new Re["a"]({routes:Lt,mode:"history"}),Nt=zt,qt=r("ce5b"),Jt=r.n(qt);r("bf40");n["default"].use(Jt.a);var Gt=new Jt.a;n["default"].use(i.a),n["default"].config.productionTip=!1,new n["default"]({router:Nt,store:A.original,vuetify:Gt,provide:{vuetify:Gt},render:function(e){return e(je)}}).$mount("#app")},db49:function(e,t){var r={atlasxbrowser:{root_dir:"Images",barcode_files_path:"BarcodeFiles",lims_available:!0,barcode_mapping:{1:"bc50v1-24.txt",2:"bc50v2-24.txt",3:"bc50v3-24.txt",4:"bc50v4-24.txt",5:"bc96v2-24.txt","1 (normal)":"bc50v1-24.txt","2 (reverseB)":"bc50v2-24.txt","3 (reverseA)":"bc50v3-24.txt","4 (reverseAB)":"bc50v4-24.txt"}}};e.exports=r},db89:function(e,t,r){},e9e6:function(e,t,r){},f5dd:function(e,t,r){"use strict";r("db89")}});
//# sourceMappingURL=app.166ed37c.js.map